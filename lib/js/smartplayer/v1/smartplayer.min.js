"undefined"!=typeof window&&function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,(function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/dist/",r(r.s=20)}([function(t,e,r){"use strict";var a;r.d(e,"a",(function(){return a})),function(t){t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached"}(a||(a={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return l}));var a=function(){},n={trace:a,debug:a,log:a,warn:a,info:a,error:a},i=n;function s(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):a}function o(t){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];r.forEach((function(e){i[e]=t[e]?t[e].bind(t):s(e)}))}(t,"debug","log","info","warn","error");try{i.log()}catch(t){i=n}}else i=n}var l=n},function(t,e,r){"use strict";var a,n;r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return n})),function(t){t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError"}(a||(a={})),function(t){t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown"}(n||(n={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)};Number.MAX_SAFE_INTEGER},function(t,e,r){"use strict";var a,n;r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return n})),function(t){t.MANIFEST="manifest",t.LEVEL="level",t.AUDIO_TRACK="audioTrack",t.SUBTITLE_TRACK="subtitleTrack"}(a||(a={})),function(t){t.MAIN="main",t.AUDIO="audio",t.SUBTITLE="subtitle"}(n||(n={}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return p})),r.d(e,"c",(function(){return f}));var a,n=r(3),i=r(11),s=r(1),o=r(17),l=r(12);function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}!function(t){t.AUDIO="audio",t.VIDEO="video",t.AUDIOVIDEO="audiovideo"}(a||(a={}));var h=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[a.AUDIO]=null,e[a.VIDEO]=null,e[a.AUDIOVIDEO]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),a=[];1===r.length?a[0]=e?e.byteRangeEndOffset:0:a[0]=parseInt(r[1]),a[1]=parseInt(r[0])+a[0],this._byteRange=a},d(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Object(i.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),p=function(t){function e(e,r){var a;return(a=t.call(this,r)||this)._decryptdata=null,a.rawProgramDateTime=null,a.programDateTime=null,a.tagList=[],a.duration=0,a.sn=0,a.levelkey=void 0,a.type=void 0,a.loader=null,a.level=-1,a.cc=0,a.startPTS=void 0,a.endPTS=void 0,a.appendedPTS=void 0,a.startDTS=void 0,a.endDTS=void 0,a.start=0,a.deltaPTS=void 0,a.maxStartPTS=void 0,a.minEndPTS=void 0,a.stats=new l.a,a.urlId=0,a.data=void 0,a.bitrateTest=!1,a.title=null,a.initSegment=null,a.type=e,a}c(e,t);var r=e.prototype;return r.createInitializationVector=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e},r.setDecryptDataFromLevelKey=function(t,e){var r=t;return"AES-128"===(null==t?void 0:t.method)&&t.uri&&!t.iv&&((r=o.a.fromURI(t.uri)).method=t.method,r.iv=this.createInitializationVector(e),r.keyFormat="identity"),r},r.setElementaryStreamInfo=function(t,e,r,a,n,i){void 0===i&&(i=!1);var s=this.elementaryStreams,o=s[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,a),o.endDTS=Math.max(o.endDTS,n)):s[t]={startPTS:e,endPTS:r,startDTS:a,endDTS:n,partial:i}},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[a.AUDIO]=null,t[a.VIDEO]=null,t[a.AUDIOVIDEO]=null},d(e,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&s.b.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(n.a)(this.programDateTime))return null;var t=Object(n.a)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;return!(null===(t=this.decryptdata)||void 0===t||!t.keyFormat||!this.decryptdata.uri)}}]),e}(h),f=function(t){function e(e,r,a,n,i){var s;(s=t.call(this,a)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new l.a,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=r,s.index=n;var o=e.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,i),i&&(s.fragOffset=i.fragOffset+i.duration),s}return c(e,t),d(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(h)},function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"g",(function(){return d})),r.d(e,"f",(function(){return h})),r.d(e,"d",(function(){return p})),r.d(e,"c",(function(){return f})),r.d(e,"e",(function(){return y})),r.d(e,"h",(function(){return v})),r.d(e,"a",(function(){return g}));var a=r(9),n=r(5),i=Math.pow(2,32)-1,s=[].push;function o(t){return String.fromCharCode.apply(null,t)}function l(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return r<0?4294967296+r:r}function c(t,e,r){"data"in t&&(e+=t.start,t=t.data),t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function u(t,e){var r,a,n,i=[];if(!e.length)return i;"data"in t?(r=t.data,a=t.start,n=t.end):(a=0,n=(r=t).byteLength);for(var c=a;c<n;){var d=l(r,c),h=d>1?c+d:n;if(o(r.subarray(c+4,c+8))===e[0])if(1===e.length)i.push({data:r,start:c+8,end:h});else{var p=u({data:r,start:c+8,end:h},e.slice(1));p.length&&s.apply(i,p)}c=h}return i}function d(t){var e=u(t,["moov"])[0],r=e?e.end:null,a=u(t,["sidx"]);if(!a||!a[0])return null;var n=[],i=a[0],s=i.data[0],o=0===s?8:16,c=l(i,o);o+=4,o+=0===s?8:16,o+=2;var d=i.end+0,h=function(t,e){"data"in t&&(e+=t.start,t=t.data);var r=t[e]<<8|t[e+1];return r<0?65536+r:r}(i,o);o+=2;for(var p=0;p<h;p++){var f=o,m=l(i,f);f+=4;var y=2147483647&m;if(1==(2147483648&m)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var v=l(i,f);f+=4,n.push({referenceSize:y,subsegmentDuration:v,info:{duration:v/c,start:d,end:d+y-1}}),d+=y,o=f+=4}return{earliestPresentationTime:0,timescale:c,version:s,referencesCount:h,references:n,moovEndOffset:r}}function h(t){for(var e=[],r=u(t,["moov","trak"]),a=0;a<r.length;a++){var i=r[a],s=u(i,["tkhd"])[0];if(s){var c=s.data[s.start],d=0===c?12:20,h=l(s,d),p=u(i,["mdia","mdhd"])[0];if(p){var f=l(p,d=0===(c=p.data[p.start])?12:20),m=u(i,["mdia","hdlr"])[0];if(m){var y=o(m.data.subarray(m.start+8,m.start+12)),v={soun:n.a.AUDIO,vide:n.a.VIDEO}[y];if(v){var g=u(i,["mdia","minf","stbl","stsd"])[0],b=void 0;g&&(b=o(g.data.subarray(g.start+12,g.start+16))),e[h]={timescale:f,type:v},e[v]={timescale:f,id:h,codec:b}}}}}}return u(t,["moov","mvex","trex"]).forEach((function(t){var r=l(t,4),a=e[r];a&&(a.default={duration:l(t,12),flags:l(t,20)})})),e}function p(t,e){return u(e,["moof","traf"]).reduce((function(e,r){var a=u(r,["tfdt"])[0],n=a.data[a.start],i=u(r,["tfhd"]).reduce((function(e,r){var i=l(r,4),s=t[i];if(s){var o=l(a,4);1===n&&(o*=Math.pow(2,32),o+=l(a,8));var c=o/(s.timescale||9e4);if(isFinite(c)&&(null===e||c<e))return c}return e}),null);return null!==i&&isFinite(i)&&(null===e||i<e)?i:e}),null)||0}function f(t,e){for(var r=0,a=0,i=0,s=u(t,["moof","traf"]),o=0;o<s.length;o++){var c=s[o],h=u(c,["tfhd"])[0],p=e[l(h,4)];if(p){var f=p.default,y=l(h,0)|(null==f?void 0:f.flags),v=null==f?void 0:f.duration;8&y&&(v=l(h,2&y?12:8));for(var g=p.timescale||9e4,b=u(c,["trun"]),w=0;w<b.length;w++)!(r=m(b[w]))&&v&&(r=v*l(b[w],4)),p.type===n.a.VIDEO?a+=r/g:p.type===n.a.AUDIO&&(i+=r/g)}}if(0===a&&0===i){var k=d(t);if(null!=k&&k.references)return k.references.reduce((function(t,e){return t+e.info.duration||0}),0)}return a||i}function m(t){var e=l(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var a=0,n=l(t,4),i=0;i<n;i++)256&e&&(a+=l(t,r),r+=4),512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4);return a}function y(t,e,r){u(e,["moof","traf"]).forEach((function(e){u(e,["tfhd"]).forEach((function(a){var n=l(a,4),s=t[n];if(s){var o=s.timescale||9e4;u(e,["tfdt"]).forEach((function(t){var e=t.data[t.start],a=l(t,4);if(0===e)c(t,4,a-r*o);else{a*=Math.pow(2,32),a+=l(t,8),a-=r*o,a=Math.max(a,0);var n=Math.floor(a/(i+1)),s=Math.floor(a%(i+1));c(t,4,n),c(t,8,s)}}))}}))}))}function v(t){var e={valid:null,remainder:null},r=u(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var n=r[r.length-1];return e.valid=Object(a.a)(t,0,n.start-8),e.remainder=Object(a.a)(t,n.start-8),e}function g(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}},function(t,e,r){"use strict";r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"d",(function(){return c})),r.d(e,"e",(function(){return u})),r.d(e,"c",(function(){return h})),r.d(e,"f",(function(){return g}));var a,n=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},i=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},s=function(t,e){for(var r=e,a=0;n(t,e);)a+=10,a+=o(t,e+6),i(t,e+10)&&(a+=10),e+=a;if(a>0)return t.subarray(r,r+a)},o=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,(r|=(127&t[e+2])<<7)|127&t[e+3]},l=function(t,e){return n(t,e)&&o(t,e+6)+10<=t.length-e},c=function(t){for(var e=h(t),r=0;r<e.length;r++){var a=e[r];if(u(a))return v(a)}},u=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},d=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=o(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},h=function(t){for(var e=0,r=[];n(t,e);){for(var a=o(t,e+6),s=(e+=10)+a;e+8<s;){var l=d(t.subarray(e)),c=p(l);c&&r.push(c),e+=l.size+10}i(t,e)&&(e+=10)}return r},p=function(t){return"PRIV"===t.type?f(t):"W"===t.type[0]?y(t):m(t)},f=function(t){if(!(t.size<2)){var e=g(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},m=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=g(t.data.subarray(e),!0);e+=r.length+1;var a=g(t.data.subarray(e));return{key:t.type,info:r,data:a}}var n=g(t.data.subarray(1));return{key:t.type,data:n}}},y=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=g(t.data.subarray(e),!0);e+=r.length+1;var a=g(t.data.subarray(e));return{key:t.type,info:r,data:a}}var n=g(t.data);return{key:t.type,data:n}},v=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],a=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return a/=45,r&&(a+=47721858.84),Math.round(a)}},g=function(t,e){void 0===e&&(e=!1);var r=b();if(r){var a=r.decode(t);if(e){var n=a.indexOf("\0");return-1!==n?a.substring(0,n):a}return a.replace(/\0/g,"")}for(var i,s,o,l=t.length,c="",u=0;u<l;){if(0===(i=t[u++])&&e)return c;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(i);break;case 12:case 13:s=t[u++],c+=String.fromCharCode((31&i)<<6|63&s);break;case 14:s=t[u++],o=t[u++],c+=String.fromCharCode((15&i)<<12|(63&s)<<6|(63&o)<<0)}}return c};function b(){return a||void 0===self.TextDecoder||(a=new self.TextDecoder("utf-8")),a}},function(t,e,r){"use strict";function a(t,e,r,a){void 0===r&&(r=1),void 0===a&&(a=!1);var n=t*e*r;return a?Math.round(n):n}function n(t,e,r,n){return void 0===r&&(r=1),void 0===n&&(n=!1),a(t,e,1/r,n)}function i(t,e){return void 0===e&&(e=!1),a(t,1e3,1/9e4,e)}function s(t,e){return void 0===e&&(e=1),a(t,9e4,1/e)}r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return s}))},function(t,e,r){"use strict";function a(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}r.d(e,"a",(function(){return a}))},function(t,e,r){"use strict";r.d(e,"c",(function(){return lt})),r.d(e,"d",(function(){return ut})),r.d(e,"a",(function(){return dt})),r.d(e,"b",(function(){return ht}));var a=r(0),n=r(2),i=r(15),s=r(3),o=r(7),l=r(6),c=r(9),u=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.initPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(){},e.resetContiguity=function(){},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=Object(l.a)(this.cachedData,t),this.cachedData=null);var r,a,n=o.b(t,0),i=n?n.length:0,s=this._audioTrack,u=this._id3Track,h=n?o.d(n):void 0,p=t.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=d(h,e)),n&&n.length>0&&u.samples.push({pts:this.initPTS,dts:this.initPTS,data:n}),a=this.initPTS;i<p;){if(this.canParse(t,i)){var f=this.appendFrame(s,t,i);f?(this.frameIndex++,a=f.sample.pts,r=i+=f.length):i=p}else o.a(t,i)?(n=o.b(t,i),u.samples.push({pts:a,dts:a,data:n}),r=i+=n.length):i++;if(i===p&&r!==p){var m=Object(c.a)(t,r);this.cachedData?this.cachedData=Object(l.a)(this.cachedData,m):this.cachedData=m}}return{audioTrack:s,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:u,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),this.frameIndex=0,{audioTrack:this._audioTrack,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:this._id3Track,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.destroy=function(){},t}(),d=function(t,e){return Object(s.a)(t)?90*t:9e4*e},h=u,p=r(1);function f(t,e){return 255===t[e]&&240==(246&t[e+1])}function m(t,e){return 1&t[e+1]?7:9}function y(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function v(t,e){return e+1<t.length&&f(t,e)}function g(t,e){if(v(t,e)){var r=m(t,e);if(e+r>=t.length)return!1;var a=y(t,e);if(a<=r)return!1;var n=e+a;return n===t.length||v(t,n)}return!1}function b(t,e,r,i,s){if(!t.samplerate){var o=function(t,e,r,i){var s,o,l,c,u=navigator.userAgent.toLowerCase(),d=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&e[r+2])>>>6);var f=(60&e[r+2])>>>2;if(!(f>h.length-1))return l=(1&e[r+2])<<2,l|=(192&e[r+3])>>>6,p.b.log("manifest codec:"+i+", ADTS type:"+s+", samplingIndex:"+f),/firefox/i.test(u)?f>=6?(s=5,c=new Array(4),o=f-3):(s=2,c=new Array(2),o=f):-1!==u.indexOf("android")?(s=2,c=new Array(2),o=f):(s=5,c=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&f>=6?o=f-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(f>=6&&1===l||/vivaldi/i.test(u))||!i&&1===l)&&(s=2,c=new Array(2)),o=f)),c[0]=s<<3,c[0]|=(14&f)>>1,c[1]|=(1&f)<<7,c[1]|=l<<3,5===s&&(c[1]|=(14&o)>>1,c[2]=(1&o)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[f],channelCount:l,codec:"mp4a.40."+s,manifestCodec:d};t.trigger(a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+f})}(e,r,i,s);if(!o)return;t.config=o.config,t.samplerate=o.samplerate,t.channelCount=o.channelCount,t.codec=o.codec,t.manifestCodec=o.manifestCodec,p.b.log("parsed codec:"+t.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function w(t){return 9216e4/t}function k(t,e,r,a,n){var i=function(t,e,r,a,n){var i=m(t,e),s=y(t,e);if((s-=i)>0)return{headerLength:i,frameLength:s,stamp:r+a*n}}(e,r,a,n,w(t.samplerate));if(i){var s,o=i.frameLength,l=i.headerLength,c=i.stamp,u=l+o,d=Math.max(0,r+u-e.length);d?(s=new Uint8Array(u-l)).set(e.subarray(r+l,e.length),0):s=e.subarray(r+l,r+u);var h={unit:s,pts:c};return d||t.samples.push(h),{sample:h,length:u,missing:d}}}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){var e,r;function a(e,r){var a;return(a=t.call(this)||this).observer=void 0,a.config=void 0,a.observer=e,a.config=r,a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,T(e,r);var n=a.prototype;return n.resetInitSegment=function(e,r,a){t.prototype.resetInitSegment.call(this,e,r,a),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:a,inputTimeScale:9e4,dropped:0}},a.probe=function(t){if(!t)return!1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(g(t,e))return p.b.log("ADTS sync word found !"),!0;return!1},n.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&f(t,e)&&y(t,e)<=t.length-e}(t,e)},n.appendFrame=function(t,e,r){b(t,this.observer,e,r,t.manifestCodec);var a=k(t,e,r,this.initPTS,this.frameIndex);if(a&&0===a.missing)return a},a}(h);x.minProbeByteLength=9;var E=x,S=function(){function t(t,e){this.remainderData=null,this.config=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.resetContiguity=function(){},t.probe=function(t){return Object(l.b)({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.demux=function(t){var e=t,r={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};if(this.config.progressive){this.remainderData&&(e=Object(l.a)(this.remainderData,t));var a=Object(l.h)(e);this.remainderData=a.remainder,r.samples=a.valid||new Uint8Array}else r.samples=e;return{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:r,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.flush=function(){var t={type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0};return t.samples=this.remainderData||new Uint8Array,this.remainderData=null,{audioTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},avcTrack:t,id3Track:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0}}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}();S.minProbeByteLength=1024;var _=S,L=null,A=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],C=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],R=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],I=[0,1,1,4];function D(t,e,r,a,n){if(!(r+24>e.length)){var i=O(e,r);if(i&&r+i.frameLength<=e.length){var s=a+n*(9e4*i.samplesPerFrame/i.sampleRate),o={unit:e.subarray(r,r+i.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(o),{sample:o,length:i.frameLength,missing:0}}}}function O(t,e){var r=t[e+1]>>3&3,a=t[e+1]>>1&3,n=t[e+2]>>4&15,i=t[e+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==i){var s=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*A[14*(3===r?3-a:3===a?3:4)+n-1],c=C[3*(3===r?0:2===r?1:2)+i],u=3===o?1:2,d=R[r][a],h=I[a],p=8*d*h,f=Math.floor(d*l/c+s)*h;if(null===L){var m=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);L=m?parseInt(m[1]):0}return!!L&&L<=87&&2===a&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:c,channelCount:u,frameLength:f,samplesPerFrame:p}}}function P(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function M(t,e){return e+1<t.length&&P(t,e)}function F(t,e){if(e+1<t.length&&P(t,e)){var r=O(t,e),a=4;null!=r&&r.frameLength&&(a=r.frameLength);var n=e+a;return n===t.length||M(t,n)}return!1}var B=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,a=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");a.set(t.subarray(r,r+n)),this.word=new DataView(a.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.skipBits=function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;return t>32&&p.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,a=0;a<t;a++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},e.readSPS=function(){var t,e,r,a=0,n=0,i=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),c=this.readUEG.bind(this),u=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);o();var m=o();if(l(5),d(3),o(),p(),100===m||110===m||122===m||244===m||44===m||83===m||86===m||118===m||128===m){var y=c();if(3===y&&d(1),p(),p(),d(1),u())for(e=3!==y?8:12,r=0;r<e;r++)u()&&f(r<6?16:64)}p();var v=c();if(0===v)c();else if(1===v)for(d(1),h(),h(),t=c(),r=0;r<t;r++)h();p(),d(1);var g=c(),b=c(),w=l(1);0===w&&d(1),d(1),u()&&(a=c(),n=c(),i=c(),s=c());var k=[1,1];if(u()&&u())switch(o()){case 1:k=[1,1];break;case 2:k=[12,11];break;case 3:k=[10,11];break;case 4:k=[16,11];break;case 5:k=[40,33];break;case 6:k=[24,11];break;case 7:k=[20,11];break;case 8:k=[32,11];break;case 9:k=[80,33];break;case 10:k=[18,11];break;case 11:k=[15,11];break;case 12:k=[64,33];break;case 13:k=[160,99];break;case 14:k=[4,3];break;case 15:k=[3,2];break;case 16:k=[2,1];break;case 255:k=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(g+1)-2*a-2*n),height:(2-w)*(b+1)*16-(w?2:4)*(i+s),pixelRatio:k}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),N=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new i.a(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,e)},e.decryptAacSample=function(t,e,r,a){var n=t[e].unit,i=n.subarray(16,n.length-n.length%16),s=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),o=this;this.decryptBuffer(s,(function(i){var s=new Uint8Array(i);n.set(s,16),a||o.decryptAacSamples(t,e+1,r)}))},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)){var a=this.decrypter.isSync();if(this.decryptAacSample(t,e,r,a),!a)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),a=0,n=32;n<t.length-16;n+=160,a+=16)r.set(t.subarray(n,n+16),a);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),a=0,n=32;n<t.length-16;n+=160,a+=16)t.set(r.subarray(a,a+16),n);return t},e.decryptAvcSample=function(t,e,r,a,n,i){var s=W(n.data),o=this.getAvcEncryptedData(s),l=this;this.decryptBuffer(o.buffer,(function(o){n.data=l.getAvcDecryptedUnit(s,o),i||l.decryptAvcSamples(t,e,r+1,a)}))},e.decryptAvcSamples=function(t,e,r,a){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void a();for(var n=t[e].units;!(r>=n.length);r++){var i=n[r];if(!(i.data.length<=48||1!==i.type&&5!==i.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(t,e,r,a,i,s),!s)return}}}},t}(),U={video:1,audio:2,id3:3,text:4},j=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this.aacLastPTS=null,this._initPTS=null,this._initDTS=null,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r}t.probe=function(e){var r=t.syncOffset(e);return!(r<0||(r&&p.b.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},t.syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),r=0;r<e;){if(71===t[r]&&71===t[r+188]&&71===t[r+376])return r;r++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:U[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",a),this._audioTrack=t.createTrack("audio",a),this._id3Track=t.createTrack("id3",a),this._txtTrack=t.createTrack("text",a),this._audioTrack.isAAC=!0,this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=e,this.videoCodec=r,this._duration=a},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,r,i,s){var o;void 0===i&&(i=!1),void 0===s&&(s=!1),i||(this.sampleAes=null);var c=this._avcTrack,u=this._audioTrack,d=this._id3Track,h=c.pid,f=c.pesData,m=u.pid,y=d.pid,v=u.pesData,g=d.pesData,b=!1,w=this.pmtParsed,k=this._pmtId,T=e.length;if(this.remainderData&&(T=(e=Object(l.a)(this.remainderData,e)).length,this.remainderData=null),T<188&&!s)return this.remainderData=e,{audioTrack:u,avcTrack:c,id3Track:d,textTrack:this._txtTrack};var x=Math.max(0,t.syncOffset(e));(T-=(T+x)%188)<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));for(var E=0,S=x;S<T;S+=188)if(71===e[S]){var _=!!(64&e[S+1]),L=((31&e[S+1])<<8)+e[S+2],A=void 0;if((48&e[S+3])>>4>1){if((A=S+5+e[S+4])===S+188)continue}else A=S+4;switch(L){case h:_&&(f&&(o=z(f))&&this.parseAVCPES(o,!1),f={data:[],size:0}),f&&(f.data.push(e.subarray(A,S+188)),f.size+=S+188-A);break;case m:_&&(v&&(o=z(v))&&(u.isAAC?this.parseAACPES(o):this.parseMPEGPES(o)),v={data:[],size:0}),v&&(v.data.push(e.subarray(A,S+188)),v.size+=S+188-A);break;case y:_&&(g&&(o=z(g))&&this.parseID3PES(o),g={data:[],size:0}),g&&(g.data.push(e.subarray(A,S+188)),g.size+=S+188-A);break;case 0:_&&(A+=e[A]+1),k=this._pmtId=H(e,A);break;case k:_&&(A+=e[A]+1);var C=G(e,A,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);(h=C.avc)>0&&(c.pid=h),(m=C.audio)>0&&(u.pid=m,u.isAAC=C.isAAC),(y=C.id3)>0&&(d.pid=y),b&&!w&&(p.b.log("reparse from beginning"),b=!1,S=x-188),w=this.pmtParsed=!0;break;case 17:case 8191:break;default:b=!0}}else E++;E>0&&this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+E+" TS packet/s that do not start with 0x47"}),c.pesData=f,u.pesData=v,d.pesData=g;var R={audioTrack:u,avcTrack:c,id3Track:d,textTrack:this._txtTrack};return s&&this.extractRemainingSamples(R),R},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{audioTrack:this._audioTrack,avcTrack:this._avcTrack,textTrack:this._txtTrack,id3Track:this._id3Track},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,a=t.avcTrack,n=t.id3Track,i=a.pesData,s=r.pesData,o=n.pesData;i&&(e=z(i))?(this.parseAVCPES(e,!0),a.pesData=null):a.pesData=i,s&&(e=z(s))?(r.isAAC?this.parseAACPES(e):this.parseMPEGPES(e),r.pesData=null):(null!=s&&s.size&&p.b.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=s),o&&(e=z(o))?(this.parseID3PES(e),n.pesData=null):n.pesData=o},e.demuxSampleAes=function(t,e,r){var a=this.demux(t,r,!0,!this.config.progressive),n=this.sampleAes=new N(this.observer,this.config,e);return this.decrypt(a,n)},e.decrypt=function(t,e){return new Promise((function(r){var a=t.audioTrack,n=t.avcTrack;a.samples&&a.isAAC?e.decryptAacSamples(a.samples,0,(function(){n.samples?e.decryptAvcSamples(n.samples,0,0,(function(){r(t)})):r(t)})):n.samples&&e.decryptAvcSamples(n.samples,0,0,(function(){r(t)}))}))},e.destroy=function(){this._initPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(t,e){var r,a=this,n=this._avcTrack,i=this.parseAVCNALu(t.data),s=this.avcSample,l=!1;t.data=null,s&&i.length&&!n.audFound&&(Y(s,n),s=this.avcSample=V(!1,t.pts,t.dts,"")),i.forEach((function(e){switch(e.type){case 1:r=!0,s||(s=a.avcSample=V(!0,t.pts,t.dts,"")),s.frame=!0;var i=e.data;if(l&&i.length>4){var c=new B(i).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(s.key=!0)}break;case 5:r=!0,s||(s=a.avcSample=V(!0,t.pts,t.dts,"")),s.key=!0,s.frame=!0;break;case 6:r=!0;var u=new B(W(e.data));u.readUByte();for(var d=0,h=0,p=!1,f=0;!p&&u.bytesAvailable>1;){d=0;do{d+=f=u.readUByte()}while(255===f);h=0;do{h+=f=u.readUByte()}while(255===f);if(4===d&&0!==u.bytesAvailable){if(p=!0,181===u.readUByte()&&49===u.readUShort()&&1195456820===u.readUInt()&&3===u.readUByte()){for(var m=u.readUByte(),y=31&m,v=[m,u.readUByte()],g=0;g<y;g++)v.push(u.readUByte()),v.push(u.readUByte()),v.push(u.readUByte());q(a._txtTrack.samples,{type:3,pts:t.pts,bytes:v})}}else if(5===d&&0!==u.bytesAvailable){if(p=!0,h>16){for(var b=[],w=0;w<16;w++)b.push(u.readUByte().toString(16)),3!==w&&5!==w&&7!==w&&9!==w||b.push("-");for(var k=h-16,T=new Uint8Array(k),x=0;x<k;x++)T[x]=u.readUByte();q(a._txtTrack.samples,{pts:t.pts,payloadType:d,uuid:b.join(""),userData:Object(o.f)(T),userDataBytes:T})}}else if(h<u.bytesAvailable)for(var E=0;E<h;E++)u.readUByte()}break;case 7:if(r=!0,l=!0,!n.sps){var S=new B(e.data).readSPS();n.width=S.width,n.height=S.height,n.pixelRatio=S.pixelRatio,n.sps=[e.data],n.duration=a._duration;for(var _=e.data.subarray(1,4),L="avc1.",A=0;A<3;A++){var C=_[A].toString(16);C.length<2&&(C="0"+C),L+=C}n.codec=L}break;case 8:r=!0,n.pps||(n.pps=[e.data]);break;case 9:r=!1,n.audFound=!0,s&&Y(s,n),s=a.avcSample=V(!1,t.pts,t.dts,"");break;case 12:r=!1;break;default:r=!1,s&&(s.debug+="unknown NAL "+e.type+" ")}s&&r&&s.units.push(e)})),e&&s&&(Y(s,n),this.avcSample=null)},e.getLastNalUnit=function(){var t,e,r=this.avcSample;if(!r||0===r.units.length){var a=this._avcTrack.samples;r=a[a.length-1]}if(null!==(t=r)&&void 0!==t&&t.units){var n=r.units;e=n[n.length-1]}return e},e.parseAVCNALu=function(t){var e,r,a=t.byteLength,n=this._avcTrack,i=n.naluState||0,s=i,o=[],l=0,c=-1,u=0;for(-1===i&&(c=0,u=31&t[0],i=0,l=1);l<a;)if(e=t[l++],i)if(1!==i)if(e)if(1===e){if(c>=0){var d={data:t.subarray(c,l-i-1),type:u};o.push(d)}else{var h=this.getLastNalUnit();if(h&&(s&&l<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(r=l-i-1)>0)){var p=new Uint8Array(h.data.byteLength+r);p.set(h.data,0),p.set(t.subarray(0,r),h.data.byteLength),h.data=p,h.state=0}}l<a?(c=l,u=31&t[l],i=0):i=-1}else i=0;else i=3;else i=e?0:2;else i=e?0:1;if(c>=0&&i>=0){var f={data:t.subarray(c,a),type:u,state:i};o.push(f)}if(0===o.length){var m=this.getLastNalUnit();if(m){var y=new Uint8Array(m.data.byteLength+t.byteLength);y.set(m.data,0),y.set(t,m.data.byteLength),m.data=y}}return n.naluState=i,o},e.parseAACPES=function(t){var e,r,i,s,o,l=0,c=this._audioTrack,u=this.aacOverFlow,d=t.data;if(u){this.aacOverFlow=null;var h=u.sample.unit.byteLength,f=Math.min(u.missing,h),m=h-f;u.sample.unit.set(d.subarray(0,f),m),c.samples.push(u.sample),l=u.missing}for(e=l,r=d.length;e<r-1&&!v(d,e);e++);if(e===l||(e<r-1?(i="AAC PES did not start with ADTS header,offset:"+e,s=!1):(i="no ADTS header found in AAC PES",s=!0),p.b.warn("parsing error:"+i),this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:s,reason:i}),!s)){if(b(c,this.observer,d,e,this.audioCodec),void 0!==t.pts)o=t.pts;else{if(!u)return void p.b.warn("[tsdemuxer]: AAC PES unknown PTS");var y=w(c.samplerate);o=u.sample.pts+y}for(var g=0;e<r;){if(v(d,e)){if(e+5<r){var T=k(c,d,e,o,g);if(T){if(!T.missing){e+=T.length,g++;continue}this.aacOverFlow=T}}break}e++}}},e.parseMPEGPES=function(t){var e=t.data,r=e.length,a=0,n=0,i=t.pts;if(void 0!==i)for(;n<r;)if(M(e,n)){var s=D(this._audioTrack,e,n,i,a);if(!s)break;n+=s.length,a++}else n++;else p.b.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t){void 0!==t.pts?this._id3Track.samples.push(t):p.b.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function V(t,e,r,a){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:a,length:0}}function H(t,e){return(31&t[e+10])<<8|t[e+11]}function G(t,e,r,a){var n={audio:-1,avc:-1,id3:-1,isAAC:!0},i=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){var s=(31&t[e+1])<<8|t[e+2];switch(t[e]){case 207:if(!a){p.b.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===n.audio&&(n.audio=s);break;case 21:-1===n.id3&&(n.id3=s);break;case 219:if(!a){p.b.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===n.avc&&(n.avc=s);break;case 3:case 4:r?-1===n.audio&&(n.audio=s,n.isAAC=!1):p.b.log("MPEG audio found, not supported in this browser");break;case 36:p.b.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return n}function z(t){var e,r,a,n,i,s=0,o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((e=o[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var c=e[7];192&c&&(n=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&c?n-(i=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(p.b.warn(Math.round((n-i)/9e4)+"s delta between PTS and DTS, align them"),n=i):i=n);var u=(a=e[8])+9;if(t.size<=u)return null;t.size-=u;for(var d=new Uint8Array(t.size),h=0,f=o.length;h<f;h++){var m=(e=o[h]).byteLength;if(u){if(u>m){u-=m;continue}e=e.subarray(u),m-=u,u=0}d.set(e,s),s+=m}return r&&(r-=a+3),{data:d,pts:n,dts:i,len:r}}return null}function Y(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,a=r.length;if(!a)return void e.dropped++;var n=r[a-1];t.pts=n.pts,t.dts=n.dts}e.samples.push(t)}t.debug.length&&p.b.log(t.pts+"/"+t.dts+":"+t.debug)}function q(t,e){var r=t.length;if(r>0){if(e.pts>=t[r-1].pts)t.push(e);else for(var a=r-1;a>=0;a--)if(e.pts<t[a].pts){t.splice(a,0,e);break}}else t.push(e)}function W(t){for(var e=t.byteLength,r=[],a=1;a<e-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return t;var n=e-r.length,i=new Uint8Array(n),s=0;for(a=0;a<n;s++,a++)s===r[0]&&(s++,r.shift()),i[a]=t[s];return i}j.minProbeByteLength=188;var K=j;function X(t,e){return(X=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Z=function(t){var e,r;function a(){return t.apply(this,arguments)||this}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,X(e,r);var n=a.prototype;return n.resetInitSegment=function(e,r,a){t.prototype.resetInitSegment.call(this,e,r,a),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!1,samples:[],manifestCodec:e,duration:a,inputTimeScale:9e4,dropped:0}},a.probe=function(t){if(!t)return!1;for(var e=(o.b(t,0)||[]).length,r=t.length;e<r;e++)if(F(t,e))return p.b.log("MPEG Audio sync word found !"),!0;return!1},n.canParse=function(t,e){return function(t,e){return P(t,e)&&4<=t.length-e}(t,e)},n.appendFrame=function(t,e,r){if(null!==this.initPTS)return D(t,e,r,this.initPTS,this.frameIndex)},a}(h);Z.minProbeByteLength=4;var J=Z,Q=r(16),$=r(5),tt=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndDTS=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndDTS=null},e.resetNextTimestamp=function(){this.lastEndDTS=null},e.resetInitSegment=function(t,e,r){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(t),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(!t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var a=this.initData=Object(l.f)(t);e||(e=rt(a.audio,$.a.AUDIO)),r||(r=rt(a.video,$.a.VIDEO));var n={};a.audio&&a.video?n.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:a.audio?n.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:a.video?n.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:p.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n},e.remux=function(t,e,r,a,n){var i=this.initPTS,o=this.lastEndDTS,c={audio:void 0,video:void 0,text:a,id3:r,initSegment:void 0};Object(s.a)(o)||(o=this.lastEndDTS=n||0);var u=e.samples;if(!u||!u.length)return c;var d={initPTS:void 0,timescale:1},h=this.initData;if(h&&h.length||(this.generateInitSegment(u),h=this.initData),!h||!h.length)return p.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),c;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1),Object(s.a)(i)||(this.initPTS=d.initPTS=i=et(h,u,o));var f=Object(l.c)(u,h),m=o,y=f+m;Object(l.e)(h,u,i),f>0?this.lastEndDTS=y:(p.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var v=!!h.audio,g=!!h.video,b="";v&&(b+="audio"),g&&(b+="video");var w={data1:u,startPTS:m,startDTS:m,endPTS:y,endDTS:y,type:b,hasAudio:v,hasVideo:g,nb:1,dropped:0};return c.audio="audio"===w.type?w:void 0,c.video="audio"!==w.type?w:void 0,c.text=a,c.id3=r,c.initSegment=d,c},t}(),et=function(t,e,r){return Object(l.d)(t,e)-r};function rt(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===$.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var at,nt=tt,it=r(13);try{at=self.performance.now.bind(self.performance)}catch(t){p.b.debug("Unable to use Performance API on this environment"),at=self.Date.now}var st=[{demux:K,remux:Q.a},{demux:_,remux:nt},{demux:E,remux:Q.a},{demux:J,remux:Q.a}],ot=1024;st.forEach((function(t){var e=t.demux;ot=Math.max(ot,e.minProbeByteLength)}));var lt=function(){function t(t,e,r,a,n){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.cache=new it.a,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=a,this.id=n}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,r,a){var n=this,i=r.transmuxing;i.executeStart=at();var s=new Uint8Array(t),o=this.cache,c=this.config,u=this.currentTransmuxState,d=this.transmuxConfig;a&&(this.currentTransmuxState=a);var h=function(t,e){var r=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e),r}(s,e);if(h&&"AES-128"===h.method){var p=this.getDecrypter();if(!c.enableSoftwareAES)return this.decryptionPromise=p.webCryptoDecrypt(s,h.key.buffer,h.iv.buffer).then((function(t){var e=n.push(t,null,r);return n.decryptionPromise=null,e})),this.decryptionPromise;var f=p.softwareDecrypt(s,h.key.buffer,h.iv.buffer);if(!f)return i.executeEnd=at(),ct(r);s=new Uint8Array(f)}var m=a||u,y=m.contiguous,v=m.discontinuity,g=m.trackSwitch,b=m.accurateTimeOffset,w=m.timeOffset,k=m.initSegmentChange,T=d.audioCodec,x=d.videoCodec,E=d.defaultInitPts,S=d.duration,_=d.initSegmentData;if((v||g||k)&&this.resetInitSegment(_,T,x,S),(v||k)&&this.resetInitialTimestamp(E),y||this.resetContiguity(),this.needsProbing(s,v,g)){if(o.dataLength){var L=o.flush();s=Object(l.a)(L,s)}this.configureTransmuxer(s,d)}var A=this.transmux(s,h,w,b,r),C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,i.executeEnd=at(),A},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=at();var i=this.decrypter,s=this.cache,o=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return e.flush(t)}));var c=[],u=o.timeOffset;if(i){var d=i.flush();d&&c.push(this.push(d,null,t))}var h=s.dataLength;s.reset();var p=this.demuxer,f=this.remuxer;if(!p||!f)return h>=ot&&this.observer.emit(a.a.ERROR,a.a.ERROR,{type:n.b.MEDIA_ERROR,details:n.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),r.executeEnd=at(),[ct(t)];var m=p.flush(u);return ut(m)?m.then((function(r){return e.flushRemux(c,r,t),c})):(this.flushRemux(c,m,t),c)},e.flushRemux=function(t,e,r){var a=e.audioTrack,n=e.avcTrack,i=e.id3Track,s=e.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,c=o.timeOffset;p.b.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var u=this.remuxer.remux(a,n,i,s,c,l,!0,this.id);t.push({remuxResult:u,chunkMeta:r}),r.transmuxing.executeEnd=at()},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,r,a){var n=this.demuxer,i=this.remuxer;n&&i&&(n.resetInitSegment(e,r,a),i.resetInitSegment(t,e,r))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,r,a,n){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,a,n):this.transmuxUnencrypted(t,r,a,n)},e.transmuxUnencrypted=function(t,e,r,a){var n=this.demuxer.demux(t,e,!1,!this.config.progressive),i=n.audioTrack,s=n.avcTrack,o=n.id3Track,l=n.textTrack;return{remuxResult:this.remuxer.remux(i,s,o,l,e,r,!1,this.id),chunkMeta:a}},e.transmuxSampleAes=function(t,e,r,a,n){var i=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return{remuxResult:i.remuxer.remux(t.audioTrack,t.avcTrack,t.id3Track,t.textTrack,r,a,!1,i.id),chunkMeta:n}}))},e.configureTransmuxer=function(t,e){for(var r,a=this.config,n=this.observer,i=this.typeSupported,s=this.vendor,o=e.audioCodec,l=e.defaultInitPts,c=e.duration,u=e.initSegmentData,d=e.videoCodec,h=0,f=st.length;h<f;h++)if(st[h].demux.probe(t)){r=st[h];break}r||(p.b.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),r={demux:_,remux:nt});var m=this.demuxer,y=this.remuxer,v=r.remux,g=r.demux;y&&y instanceof v||(this.remuxer=new v(n,a,i,s)),m&&m instanceof g||(this.demuxer=new g(n,a,i),this.probe=g.probe),this.resetInitSegment(u,o,d,c),this.resetInitialTimestamp(l)},e.needsProbing=function(t,e,r){return!this.demuxer||!this.remuxer||e||r},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new i.a(this.observer,this.config)),t},t}(),ct=function(t){return{remuxResult:{},chunkMeta:t}};function ut(t){return"then"in t&&t.then instanceof Function}var dt=function(t,e,r,a,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=a,this.defaultInitPts=n},ht=function(t,e,r,a,n,i){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=a,this.timeOffset=n,this.initSegmentChange=i}},function(t,e,r){var a,n,i,s,o;a=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,n=/^([^\/?#]*)([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=o.normalizePath(i.path),o.buildURLFromParts(i)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var c={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(c.netLoc=s.netLoc,"/"!==i.path[0]))if(i.path){var u=s.path,d=u.substring(0,u.lastIndexOf("/")+1)+i.path;c.path=o.normalizePath(d)}else c.path=s.path,i.params||(c.params=s.params,i.query||(c.query=s.query));return null===c.path&&(c.path=r.alwaysNormalize?o.normalizePath(i.path):i.path),o.buildURLFromParts(c)},parseURL:function(t){var e=a.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(s,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),a=0,n=0;n<t.length;n++){var i=t[n];r.set(i,a),a+=i.length}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}()},function(t,e,r){"use strict";var a=Object.prototype.hasOwnProperty,n="~";function i(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,r,a,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new s(r,a||t,i),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),c.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)a.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,i=r.length,s=new Array(i);a<i;a++)s[a]=r[a].fn;return s},c.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,a,i,s){var o=n?n+t:t;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,a),!0;case 5:return u.fn.call(u.context,e,r,a,i),!0;case 6:return u.fn.call(u.context,e,r,a,i,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,r);break;case 4:u[c].fn.call(u[c].context,e,r,a);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},c.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,r,a){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return l(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||a&&!s.once||r&&s.context!==r||l(this,i);else{for(var o=0,c=[],u=s.length;o<u;o++)(s[o].fn!==e||a&&!s[o].once||r&&s[o].context!==r)&&c.push(s[o]);c.length?this._events[i]=1===c.length?c[0]:c:l(this,i)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&l(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c},function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var a=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),n=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),i=r(9),s=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),a=0;a<4;a++)r[a]=e.getUint32(4*a);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,a=r[0],n=r[1],i=r[2],s=r[3],o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=new Uint32Array(256),p=0,f=0,m=0;for(m=0;m<256;m++)h[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var y=f^f<<1^f<<2^f<<3^f<<4;y=y>>>8^255&y^99,t[p]=y,e[y]=p;var v=h[p],g=h[v],b=h[g],w=257*h[y]^16843008*y;a[p]=w<<24|w>>>8,n[p]=w<<16|w>>>16,i[p]=w<<8|w>>>24,s[p]=w,w=16843009*b^65537*g^257*v^16843008*p,l[y]=w<<24|w>>>8,c[y]=w<<16|w>>>16,u[y]=w<<8|w>>>24,d[y]=w,p?(p=v^h[h[h[b^v]]],f^=h[h[f]]):p=f=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,a=0;a<e.length&&r;)r=e[a]===this.key[a],a++;if(!r){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var i,s,o,l,c=this.ksRows=4*(n+6+1),u=this.keySchedule=new Uint32Array(c),d=this.invKeySchedule=new Uint32Array(c),h=this.sBox,p=this.rcon,f=this.invSubMix,m=f[0],y=f[1],v=f[2],g=f[3];for(i=0;i<c;i++)i<n?o=u[i]=e[i]:(l=o,i%n==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=p[i/n|0]<<24):n>6&&i%n==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),u[i]=o=(u[i-n]^l)>>>0);for(s=0;s<c;s++)i=c-s,l=3&s?u[i]:u[i-4],d[s]=s<4||i<=4?l:m[h[l>>>24]]^y[h[l>>>16&255]]^v[h[l>>>8&255]]^g[h[255&l]],d[s]=d[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var a,n,i,s,o,l,c,u,d,h,p,f,m,y,v=this.keySize+6,g=this.invKeySchedule,b=this.invSBox,w=this.invSubMix,k=w[0],T=w[1],x=w[2],E=w[3],S=this.uint8ArrayToUint32Array_(r),_=S[0],L=S[1],A=S[2],C=S[3],R=new Int32Array(t),I=new Int32Array(R.length),D=this.networkToHostOrderSwap;e<R.length;){for(d=D(R[e]),h=D(R[e+1]),p=D(R[e+2]),f=D(R[e+3]),o=d^g[0],l=f^g[1],c=p^g[2],u=h^g[3],m=4,y=1;y<v;y++)a=k[o>>>24]^T[l>>16&255]^x[c>>8&255]^E[255&u]^g[m],n=k[l>>>24]^T[c>>16&255]^x[u>>8&255]^E[255&o]^g[m+1],i=k[c>>>24]^T[u>>16&255]^x[o>>8&255]^E[255&l]^g[m+2],s=k[u>>>24]^T[o>>16&255]^x[l>>8&255]^E[255&c]^g[m+3],o=a,l=n,c=i,u=s,m+=4;a=b[o>>>24]<<24^b[l>>16&255]<<16^b[c>>8&255]<<8^b[255&u]^g[m],n=b[l>>>24]<<24^b[c>>16&255]<<16^b[u>>8&255]<<8^b[255&o]^g[m+1],i=b[c>>>24]<<24^b[u>>16&255]<<16^b[o>>8&255]<<8^b[255&l]^g[m+2],s=b[u>>>24]<<24^b[o>>16&255]<<16^b[l>>8&255]<<8^b[255&c]^g[m+3],I[e]=D(a^_),I[e+1]=D(s^L),I[e+2]=D(i^A),I[e+3]=D(n^C),_=d,L=h,A=p,C=f,e+=4}return I.buffer},t}(),o=r(1),l=r(6),c=function(){function t(t,e,r){var a=(void 0===r?{}:r).removePKCS7Padding,n=void 0===a||a;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=t,this.config=e,this.removePKCS7Padding=n,n)try{var i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(t){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var e=t.prototype;return e.destroy=function(){this.observer=null},e.isSync=function(){return this.config.enableSoftwareAES},e.flush=function(){var t=this.currentResult;if(t){var e,r,a,n=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(a=(r=(e=n).byteLength)&&new DataView(e.buffer).getUint8(r-1))?Object(i.a)(e,0,r-a):e:n}this.reset()},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,r,a){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(t),e,r);var n=this.flush();n&&a(n.buffer)}else this.webCryptoDecrypt(new Uint8Array(t),e,r).then(a)},e.softwareDecrypt=function(t,e,r){var a=this.currentIV,n=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(t=Object(l.a)(o,t),this.remainderData=null);var c=this.getValidChunk(t);if(!c.length)return null;a&&(r=a);var u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new s),u.expandKey(e);var d=n;return this.currentResult=u.decrypt(c.buffer,0,r),this.currentIV=Object(i.a)(c,-16).buffer,d||null},e.webCryptoDecrypt=function(t,e,r){var i=this,s=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new n(s,e)),this.fastAesKey.expandKey().then((function(e){return s?new a(s,r).decrypt(t.buffer,e):Promise.reject(new Error("web crypto not initialized"))})).catch((function(a){return i.onWebCryptoError(a,t,e,r)}))},e.onWebCryptoError=function(t,e,r,a){return o.b.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",t),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(e,r,a)},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=Object(i.a)(t,0,r),this.remainderData=Object(i.a)(t,r)),e},e.logOnce=function(t){this.logEnabled&&(o.b.log("[decrypter.ts]: "+t),this.logEnabled=!1)},t}()},function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return g}));var a=r(3),n=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),i=Math.pow(2,32)-1,s=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:a};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=i,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,l,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var e=8,r=arguments.length,a=new Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];for(var i=a.length,s=i;i--;)e+=a[i].byteLength;var o=new Uint8Array(e);for(o[0]=e>>24&255,o[1]=e>>16&255,o[2]=e>>8&255,o[3]=255&e,o.set(t,4),i=0,e=8;i<s;i++)o.set(a[i],e),e+=a[i].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var a=Math.floor(r/(i+1)),n=Math.floor(r%(i+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,a){return t.box(t.types.moof,t.mfhd(e),t.traf(a,r))},t.moov=function(e){for(var r=e.length,a=[];r--;)a[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(a).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,a=[];r--;)a[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(a))},t.mvhd=function(e,r){r*=e;var a=Math.floor(r/(i+1)),n=Math.floor(r%(i+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,a>>24,a>>16&255,a>>8&255,255&a,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,s)},t.sdtp=function(e){var r,a,n=e.samples||[],i=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)a=n[r].flags,i[r+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return t.box(t.types.sdtp,i)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,a,n,i=[],s=[];for(r=0;r<e.sps.length;r++)n=(a=e.sps[r]).byteLength,i.push(n>>>8&255),i.push(255&n),i=i.concat(Array.prototype.slice.call(a));for(r=0;r<e.pps.length;r++)n=(a=e.pps[r]).byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(a));var o=t.box(t.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(s))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,c>>8&255,255&c,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,a=e.duration*e.timescale,n=e.width,s=e.height,o=Math.floor(a/(i+1)),l=Math.floor(a%(i+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,s>>8&255,255&s,0,0]))},t.traf=function(e,r){var a=t.sdtp(e),n=e.id,s=Math.floor(r/(i+1)),o=Math.floor(r%(i+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,a.length+16+20+8+16+8+8),a)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var a,n,i,s,o,l,c=e.samples||[],u=c.length,d=12+16*u,h=new Uint8Array(d);for(r+=8+d,h.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),a=0;a<u;a++)i=(n=c[a]).duration,s=n.size,o=n.flags,l=n.cts,h.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*a);return t.box(t.types.trun,h)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),a=new Uint8Array(t.FTYP.byteLength+r.byteLength);return a.set(t.FTYP),a.set(r,t.FTYP.byteLength),a},t}();s.types=void 0,s.HDLR_TYPES=void 0,s.STTS=void 0,s.STSC=void 0,s.STCO=void 0,s.STSZ=void 0,s.VMHD=void 0,s.SMHD=void 0,s.STSD=void 0,s.FTYP=void 0,s.DINF=void 0;var o=s,l=r(0),c=r(2),u=r(1),d=r(4),h=r(8);function p(){return(p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var f=null,m=null,y=!1,v=function(){function t(t,e,r,a){if(void 0===a&&(a=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===f){var n=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);f=n?parseInt(n[1]):0}if(null===m){var i=navigator.userAgent.match(/Safari\/(\d+)/i);m=i?parseInt(i[1]):0}y=!!f&&f<75||!!m&&m<600}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){u.b.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){u.b.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){u.b.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var a=r.pts-t;return a<-4294967296?(e=!0,g(t,r.pts)):a>0?t:r.pts}),t[0].pts);return e&&u.b.debug("PTS rollover detected"),r},e.remux=function(t,e,r,a,n,i,s,o){var l,c,h,p,f,m,y=n,v=n,b=t.pid>-1,w=e.pid>-1,k=e.samples.length,T=t.samples.length>0,x=k>1;if((!b||T)&&(!w||x)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(t,e,n));var E=this.isVideoContiguous,S=-1;if(x&&(S=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!E&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,S>0){u.b.warn("[mp4-remuxer]: Dropped "+S+" out of "+k+" video samples due to a missing keyframe");var _=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(S),e.dropped+=S,v+=(e.samples[0].pts-_)/(e.timescale||9e4)}else-1===S&&(u.b.warn("[mp4-remuxer]: No keyframe found out of "+k+" video samples"),m=!1);if(this.ISGenerated){if(T&&x){var L=this.getVideoStartPts(e.samples),A=(g(t.samples[0].pts,L)-L)/e.inputTimeScale;y+=Math.max(0,A),v+=Math.max(0,-A)}if(T){if(t.samplerate||(u.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(t,e,n)),c=this.remuxAudio(t,y,this.isAudioContiguous,i,w||x||o===d.b.AUDIO?v:void 0),x){var C=c?c.endPTS-c.startPTS:0;e.inputTimeScale||(u.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(t,e,n)),l=this.remuxVideo(e,v,E,C)}}else x&&(l=this.remuxVideo(e,v,E,0));l&&(l.firstKeyFrame=S,l.independent=-1!==S)}}return this.ISGenerated&&(r.samples.length&&(f=this.remuxID3(r,n)),a.samples.length&&(p=this.remuxText(a,n))),{audio:c,video:l,initSegment:h,independent:m,text:p,id3:f}},e.generateIS=function(t,e,r){var n,i,s,l=t.samples,c=e.samples,u=this.typeSupported,d={},h=!Object(a.a)(this._initPTS),p="audio/mp4";if(h&&(n=i=1/0),t.config&&l.length&&(t.timescale=t.samplerate,t.isAAC||(u.mpeg?(p="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),d.audio={id:"audio",container:p,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array(0):o.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(s=t.inputTimeScale,n=i=l[0].pts-Math.round(s*r))),e.sps&&e.pps&&c.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:o.initSegment([e]),metadata:{width:e.width,height:e.height}},h)){s=e.inputTimeScale;var f=this.getVideoStartPts(c),m=Math.round(s*r);i=Math.min(i,g(c[0].dts,f)-m),n=Math.min(n,f-m)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=n,this._initDTS=i),{tracks:d,initPTS:n,timescale:s}},e.remuxVideo=function(t,e,r,a){var n,i,s,d=t.inputTimeScale,m=t.samples,v=[],w=m.length,k=this._initPTS,T=this.nextAvcDts,x=8,E=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,_=0,L=!1;r&&null!==T||(T=e*d-(m[0].pts-g(m[0].dts,m[0].pts)));for(var A=0;A<w;A++){var C=m[A];C.pts=g(C.pts-k,T),C.dts=g(C.dts-k,T),C.dts>C.pts&&(_=Math.max(Math.min(_,C.pts-C.dts),-18e3)),C.dts<m[A>0?A-1:A].dts&&(L=!0)}L&&m.sort((function(t,e){var r=t.dts-e.dts,a=t.pts-e.pts;return r||a})),i=m[0].dts,s=m[m.length-1].dts;var R=Math.round((s-i)/(w-1));if(_<0){if(_<-2*R){u.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(h.b)(-R,!0)+" ms");for(var I=_,D=0;D<w;D++)m[D].dts=I=Math.max(I,m[D].pts-R),m[D].pts=Math.max(I,m[D].pts)}else{u.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(h.b)(_,!0)+" ms to overcome this issue");for(var O=0;O<w;O++)m[O].dts=m[O].dts+_}i=m[0].dts}if(r){var P=i-T,M=P>R;if(M||P<-1){M?u.b.warn("AVC: "+Object(h.b)(P,!0)+" ms ("+P+"dts) hole between fragments detected, filling it"):u.b.warn("AVC: "+Object(h.b)(-P,!0)+" ms ("+P+"dts) overlapping between fragments detected"),i=T;var F=m[0].pts-P;m[0].dts=i,m[0].pts=F,u.b.log("Video: First PTS/DTS adjusted: "+Object(h.b)(F,!0)+"/"+Object(h.b)(i,!0)+", delta: "+Object(h.b)(P,!0)+" ms")}}y&&(i=Math.max(0,i));for(var B=0,N=0,U=0;U<w;U++){for(var j=m[U],V=j.units,H=V.length,G=0,z=0;z<H;z++)G+=V[z].data.length;N+=G,B+=H,j.length=G,j.dts=Math.max(j.dts,i),j.pts=Math.max(j.pts,j.dts,0),E=Math.min(j.pts,E),S=Math.max(j.pts,S)}s=m[w-1].dts;var Y,q=N+4*B+8;try{Y=new Uint8Array(q)}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:q,reason:"fail allocating video mdat "+q})}var W=new DataView(Y.buffer);W.setUint32(0,q),Y.set(o.types.mdat,4);for(var K=0;K<w;K++){for(var X=m[K],Z=X.units,J=0,Q=0,$=Z.length;Q<$;Q++){var tt=Z[Q],et=tt.data,rt=tt.data.byteLength;W.setUint32(x,rt),x+=4,Y.set(et,x),x+=rt,J+=4+rt}if(K<w-1)n=m[K+1].dts-X.dts;else{var at=this.config,nt=X.dts-m[K>0?K-1:K].dts;if(at.stretchShortVideoTrack&&null!==this.nextAudioPts){var it=Math.floor(at.maxBufferHole*d),st=(a?E+a*d:this.nextAudioPts)-X.pts;st>it?((n=st-nt)<0&&(n=nt),u.b.log("[mp4-remuxer]: It is approximately "+st/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=nt}else n=nt}var ot=Math.round(X.pts-X.dts);v.push(new b(X.key,n,J,ot))}if(v.length&&f&&f<70){var lt=v[0].flags;lt.dependsOn=2,lt.isNonSync=0}this.nextAvcDts=T=s+n,this.isVideoContiguous=!0;var ct={data1:o.moof(t.sequenceNumber++,i,p({},t,{samples:v})),data2:Y,startPTS:E/d,endPTS:(S+n)/d,startDTS:i/d,endDTS:T/d,type:"video",hasAudio:!1,hasVideo:!0,nb:v.length,dropped:t.dropped};return t.samples=[],t.dropped=0,ct},e.remuxAudio=function(t,e,r,a,i){var s=t.inputTimeScale,d=s/(t.samplerate?t.samplerate:s),h=t.isAAC?1024:1152,f=h*d,m=this._initPTS,y=!t.isAAC&&this.typeSupported.mpeg,v=[],w=t.samples,k=y?0:8,T=this.nextAudioPts||-1,x=e*s;if(this.isAudioContiguous=r=r||w.length&&T>0&&(a&&Math.abs(x-T)<9e3||Math.abs(g(w[0].pts-m,x)-T)<20*f),w.forEach((function(t){t.pts=g(t.pts-m,x)})),!r||T<0){if(!(w=w.filter((function(t){return t.pts>=0}))).length)return;T=0===i?0:a?Math.max(0,x):w[0].pts}if(t.isAAC)for(var E=void 0!==i,S=this.config.maxAudioFramesDrift,_=0,L=T;_<w.length;_++){var A=w[_],C=A.pts,R=C-L,I=Math.abs(1e3*R/s);if(R<=-S*f&&E)0===_&&(u.b.warn("Audio frame @ "+(C/s).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/s)+" ms."),this.nextAudioPts=T=L=C);else if(R>=S*f&&I<1e4&&E){var D=Math.round(R/f);(L=C-D*f)<0&&(D--,L+=f),0===_&&(this.nextAudioPts=T=L),u.b.warn("[mp4-remuxer]: Injecting "+D+" audio frame @ "+(L/s).toFixed(3)+"s due to "+Math.round(1e3*R/s)+" ms gap.");for(var O=0;O<D;O++){var P=Math.max(L,0),M=n.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);M||(u.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),M=A.unit.subarray()),w.splice(_,0,{unit:M,pts:P}),L+=f,_++}}A.pts=L,L+=f}for(var F,B=null,N=null,U=0,j=w.length;j--;)U+=w[j].unit.byteLength;for(var V=0,H=w.length;V<H;V++){var G=w[V],z=G.unit,Y=G.pts;if(null!==N)v[V-1].duration=Math.round((Y-N)/d);else{if(r&&t.isAAC&&(Y=T),B=Y,!(U>0))return;U+=k;try{F=new Uint8Array(U)}catch(t){return void this.observer.emit(l.a.ERROR,l.a.ERROR,{type:c.b.MUX_ERROR,details:c.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}y||(new DataView(F.buffer).setUint32(0,U),F.set(o.types.mdat,4))}F.set(z,k);var q=z.byteLength;k+=q,v.push(new b(!0,h,q,0)),N=Y}var W=v.length;if(W){var K=v[v.length-1];this.nextAudioPts=T=N+d*K.duration;var X=y?new Uint8Array(0):o.moof(t.sequenceNumber++,B/d,p({},t,{samples:v}));t.samples=[];var Z=B/s,J=T/s,Q={data1:X,data2:F,startPTS:Z,endPTS:J,startDTS:Z,endDTS:J,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.isAudioContiguous=!0,Q}},e.remuxEmptyAudio=function(t,e,r,a){var i=t.inputTimeScale,s=i/(t.samplerate?t.samplerate:i),o=this.nextAudioPts,l=(null!==o?o:a.startDTS*i)+this._initDTS,c=a.endDTS*i+this._initDTS,d=1024*s,h=Math.ceil((c-l)/d),p=n.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(u.b.warn("[mp4-remuxer]: remux empty Audio"),p){for(var f=[],m=0;m<h;m++){var y=l+m*d;f.push({unit:p,pts:y,dts:y})}return t.samples=f,this.remuxAudio(t,e,r,!1)}u.b.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e.remuxID3=function(t,e){var r=t.samples.length;if(r){for(var a=t.inputTimeScale,n=this._initPTS,i=this._initDTS,s=0;s<r;s++){var o=t.samples[s];o.pts=g(o.pts-n,e*a)/a,o.dts=g(o.dts-i,e*a)/a}var l=t.samples;return t.samples=[],{samples:l}}},e.remuxText=function(t,e){var r=t.samples.length;if(r){for(var a=t.inputTimeScale,n=this._initPTS,i=0;i<r;i++){var s=t.samples[i];s.pts=g(s.pts-n,e*a)/a}t.samples.sort((function(t,e){return t.pts-e.pts}));var o=t.samples;return t.samples=[],{samples:o}}},t}();function g(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}var b=function(t,e,r,a){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=a,this.flags=new w(t)},w=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1}},function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var a=r(11);function n(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var i=function(){function t(t,e){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=e?Object(a.buildAbsoluteURL)(t,e,{alwaysNormalize:!0}):t}var e,r;return t.fromURL=function(e,r){return new t(e,r)},t.fromURI=function(e){return new t(e)},e=t,(r=[{key:"uri",get:function(){return this._uri}}])&&n(e.prototype,r),t}()},function(t,e,r){function a(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.i=function(t){return t},r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var a=r(r.s=ENTRY_MODULE);return a.default||a}function n(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function i(t,e,a){var i={};i[a]=[];var s=e.toString(),o=s.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!o)return i;for(var l,c=o[1],u=new RegExp("(\\\\n|\\W)"+n(c)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");l=u.exec(s);)"dll-reference"!==l[3]&&i[a].push(l[3]);for(u=new RegExp("\\("+n(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");l=u.exec(s);)t[l[2]]||(i[a].push(l[1]),t[l[2]]=r(l[1]).m),i[l[2]]=i[l[2]]||[],i[l[2]].push(l[4]);for(var d,h=Object.keys(i),p=0;p<h.length;p++)for(var f=0;f<i[h[p]].length;f++)d=i[h[p]][f],isNaN(1*d)||(i[h[p]][f]=1*i[h[p]][f]);return i}function s(t){return Object.keys(t).reduce((function(e,r){return e||t[r].length>0}),!1)}t.exports=function(t,e){e=e||{};var n={main:r.m},o=e.all?{main:Object.keys(n.main)}:function(t,e){for(var r={main:[e]},a={main:[]},n={main:{}};s(r);)for(var o=Object.keys(r),l=0;l<o.length;l++){var c=o[l],u=r[c].pop();if(n[c]=n[c]||{},!n[c][u]&&t[c][u]){n[c][u]=!0,a[c]=a[c]||[],a[c].push(u);for(var d=i(t,t[c][u],c),h=Object.keys(d),p=0;p<h.length;p++)r[h[p]]=r[h[p]]||[],r[h[p]]=r[h[p]].concat(d[h[p]])}}return a}(n,t),l="";Object.keys(o).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;o[t][e];)e++;o[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",l=l+"var "+t+" = ("+a.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o[t].map((function(e){return JSON.stringify(e)+": "+n[t][e].toString()})).join(",")+"});\n"})),l=l+"new (("+a.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o.main.map((function(t){return JSON.stringify(t)+": "+n.main[t].toString()})).join(",")+"}))(self);";var c=new window.Blob([l],{type:"text/javascript"});if(e.bare)return c;var u=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),d=new window.Worker(u);return d.objectURL=u,d}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return o}));var a=r(10),n=r(0),i=r(1),s=r(14);function o(t){var e=new s.EventEmitter,r=function(e,r){t.postMessage({event:e,data:r})};e.on(n.a.FRAG_DECRYPTED,r),e.on(n.a.ERROR,r),t.addEventListener("message",(function(n){var s=n.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);t.transmuxer=new a.c(e,s.typeSupported,o,s.vendor,s.id),Object(i.a)(o.debug),r("init",null);break;case"configure":t.transmuxer.configure(s.config);break;case"demux":var c=t.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state);Object(a.d)(c)?c.then((function(e){l(t,e)})):l(t,c);break;case"flush":var d=s.chunkMeta,h=t.transmuxer.flush(d);Object(a.d)(h)?h.then((function(e){u(t,e,d)})):u(t,h,d)}}))}function l(t,e){if((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment){var r,a=[],n=e.remuxResult,i=n.audio,s=n.video;i&&c(a,i),s&&c(a,s),t.postMessage({event:"transmuxComplete",data:e},a)}}function c(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function u(t,e,r){e.forEach((function(e){l(t,e)})),t.postMessage({event:"flush",data:r})}},function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return ea}));var a=r(11),n=r(3),i=r(0),s=r(2),o=r(1),l=r(6),c=r(5);function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var d=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.url=t}var e,r;return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},e=t,(r=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&Object(n.a)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!==(t=this.fragments)&&void 0!==t&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!==(t=this.partList)&&void 0!==t&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&u(e.prototype,r),t}(),h=r(17),p=/^(\d+)x(\d+)$/,f=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,m=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),a=0;a<e.length/2;a++)r[a]=parseInt(e.slice(2*a,2*a+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=p.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(f.lastIndex=0;null!==(e=f.exec(t));){var a=e[2];0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1&&(a=a.slice(1,-1)),r[e[1]]=a}return r},t}(),y={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function v(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var g=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,b=/#EXT-X-MEDIA:(.*)/g,w=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),k=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),T=/\.(mp4|m4s|m4v|m4a)$/i,x=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var a=t[r];if(a.id===e)return a}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return(r+=parseInt(e.shift()).toString(16))+("000"+parseInt(e.shift()).toString(16)).substr(-4)}return t},t.resolve=function(t,e){return a.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var a,n=[],i={},s=!1;for(g.lastIndex=0;null!=(a=g.exec(e));)if(a[1]){var o=new m(a[1]),l={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:t.resolve(a[2],r)},c=o.decimalResolution("RESOLUTION");c&&(l.width=c.width,l.height=c.height),E((o.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),l),l.videoCodec&&-1!==l.videoCodec.indexOf("avc1")&&(l.videoCodec=t.convertAVC1ToAVCOTI(l.videoCodec)),n.push(l)}else if(a[3]){var u=new m(a[3]);u["DATA-ID"]&&(s=!0,i[u["DATA-ID"]]=u)}return{levels:n,sessionData:s?i:null}},t.parseMasterPlaylistMedia=function(e,r,a,n){var i;void 0===n&&(n=[]);var s=[],o=0;for(b.lastIndex=0;null!==(i=b.exec(e));){var l=new m(i[1]);if(l.TYPE===a){var c={attrs:l,bitrate:0,id:o++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:a,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?t.resolve(l.URI,r):""};if(n.length){var u=t.findGroup(n,c.groupId)||n[0];S(c,u,"audioCodec"),S(c,u,"textCodec")}s.push(c)}}return s},t.parseLevelPlaylist=function(t,e,r,i,s){var l,u,p,f=new d(e),y=f.fragments,v=null,g=0,b=0,x=0,E=0,S=null,L=new c.b(i,e),A=-1,C=!1;for(w.lastIndex=0,f.m3u8=t;null!==(l=w.exec(t));){C&&(C=!1,(L=new c.b(i,e)).start=x,L.sn=g,L.cc=E,L.level=r,v&&(L.initSegment=v,L.rawProgramDateTime=v.rawProgramDateTime));var R=l[1];if(R){L.duration=parseFloat(R);var I=(" "+l[2]).slice(1);L.title=I||null,L.tagList.push(I?["INF",R,I]:["INF",R])}else if(l[3])Object(n.a)(L.duration)&&(L.start=x,p&&(L.levelkey=p),L.sn=g,L.level=r,L.cc=E,L.urlId=s,y.push(L),L.relurl=(" "+l[3]).slice(1),_(L,S),S=L,x+=L.duration,g++,b=0,C=!0);else if(l[4]){var D=(" "+l[4]).slice(1);S?L.setByteRange(D,S):L.setByteRange(D)}else if(l[5])L.rawProgramDateTime=(" "+l[5]).slice(1),L.tagList.push(["PROGRAM-DATE-TIME",L.rawProgramDateTime]),-1===A&&(A=y.length);else{if(!(l=l[0].match(k))){o.b.warn("No matches on slow regex match for level playlist!");continue}for(u=1;u<l.length&&void 0===l[u];u++);var O=(" "+l[u]).slice(1),P=(" "+l[u+1]).slice(1),M=l[u+2]?(" "+l[u+2]).slice(1):"";switch(O){case"PLAYLIST-TYPE":f.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":g=f.startSN=parseInt(P);break;case"SKIP":var F=new m(P),B=F.decimalInteger("SKIPPED-SEGMENTS");if(Object(n.a)(B)){f.skippedSegments=B;for(var N=B;N--;)y.unshift(null);g+=B}var U=F.enumeratedString("RECENTLY-REMOVED-DATERANGES");U&&(f.recentlyRemovedDateranges=U.split("\t"));break;case"TARGETDURATION":f.targetduration=parseFloat(P);break;case"VERSION":f.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"#":(P||M)&&L.tagList.push(M?[P,M]:[P]);break;case"DIS":E++;case"GAP":L.tagList.push([O]);break;case"BITRATE":L.tagList.push([O,P]);break;case"DISCONTINUITY-SEQ":E=parseInt(P);break;case"KEY":var j,V=new m(P),H=V.enumeratedString("METHOD"),G=V.URI,z=V.hexadecimalInteger("IV"),Y=V.enumeratedString("KEYFORMATVERSIONS"),q=V.enumeratedString("KEYID"),W=null!=(j=V.enumeratedString("KEYFORMAT"))?j:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(W)>-1){o.b.warn("Keyformat "+W+" is not supported from the manifest");continue}if("identity"!==W)continue;H&&(p=h.a.fromURL(e,G),G&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(H)>=0&&(p.method=H,p.keyFormat=W,q&&(p.keyID=q),Y&&(p.keyFormatVersions=Y),p.iv=z));break;case"START":var K=new m(P).decimalFloatingPoint("TIME-OFFSET");Object(n.a)(K)&&(f.startTimeOffset=K);break;case"MAP":var X=new m(P);L.relurl=X.URI,X.BYTERANGE&&L.setByteRange(X.BYTERANGE),L.level=r,L.sn="initSegment",p&&(L.levelkey=p),L.initSegment=null,v=L,C=!0;break;case"SERVER-CONTROL":var Z=new m(P);f.canBlockReload=Z.bool("CAN-BLOCK-RELOAD"),f.canSkipUntil=Z.optionalFloat("CAN-SKIP-UNTIL",0),f.canSkipDateRanges=f.canSkipUntil>0&&Z.bool("CAN-SKIP-DATERANGES"),f.partHoldBack=Z.optionalFloat("PART-HOLD-BACK",0),f.holdBack=Z.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var J=new m(P);f.partTarget=J.decimalFloatingPoint("PART-TARGET");break;case"PART":var Q=f.partList;Q||(Q=f.partList=[]);var $=b>0?Q[Q.length-1]:void 0,tt=b++,et=new c.c(new m(P),L,e,tt,$);Q.push(et),L.duration+=et.duration;break;case"PRELOAD-HINT":var rt=new m(P);f.preloadHint=rt;break;case"RENDITION-REPORT":var at=new m(P);f.renditionReports=f.renditionReports||[],f.renditionReports.push(at);break;default:o.b.warn("line parsed but not handled: "+l)}}}S&&!S.relurl?(y.pop(),x-=S.duration,f.partList&&(f.fragmentHint=S)):f.partList&&(_(L,S),L.cc=E,f.fragmentHint=L);var nt=y.length,it=y[0],st=y[nt-1];if((x+=f.skippedSegments*f.targetduration)>0&&nt&&st){f.averagetargetduration=x/nt;var ot=st.sn;f.endSN="initSegment"!==ot?ot:0,it&&(f.startCC=it.cc,it.initSegment||f.fragments.every((function(t){return t.relurl&&(e=t.relurl,T.test(null!=(r=null===(n=a.parseURL(e))||void 0===n?void 0:n.path)?r:""));var e,r,n}))&&(o.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(L=new c.b(i,e)).relurl=st.relurl,L.level=r,L.sn="initSegment",it.initSegment=L,f.needSidxRanges=!0))}else f.endSN=0,f.startCC=0;return f.fragmentHint&&(x+=f.fragmentHint.duration),f.totalduration=x,f.endCC=E,A>0&&function(t,e){for(var r=t[e],a=e;a--;){var n=t[a];if(!n)return;n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(y,A),f},t}();function E(t,e){["video","audio","text"].forEach((function(r){var a=t.filter((function(t){return function(t,e){var r=y[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(a.length){var n=a.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=n.length>0?n[0]:a[0],t=t.filter((function(t){return-1===a.indexOf(t)}))}})),e.unknownCodecs=t}function S(t,e,r){var a=e[r];a&&(t[r]=a)}function _(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(n.a)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var L=r(4);function A(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}var C=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.hls=t,this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(i.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(i.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,a=e.loader,n=new(r||a)(e);return t.loader=n,this.loaders[t.type]=n,n},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){var r=e.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:L.a.MANIFEST,url:r,deliveryDirectives:null})},e.onLevelLoading=function(t,e){var r=e.id,a=e.level,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:null,level:a,responseType:"text",type:L.a.LEVEL,url:n,deliveryDirectives:i})},e.onAudioTrackLoading=function(t,e){var r=e.id,a=e.groupId,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:a,level:null,responseType:"text",type:L.a.AUDIO_TRACK,url:n,deliveryDirectives:i})},e.onSubtitleTrackLoading=function(t,e){var r=e.id,a=e.groupId,n=e.url,i=e.deliveryDirectives;this.load({id:r,groupId:a,level:null,responseType:"text",type:L.a.SUBTITLE_TRACK,url:n,deliveryDirectives:i})},e.load=function(t){var e,r,a,n,i,s,l=this.hls.config,c=this.getInternalLoader(t);if(c){var u=c.context;if(u&&u.url===t.url)return void o.b.trace("[playlist-loader]: playlist request ongoing");o.b.log("[playlist-loader]: aborting previous loader for type: "+t.type),c.abort()}switch(t.type){case L.a.MANIFEST:r=l.manifestLoadingMaxRetry,a=l.manifestLoadingTimeOut,n=l.manifestLoadingRetryDelay,i=l.manifestLoadingMaxRetryTimeout;break;case L.a.LEVEL:case L.a.AUDIO_TRACK:case L.a.SUBTITLE_TRACK:r=0,a=l.levelLoadingTimeOut;break;default:r=l.levelLoadingMaxRetry,a=l.levelLoadingTimeOut,n=l.levelLoadingRetryDelay,i=l.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(t),null!==(e=t.deliveryDirectives)&&void 0!==e&&e.part&&(t.type===L.a.LEVEL&&null!==t.level?s=this.hls.levels[t.level].details:t.type===L.a.AUDIO_TRACK&&null!==t.id?s=this.hls.audioTracks[t.id].details:t.type===L.a.SUBTITLE_TRACK&&null!==t.id&&(s=this.hls.subtitleTracks[t.id].details),s)){var d=s.partTarget,h=s.targetduration;d&&h&&(a=Math.min(1e3*Math.max(3*d,.8*h),a))}var p={timeout:a,maxRetry:r,retryDelay:n,maxRetryDelay:i,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(t,p,f)},e.loadsuccess=function(t,e,r,a){if(void 0===a&&(a=null),r.isSidxRequest)return this.handleSidxRequest(t,r),void this.handlePlaylistLoaded(t,e,r,a);this.resetInternalLoader(r.type);var n=t.data;0===n.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(t,e,r,a):this.handleMasterPlaylist(t,e,r,a)):this.handleManifestParsingError(t,r,"no EXTM3U delimiter",a)},e.loaderror=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!1,t)},e.loadtimeout=function(t,e,r){void 0===r&&(r=null),this.handleNetworkError(e,r,!0)},e.handleMasterPlaylist=function(t,e,r,a){var n=this.hls,s=t.data,l=A(t,r),c=x.parseMasterPlaylist(s,l),u=c.levels,d=c.sessionData;if(u.length){var h=u.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),p=u.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),f=x.parseMasterPlaylistMedia(s,l,"AUDIO",h),y=x.parseMasterPlaylistMedia(s,l,"SUBTITLES",p),v=x.parseMasterPlaylistMedia(s,l,"CLOSED-CAPTIONS");f.length&&(f.some((function(t){return!t.url}))||!u[0].audioCodec||u[0].attrs.AUDIO||(o.b.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new m({}),bitrate:0,url:""}))),n.trigger(i.a.MANIFEST_LOADED,{levels:u,audioTracks:f,subtitles:y,captions:v,url:l,stats:e,networkDetails:a,sessionData:d})}else this.handleManifestParsingError(t,r,"no level found in manifest",a)},e.handleTrackOrLevelPlaylist=function(t,e,r,a){var o=this.hls,l=r.id,c=r.level,u=r.type,d=A(t,r),h=Object(n.a)(l)?l:0,p=Object(n.a)(c)?c:h,f=function(t){switch(t.type){case L.a.AUDIO_TRACK:return L.b.AUDIO;case L.a.SUBTITLE_TRACK:return L.b.SUBTITLE;default:return L.b.MAIN}}(r),y=x.parseLevelPlaylist(t.data,d,p,f,h);if(y.fragments.length){if(u===L.a.MANIFEST){var v={attrs:new m({}),bitrate:0,details:y,name:"",url:d};o.trigger(i.a.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:e,networkDetails:a,sessionData:null})}if(e.parsing.end=performance.now(),y.needSidxRanges){var g,b=null===(g=y.fragments[0].initSegment)||void 0===g?void 0:g.url;this.load({url:b,isSidxRequest:!0,type:u,level:c,levelDetails:y,id:l,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else r.levelDetails=y,this.handlePlaylistLoaded(t,e,r,a)}else o.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.LEVEL_EMPTY_ERROR,fatal:!1,url:d,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0})},e.handleSidxRequest=function(t,e){var r=Object(l.g)(new Uint8Array(t.data));if(r){var a=r.references,n=e.levelDetails;a.forEach((function(t,e){var a=t.info,i=n.fragments[e];0===i.byteRange.length&&i.setByteRange(String(1+a.end-a.start)+"@"+String(a.start)),i.initSegment&&i.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}))}},e.handleManifestParsingError=function(t,e,r,a){this.hls.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.MANIFEST_PARSING_ERROR,fatal:e.type===L.a.MANIFEST,url:t.url,reason:r,response:t,context:e,networkDetails:a})},e.handleNetworkError=function(t,e,r,a){void 0===r&&(r=!1),o.b.warn("[playlist-loader]: A network "+(r?"timeout":"error")+" occurred while loading "+t.type+" level: "+t.level+" id: "+t.id+' group-id: "'+t.groupId+'"');var n=s.a.UNKNOWN,l=!1,c=this.getInternalLoader(t);switch(t.type){case L.a.MANIFEST:n=r?s.a.MANIFEST_LOAD_TIMEOUT:s.a.MANIFEST_LOAD_ERROR,l=!0;break;case L.a.LEVEL:n=r?s.a.LEVEL_LOAD_TIMEOUT:s.a.LEVEL_LOAD_ERROR,l=!1;break;case L.a.AUDIO_TRACK:n=r?s.a.AUDIO_TRACK_LOAD_TIMEOUT:s.a.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case L.a.SUBTITLE_TRACK:n=r?s.a.SUBTITLE_TRACK_LOAD_TIMEOUT:s.a.SUBTITLE_LOAD_ERROR,l=!1}c&&this.resetInternalLoader(t.type);var u={type:s.b.NETWORK_ERROR,details:n,fatal:l,url:t.url,loader:c,context:t,networkDetails:e};a&&(u.response=a),this.hls.trigger(i.a.ERROR,u)},e.handlePlaylistLoaded=function(t,e,r,a){var n=r.type,s=r.level,o=r.id,l=r.groupId,c=r.loader,u=r.levelDetails,d=r.deliveryDirectives;if(null!=u&&u.targetduration){if(c)switch(u.live&&(c.getCacheAge&&(u.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(u.ageHeader)||(u.ageHeader=0)),n){case L.a.MANIFEST:case L.a.LEVEL:this.hls.trigger(i.a.LEVEL_LOADED,{details:u,level:s||0,id:o||0,stats:e,networkDetails:a,deliveryDirectives:d});break;case L.a.AUDIO_TRACK:this.hls.trigger(i.a.AUDIO_TRACK_LOADED,{details:u,id:o||0,groupId:l||"",stats:e,networkDetails:a,deliveryDirectives:d});break;case L.a.SUBTITLE_TRACK:this.hls.trigger(i.a.SUBTITLE_TRACK_LOADED,{details:u,id:o||0,groupId:l||"",stats:e,networkDetails:a,deliveryDirectives:d})}}else this.handleManifestParsingError(t,r,"invalid target duration",a)},t}(),R=function(){function t(t){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){this.hls.on(i.a.KEY_LOADING,this.onKeyLoading,this)},e._unregisterListeners=function(){this.hls.off(i.a.KEY_LOADING,this.onKeyLoading)},e.destroy=function(){for(var t in this._unregisterListeners(),this.loaders){var e=this.loaders[t];e&&e.destroy()}this.loaders={}},e.onKeyLoading=function(t,e){var r=e.frag,a=r.type,n=this.loaders[a];if(r.decryptdata){var s=r.decryptdata.uri;if(s!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(n&&(o.b.warn("abort previous key loader for type:"+a),n.abort()),!s)return void o.b.warn("key uri is falsy");var c=l.loader,u=r.loader=this.loaders[a]=new c(l);this.decrypturl=s,this.decryptkey=null;var d={url:s,frag:r,responseType:"arraybuffer"},h={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},p={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};u.load(d,h,p)}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(i.a.KEY_LOADED,{frag:r}))}else o.b.warn("Missing decryption data on fragment in onKeyLoading")},e.loadsuccess=function(t,e,r){var a=r.frag;a.decryptdata?(this.decryptkey=a.decryptdata.key=new Uint8Array(t.data),a.loader=null,delete this.loaders[a.type],this.hls.trigger(i.a.KEY_LOADED,{frag:a})):o.b.error("after key load, decryptdata unset")},e.loaderror=function(t,e){var r=e.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_ERROR,fatal:!1,frag:r,response:t})},e.loadtimeout=function(t,e){var r=e.frag,a=r.loader;a&&a.abort(),delete this.loaders[r.type],this.hls.trigger(i.a.ERROR,{type:s.b.NETWORK_ERROR,details:s.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}();function I(t,e){var r;try{r=new Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function D(t,e){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){o.b.debug("[texttrack-utils]: "+r);var a=new self.TextTrackCue(e.startTime,e.endTime,e.text);a.id=e.id,t.addCue(a)}"disabled"===r&&(t.mode=r)}function O(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e)}function P(t,e,r){var a=t.mode;if("disabled"===a&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var n=function(t,e,r){var a=[],n=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return-1;for(var a=0,n=r;a<=n;){var i=Math.floor((n+a)/2);if(e<t[i].startTime)n=i-1;else{if(!(e>t[i].startTime&&a<r))return i;a=i+1}}return t[a].startTime-e<e-t[n].startTime?a:n}(t,e);if(n>-1)for(var i=n,s=t.length;i<s;i++){var o=t[i];if(o.startTime>=e&&o.endTime<=r)a.push(o);else if(o.startTime>r)return a}return a}(t.cues,e,r),i=0;i<n.length;i++)t.removeCue(n[i]);"disabled"===a&&(t.mode=a)}var M=r(7),F=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners()},e._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(O(this.id3Track),this.id3Track=null,this.media=null)},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return I(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=e.frag,a=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=self.WebKitDataCue||self.VTTCue||self.TextTrackCue,i=0;i<a.length;i++){var s=M.c(a[i].data);if(s){var o=a[i].pts,l=i<a.length-1?a[i+1].pts:r.end;l-o<=0&&(l=o+.25);for(var c=0;c<s.length;c++){var u=s[c];if(!M.e(u)){var d=new n(o,l,"");d.value=u,this.id3Track.addCue(d)}}}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset,n=e.type;if(!n||"audio"===n){var i=this.id3Track;i&&P(i,r,a)}},t}();function B(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var N,U=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e,r,a=t.prototype;return a.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},a.registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.a.ERROR,this.onError,this)},a.unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.a.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.a.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.a.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.a.ERROR,this.onError)},a.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},a.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},a.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},a.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},a.onError=function(t,e){e.details===s.a.BUFFER_STALLED_ERROR&&(this.stallCount++,o.b.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},a.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var a=this.config,n=a.lowLatencyMode,i=a.maxLiveSyncPlaybackRate;if(n&&1!==i){var s=this.targetLatency;if(null!==s){var o=r-s,l=o<Math.min(this.maxLatency,s+e.targetduration);if(e.live&&l&&o>.05&&this.forwardBufferLength>1){var c=Math.min(2,Math.max(1,i)),u=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;t.playbackRate=Math.min(c,Math.max(1,u))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},a.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},a.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},e=t,(r=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,a=t.targetduration,n=this.config,i=n.liveSyncDuration,s=n.liveSyncDurationCount,o=n.lowLatencyMode,l=this.hls.userConfig,c=o&&r||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===c)&&(c=void 0!==i?i:s*a);var u=a;return c+Math.min(1*this.stallCount,u)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var a=r.edge,n=t-e-this.edgeStalled,i=a-r.totalduration,s=a-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(i,n),s)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return r?t.buffered.end(r-1):e.edge-this.currentTime}}])&&B(e.prototype,r),t}();function j(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}!function(t){t.No="",t.Yes="YES",t.v2="v2"}(N||(N={}));var V=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.toString()},t}(),H=function(){function t(t){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this.attrs=t.attrs,this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}var e,r;return e=t,(r=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.details=void 0,this._urlId=e)}}])&&j(e.prototype,r),t}();function G(t,e,r){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(r);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(r)}}function z(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}function Y(t,e){var r=e.startPTS;if(Object(n.a)(r)){var a,i=0;e.sn>t.sn?(i=r-t.start,a=t):(i=t.start-r,a=e),a.duration!==i&&(a.duration=i)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function q(t,e,r,a,i,s){a-r<=0&&(o.b.warn("Fragment should have a positive duration",e),a=r+e.duration,s=i+e.duration);var l=r,c=a,u=e.startPTS,d=e.endPTS;if(Object(n.a)(u)){var h=Math.abs(u-r);Object(n.a)(e.deltaPTS)?e.deltaPTS=Math.max(h,e.deltaPTS):e.deltaPTS=h,l=Math.max(r,u),r=Math.min(r,u),i=Math.min(i,e.startDTS),c=Math.min(a,d),a=Math.max(a,d),s=Math.max(s,e.endDTS)}e.duration=a-r;var p=r-e.start;e.appendedPTS=a,e.start=e.startPTS=r,e.maxStartPTS=l,e.startDTS=i,e.endPTS=a,e.minEndPTS=c,e.endDTS=s;var f,m=e.sn;if(!t||m<t.startSN||m>t.endSN)return 0;var y=m-t.startSN,v=t.fragments;for(v[y]=e,f=y;f>0;f--)Y(v[f],v[f-1]);for(f=y;f<v.length-1;f++)Y(v[f],v[f+1]);return t.fragmentHint&&Y(v[v.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,p}function W(t,e){for(var r=null,a=t.fragments,i=a.length-1;i>=0;i--){var s=a[i].initSegment;if(s){r=s;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var l,c=0;if(function(t,e,r){for(var a=e.skippedSegments,n=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(a?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,c=n;c<=i;c++){var u=l[s+c],d=o[c];a&&!d&&c<a&&(d=e.fragments[c]=u),u&&d&&r(u,d)}}(t,e,(function(t,a){t.relurl&&(c=t.cc-a.cc),Object(n.a)(t.startPTS)&&Object(n.a)(t.endPTS)&&(a.start=a.startPTS=t.startPTS,a.startDTS=t.startDTS,a.appendedPTS=t.appendedPTS,a.maxStartPTS=t.maxStartPTS,a.endPTS=t.endPTS,a.endDTS=t.endDTS,a.minEndPTS=t.minEndPTS,a.duration=t.endPTS-t.startPTS,a.duration&&(l=a),e.PTSKnown=e.alignedSliding=!0),a.elementaryStreams=t.elementaryStreams,a.loader=t.loader,a.stats=t.stats,a.urlId=t.urlId,t.initSegment&&(a.initSegment=t.initSegment,r=t.initSegment)})),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null===(e=r)||void 0===e?void 0:e.relurl)||(t.initSegment=r)})),e.skippedSegments&&(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed)){o.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var u=e.skippedSegments;u--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}var d=e.fragments;if(c){o.b.warn("discontinuity sliding from playlist, take drift into account");for(var h=0;h<d.length;h++)d[h].cc+=c}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var a=0,n=0,i=t.length;n<=i;n++){var s=t[n],o=e[n+a];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):a--}}(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),l?q(e,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS):K(t,e),d.length&&(e.totalduration=e.edge-d[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var p=e.advancedDateTime;if(e.advanced&&p){var f=e.edge;e.driftStart||(e.driftStartTime=p,e.driftStart=f),e.driftEndTime=p,e.driftEnd=f}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function K(t,e){var r=e.startSN+e.skippedSegments-t.startSN,a=t.fragments;r<0||r>=a.length||X(e,a[r].start)}function X(t,e){if(e){for(var r=t.fragments,a=t.skippedSegments;a<r.length;a++)r[a].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}var Z=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=o.b.log.bind(o.b,e+":"),this.warn=o.b.warn.bind(o.b,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.onError=function(t,e){e.fatal&&e.type===s.b.NETWORK_ERROR&&this.clearTimer()},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r)for(var a=0;a<r.length;a++){var i=r[a],s=""+i.URI;if(s===t.substr(-s.length)){var o=parseInt(i["LAST-MSN"]),l=parseInt(i["LAST-PART"]);if(e&&this.hls.config.lowLatencyMode){var c=Math.min(e.age-e.partTarget,e.targetduration);void 0!==l&&c>e.partTarget&&(l+=1)}if(Object(n.a)(o))return new V(o,Object(n.a)(l)?l:void 0,N.No)}}},e.loadPlaylist=function(t){},e.shouldLoadTrack=function(t){return this.canLoad&&t&&!!t.url&&(!t.details||t.details.live)},e.playlistLoaded=function(t,e,r){var a=this,n=e.details,i=e.stats,s=i.loading.end?Math.max(0,self.performance.now()-i.loading.end):0;if(n.advancedDateTime=Date.now()-s,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+t+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:"MISSED")),r&&n.fragments.length>0&&W(r,n),!this.canLoad||!n.live)return;var o,l=void 0,c=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var u=this.hls.config.lowLatencyMode,d=n.lastPartSn,h=n.endSN,p=n.lastPartIndex,f=d===h;-1!==p?(l=f?h+1:d,c=f?u?0:p:p+1):l=h+1;var m=n.age,y=m+n.ageHeader,v=Math.min(y-n.partTarget,1.5*n.targetduration);if(v>0){if(r&&v>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+v+" with playlist age: "+n.age),v=0;else{var g=Math.floor(v/n.targetduration);l+=g,void 0!==c&&(c+=Math.round(v%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+v+" skip sn "+g+" to part "+c)}n.tuneInGoal=v}if(o=this.getDeliveryDirectives(n,e.deliveryDirectives,l,c),u||!f)return void this.loadPlaylist(o)}else o=this.getDeliveryDirectives(n,e.deliveryDirectives,l,c);var b=function(t,e){var r,a=1e3*t.levelTargetDuration,n=a/2,i=t.age,s=i>0&&i<3*a,o=e.loading.end-e.loading.start,l=t.availabilityDelay;if(!1===t.updated)if(s){var c=333*t.misses;r=Math.max(Math.min(n,2*o),c),t.availabilityDelay=(t.availabilityDelay||0)+r}else r=n;else s?(l=Math.min(l||a/2,i),t.availabilityDelay=l,r=l+a-i):r=a-o;return Math.round(r)}(n,i);void 0!==l&&n.canBlockReload&&(b-=n.partTarget||1),this.log("reload live playlist "+t+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout((function(){return a.loadPlaylist(o)}),b)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,r,a){var n=function(t,e){var r=t.canSkipUntil,a=t.canSkipDateRanges,n=t.endSN;return r&&(void 0!==e?e-n:0)<r?a?N.v2:N.Yes:N.No}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,a=e.part,n=N.No),new V(r,a,n)},e.retryLoadingOrFail=function(t){var e,r=this,a=this.hls.config,n=this.retryCount<a.levelLoadingMaxRetry;if(n)if(this.retryCount++,t.details.indexOf("LoadTimeOut")>-1&&null!==(e=t.context)&&void 0!==e&&e.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+t.details+'"'),this.loadPlaylist();else{var i=Math.min(Math.pow(2,this.retryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return r.loadPlaylist()}),i),this.warn("retry playlist loading #"+this.retryCount+" in "+i+' ms after "'+t.details+'"')}else this.warn('cannot recover from error "'+t.details+'"'),this.clearTimer(),t.fatal=!0;return n},t}();function J(){return(J=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function Q(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt,et=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),rt=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[level-controller]")||this)._levels=[],r._firstLevel=-1,r._startLevel=void 0,r.currentLevelIndex=-1,r.manualLevelIndex=-1,r.onParsedComplete=void 0,r._registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,$(e,r);var n,o,l=a.prototype;return l._registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.ERROR,this.onError,this)},l._unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.ERROR,this.onError,this)},l.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,t.prototype.destroy.call(this)},l.startLoad=function(){this._levels.forEach((function(t){t.loadError=0})),t.prototype.startLoad.call(this)},l.onManifestLoaded=function(t,e){var r,a,n=[],o=[],l=[],c={},u=!1,d=!1,h=!1;if(e.levels.forEach((function(t){var e=t.attrs;u=u||!(!t.width||!t.height),d=d||!!t.videoCodec,h=h||!!t.audioCodec,et&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0);var r=t.bitrate+"-"+t.attrs.RESOLUTION+"-"+t.attrs.CODECS;(a=c[r])?a.url.push(t.url):(a=new H(t),c[r]=a,n.push(a)),e&&(e.AUDIO&&G(a,"audio",e.AUDIO),e.SUBTITLES&&G(a,"text",e.SUBTITLES))})),(u||d)&&h&&(n=n.filter((function(t){var e=t.videoCodec,r=t.width,a=t.height;return!!e||!(!r||!a)}))),n=n.filter((function(t){var e=t.audioCodec,r=t.videoCodec;return(!e||v(e,"audio"))&&(!r||v(r,"video"))})),e.audioTracks&&z(o=e.audioTracks.filter((function(t){return!t.audioCodec||v(t.audioCodec,"audio")}))),e.subtitles&&z(l=e.subtitles),n.length>0){r=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var p=0;p<n.length;p++)if(n[p].bitrate===r){this._firstLevel=p,this.log("manifest loaded, "+n.length+" level(s) found, first bitrate: "+r);break}var f=h&&!d,m={levels:n,audioTracks:o,subtitleTracks:l,firstLevel:this._firstLevel,stats:e.stats,audio:h,video:d,altAudio:!f&&o.some((function(t){return!!t.url}))};this.hls.trigger(i.a.MANIFEST_PARSED,m),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,reason:"no level with compatible codecs found in manifest"})},l.onError=function(e,r){if(t.prototype.onError.call(this,e,r),!r.fatal){var a=r.context,n=this._levels[this.currentLevelIndex];if(a&&(a.type===L.a.AUDIO_TRACK&&n.audioGroupIds&&a.groupId===n.audioGroupIds[n.urlId]||a.type===L.a.SUBTITLE_TRACK&&n.textGroupIds&&a.groupId===n.textGroupIds[n.urlId]))this.redundantFailover(this.currentLevelIndex);else{var i,o=!1,l=!0;switch(r.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:if(r.frag){var c=this._levels[r.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(i=r.frag.level)):i=r.frag.level}break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:a&&(a.deliveryDirectives&&(l=!1),i=a.level),o=!0;break;case s.a.REMUX_ALLOC_ERROR:i=r.level,o=!0}void 0!==i&&this.recoverLevel(r,i,o,l)}}},l.recoverLevel=function(t,e,r,a){var n=t.details,i=this._levels[e];if(i.loadError++,r){if(!this.retryLoadingOrFail(t))return void(this.currentLevelIndex=-1);t.levelRetry=!0}if(a){var s=i.url.length;if(s>1&&i.loadError<s)t.levelRetry=!0,this.redundantFailover(e);else if(-1===this.manualLevelIndex){var o=0===e?this._levels.length-1:e-1;this.currentLevelIndex!==o&&0===this._levels[o].loadError&&(this.warn(n+": switch to "+o),t.levelRetry=!0,this.hls.nextAutoLevel=o)}}},l.redundantFailover=function(t){var e=this._levels[t],r=e.url.length;if(r>1){var a=(e.urlId+1)%r;this.warn("Switching to redundant URL-id "+a),this._levels.forEach((function(t){t.urlId=a})),this.level=t}},l.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===L.b.MAIN){var a=this._levels[r.level];void 0!==a&&(a.fragmentError=0,a.loadError=0)}},l.onLevelLoaded=function(t,e){var r,a,n=e.level,i=e.details,s=this._levels[n];if(!s)return this.warn("Invalid level index "+n),void(null!==(a=e.deliveryDirectives)&&void 0!==a&&a.skip&&(i.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(n,e,s.details)):null!==(r=e.deliveryDirectives)&&void 0!==r&&r.skip&&(i.deltaUpdateFailed=!0)},l.onAudioTrackSwitched=function(t,e){var r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var a=-1,n=this.hls.audioTracks[e.id].groupId,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===n){a=i;break}a!==r.urlId&&(r.urlId=a,this.startLoad())}},l.loadPlaylist=function(t){var e=this.currentLevelIndex,r=this._levels[e];if(this.canLoad&&r&&r.url.length>0){var a=r.urlId,n=r.url[a];if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Attempt loading level index "+e+(t?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+a+" "+n),this.clearTimer(),this.hls.trigger(i.a.LEVEL_LOADING,{url:n,level:e,id:a,deliveryDirectives:t||null})}},l.removeLevel=function(t,e){var r=function(t,r){return r!==e},a=this._levels.filter((function(a,n){return n!==t||a.url.length>1&&void 0!==e&&(a.url=a.url.filter(r),a.audioGroupIds&&(a.audioGroupIds=a.audioGroupIds.filter(r)),a.textGroupIds&&(a.textGroupIds=a.textGroupIds.filter(r)),a.urlId=0,!0)})).map((function(t,e){var r=t.details;return null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e})),t}));this._levels=a,this.hls.trigger(i.a.LEVELS_UPDATED,{levels:a})},n=a,(o=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e,r=this._levels;if(0!==r.length&&(this.currentLevelIndex!==t||null===(e=r[t])||void 0===e||!e.details)){if(t<0||t>=r.length){var a=t<0;if(this.hls.trigger(i.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.LEVEL_SWITCH_ERROR,level:t,fatal:a,reason:"invalid level idx"}),a)return;t=Math.min(t,r.length-1)}this.clearTimer();var n=this.currentLevelIndex,o=r[n],l=r[t];this.log("switching to level "+t+" from "+n),this.currentLevelIndex=t;var c=J({},l,{level:t,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete c._urlId,this.hls.trigger(i.a.LEVEL_SWITCHING,c);var u=l.details;if(!u||u.live){var d=this.switchParams(l.uri,null==o?void 0:o.details);this.loadPlaylist(d)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}])&&Q(n.prototype,o),a}(Z);!function(t){t.NOT_LOADED="NOT_LOADED",t.BACKTRACKED="BACKTRACKED",t.APPENDING="APPENDING",t.PARTIAL="PARTIAL",t.OK="OK"}(tt||(tt={}));var at=function(){function t(t){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(i.a.BUFFER_APPENDED,this.onBufferAppended,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(i.a.BUFFER_APPENDED,this.onBufferAppended,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},e.getAppendedFrag=function(t,e){if(e===L.b.MAIN){var r=this.activeFragment,a=this.activeParts;if(!r)return null;if(a)for(var n=a.length;n--;){var i=a[n],s=i?i.end:r.appendedPTS;if(i.start<=t&&void 0!==s&&t<=s)return n>9&&(this.activeParts=a.slice(n-9)),i}else if(r.start<=t&&void 0!==r.appendedPTS&&t<=r.appendedPTS)return r}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,a=Object.keys(r),n=a.length;n--;){var i=r[a[n]];if((null==i?void 0:i.body.type)===e&&i.buffered){var s=i.body;if(s.start<=t&&t<=s.end)return s}}return null},e.detectEvictedFragments=function(t,e,r){var a=this;Object.keys(this.fragments).forEach((function(n){var i=a.fragments[n];if(i)if(i.buffered){var s=i.range[t];s&&s.time.some((function(t){var r=!a.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&a.removeFragment(i.body),r}))}else i.body.type===r&&a.removeFragment(i.body)}))},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,a=t.frag,n=t.part;if(r&&"initSegment"!==a.sn){var i=it(a),s=this.fragments[i];s&&(Object.keys(r).forEach((function(t){var i=a.elementaryStreams[t];if(i){var o=r[t],l=null!==n||!0===i.partial;s.range[t]=e.getBufferedTimes(a,n,l,o)}})),s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},e.fragBuffered=function(t){var e=it(t),r=this.fragments[e];r&&(r.backtrack=r.loaded=null,r.buffered=!0)},e.getBufferedTimes=function(t,e,r,a){for(var n={time:[],partial:r},i=e?e.start:t.start,s=e?e.end:t.end,o=t.minEndPTS||s,l=t.maxStartPTS||i,c=0;c<a.length;c++){var u=a.start(c)-this.bufferPadding,d=a.end(c)+this.bufferPadding;if(l>=u&&o<=d){n.time.push({startPTS:Math.max(i,a.start(c)),endPTS:Math.min(s,a.end(c))});break}if(i<d&&s>u)n.partial=!0,n.time.push({startPTS:Math.max(i,a.start(c)),endPTS:Math.min(s,a.end(c))});else if(s<=u)break}return n},e.getPartialFragment=function(t){var e,r,a,n=null,i=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var c=o[l];c&&nt(c)&&(r=c.body.start-s,a=c.body.end+s,t>=r&&t<=a&&(e=Math.min(t-r,a-t),i<=e&&(n=c.body,i=e)))})),n},e.getState=function(t){var e=it(t),r=this.fragments[e];return r?r.buffered?nt(r)?tt.PARTIAL:tt.OK:r.backtrack?tt.BACKTRACKED:tt.APPENDING:tt.NOT_LOADED},e.backtrack=function(t,e){var r=it(t),a=this.fragments[r];if(!a||a.backtrack)return null;var n=a.backtrack=e||a.loaded;return a.loaded=null,n},e.getBacktrackData=function(t){var e=it(t),r=this.fragments[e];if(r){var a,n=r.backtrack;if(null!=n&&null!==(a=n.payload)&&void 0!==a&&a.byteLength)return n;this.removeFragment(t)}return null},e.isTimeBuffered=function(t,e,r){for(var a,n,i=0;i<r.length;i++){if(a=r.start(i)-this.bufferPadding,n=r.end(i)+this.bufferPadding,t>=a&&e<=n)return!0;if(e<=a)return!1}return!1},e.onFragLoaded=function(t,e){var r=e.frag,a=e.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!a){var n=it(r);this.fragments[n]={body:r,loaded:e,backtrack:null,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var r=this,a=e.frag,n=e.part,i=e.timeRanges;if(a.type===L.b.MAIN)if(this.activeFragment=a,n){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(n)}else this.activeParts=null;this.timeRanges=i,Object.keys(i).forEach((function(t){var e=i[t];if(r.detectEvictedFragments(t,e),!n)for(var s=0;s<e.length;s++)a.appendedPTS=Math.max(e.end(s),a.appendedPTS||0)}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=it(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,r){var a=this;Object.keys(this.fragments).forEach((function(n){var i=a.fragments[n];if(i&&i.buffered){var s=i.body;s.type===r&&s.start<e&&s.end>t&&a.removeFragment(s)}}))},e.removeFragment=function(t){var e=it(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),delete this.fragments[e]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},t}();function nt(t){var e,r;return t.buffered&&((null===(e=t.range.video)||void 0===e?void 0:e.partial)||(null===(r=t.range.audio)||void 0===r?void 0:r.partial))}function it(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var st=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}(),ot={length:0,start:function(){return 0},end:function(){return 0}},lt=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var a=t.getBuffered(e),n=0;n<a.length;n++)if(r>=a.start(n)&&r<=a.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(e,r,a){try{if(e){var n,i=t.getBuffered(e),s=[];for(n=0;n<i.length;n++)s.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(s,r,a)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){e=Math.max(0,e),t.sort((function(t,e){return t.start-e.start||e.end-t.end}));var a=[];if(r)for(var n=0;n<t.length;n++){var i=a.length;if(i){var s=a[i-1].end;t[n].start-s<r?t[n].end>s&&(a[i-1].end=t[n].end):a.push(t[n])}else a.push(t[n])}else a=t;for(var o,l=0,c=e,u=e,d=0;d<a.length;d++){var h=a[d].start,p=a[d].end;if(e+r>=h&&e<p)c=h,l=(u=p)-e;else if(e+r<h){o=h;break}}return{len:l,start:c||0,end:u||0,nextStart:o}},t.getBuffered=function(t){try{return t.buffered}catch(t){return o.b.log("failed to get media.buffered",t),ot}},t}(),ct=function(t,e,r,a,n,i){void 0===a&&(a=0),void 0===n&&(n=-1),void 0===i&&(i=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=a,this.part=n,this.partial=i};function ut(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function dt(t,e){for(var r=e.fragments,a=0,n=r.length;a<n;a++)ut(r[a],t);e.fragmentHint&&ut(e.fragmentHint,t),e.alignedSliding=!0}function ht(t,e,r){e&&(function(t,e,r){if(function(t,e,r){return!(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var a=function(t,e){var r=t.fragments,a=e.fragments;if(a.length&&r.length){var n=function(t,e){for(var r=null,a=0,n=t.length;a<n;a++){var i=t[a];if(i&&i.cc===e){r=i;break}}return r}(r,a[0].cc);if(n&&(!n||n.startPTS))return n;o.b.log("No frag in previous level to align on")}else o.b.log("No fragments to align")}(r.details,e);a&&Object(n.a)(a.start)&&(o.b.log("Adjusting PTS using last level due to CC increase within current level "+e.url),dt(a.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&function(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime,a=t.fragments[0].programDateTime,i=(a-r)/1e3+e.fragments[0].start;i&&Object(n.a)(i)&&(o.b.log("Adjusting PTS using programDateTime delta "+(a-r)+"ms, sliding:"+i.toFixed(3)+" "+t.url+" "),dt(i,t))}}(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||K(e.details,r))}function pt(t,e){var r=t.programDateTime;if(r){var a=(r-e)/1e3;t.start=t.startPTS=a,t.endPTS=a+t.duration}}function ft(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime-1e3*e.fragments[0].start;t.fragments.forEach((function(t){pt(t,r)})),t.fragmentHint&&pt(t.fragmentHint,r),t.alignedSliding=!0}}var mt=function(t,e){for(var r=0,a=t.length-1,n=null,i=null;r<=a;){var s=e(i=t[n=(r+a)/2|0]);if(s>0)r=n+1;else{if(!(s<0))return i;a=n-1}}return null};function yt(t,e,r,a){void 0===r&&(r=0),void 0===a&&(a=0);var n=null;return t?n=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(n=e[0]),n&&0===vt(r,a,n)?n:mt(e,vt.bind(null,r,a))||n}function vt(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0);var a=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-a<=t?1:r.start-a>t&&r.start?-1:0}function gt(t,e,r){var a=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-a>t}function bt(t){var e="function"==typeof Map?new Map:void 0;return(bt=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return wt(t,arguments,xt(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Tt(a,t)})(t)}function wt(t,e,r){return(wt=kt()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&Tt(n,r.prototype),n}).apply(null,arguments)}function kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Et=Math.pow(2,17),St=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var r=this,a=t.url;if(!a)return Promise.reject(new Lt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,networkDetails:null},"Fragment does not have a "+(a?"part list":"url")));this.abort();var n=this.config,i=n.fLoader,o=n.loader;return new Promise((function(a,l){r.loader&&r.loader.destroy();var c=r.loader=t.loader=i?new i(n):new o(n),u=_t(t),d={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:Et};t.stats=c.stats,c.load(u,d,{onSuccess:function(e,n,i,s){r.resetLoader(t,c),a({frag:t,part:null,payload:e.data,networkDetails:s})},onError:function(e,a,n){r.resetLoader(t,c),l(new Lt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:e,networkDetails:n}))},onAbort:function(e,a,n){r.resetLoader(t,c),l(new Lt({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,networkDetails:n}))},onTimeout:function(e,a,n){r.resetLoader(t,c),l(new Lt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,networkDetails:n}))},onProgress:function(r,a,n,i){e&&e({frag:t,part:null,payload:n,networkDetails:i})}})}))},e.loadPart=function(t,e,r){var a=this;this.abort();var n=this.config,i=n.fLoader,o=n.loader;return new Promise((function(l,c){a.loader&&a.loader.destroy();var u=a.loader=t.loader=i?new i(n):new o(n),d=_t(t,e),h={timeout:n.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:n.fragLoadingMaxRetryTimeout,highWaterMark:Et};e.stats=u.stats,u.load(d,h,{onSuccess:function(n,i,s,o){a.resetLoader(t,u),a.updateStatsFromPart(t,e);var c={frag:t,part:e,payload:n.data,networkDetails:o};r(c),l(c)},onError:function(r,n,i){a.resetLoader(t,u),c(new Lt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:r,networkDetails:i}))},onAbort:function(r,n,i){t.stats.aborted=e.stats.aborted,a.resetLoader(t,u),c(new Lt({type:s.b.NETWORK_ERROR,details:s.a.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,networkDetails:i}))},onTimeout:function(r,n,i){a.resetLoader(t,u),c(new Lt({type:s.b.NETWORK_ERROR,details:s.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,networkDetails:i}))}})}))},e.updateStatsFromPart=function(t,e){var r=t.stats,a=e.stats,n=a.total;if(r.loaded+=a.loaded,n){var i=Math.round(t.duration/e.duration),s=Math.min(Math.round(r.loaded/n),i),o=(i-s)*Math.round(r.loaded/s);r.total=r.loaded+o}else r.total=Math.max(r.loaded,r.total);var l=r.loading,c=a.loading;l.start?l.first+=c.first-c.start:(l.start=c.start,l.first=c.first),l.end=c.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function _t(t,e){void 0===e&&(e=null);var r=e||t,a={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},i=r.byteRangeStartOffset,s=r.byteRangeEndOffset;return Object(n.a)(i)&&Object(n.a)(s)&&(a.rangeStart=i,a.rangeEnd=s),a}var Lt=function(t){var e,r;function a(e){for(var r,a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return(r=t.call.apply(t,[this].concat(n))||this).data=void 0,r.data=e,r}return r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Tt(e,r),a}(bt(Error)),At=r(15),Ct=function(t){for(var e="",r=t.length,a=0;a<r;a++)e+="["+t.start(a).toFixed(3)+","+t.end(a).toFixed(3)+"]";return e};function Rt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dt="STOPPED",Ot="IDLE",Pt="KEY_LOADING",Mt="FRAG_LOADING",Ft="FRAG_LOADING_WAITING_RETRY",Bt="WAITING_TRACK",Nt="PARSING",Ut="PARSED",jt="BACKTRACKING",Vt="ENDED",Ht="ERROR",Gt="WAITING_INIT_PTS",zt="WAITING_LEVEL",Yt=function(t){var e,r;function a(e,r,a){var n;return(n=t.call(this)||this).hls=void 0,n.fragPrevious=null,n.fragCurrent=null,n.fragmentTracker=void 0,n.transmuxer=null,n._state=Dt,n.media=void 0,n.mediaBuffer=void 0,n.config=void 0,n.bitrateTest=!1,n.lastCurrentTime=0,n.nextLoadPosition=0,n.startPosition=0,n.loadedmetadata=!1,n.fragLoadError=0,n.retryDate=0,n.levels=null,n.fragmentLoader=void 0,n.levelLastLoaded=null,n.startFragRequested=!1,n.decrypter=void 0,n.initPTS=[],n.onvseeking=null,n.onvended=null,n.logPrefix="",n.log=void 0,n.warn=void 0,n.logPrefix=a,n.log=o.b.log.bind(o.b,a+":"),n.warn=o.b.warn.bind(o.b,a+":"),n.hls=e,n.fragmentLoader=new St(e.config),n.fragmentTracker=r,n.config=e.config,n.decrypter=new At.a(e,e.config),e.on(i.a.KEY_LOADED,n.onKeyLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,It(e,r);var c,u,d=a.prototype;return d.doTick=function(){this.onTickEnd()},d.onTickEnd=function(){},d.startLoad=function(t){},d.stopLoad=function(){this.fragmentLoader.abort();var t=this.fragCurrent;t&&this.fragmentTracker.removeFragment(t),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Dt},d._streamEnded=function(t,e){var r=this.fragCurrent,a=this.fragmentTracker;if(!e.live&&r&&r.sn>=e.endSN&&!t.nextStart){var n=e.partList;if(null!=n&&n.length){var i=n[n.length-1];return lt.isBuffered(this.media,i.start+i.duration/2)}var s=a.getState(r);return s===tt.PARTIAL||s===tt.OK}return!1},d.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var a=this.config;this.levels&&a.autoStartLoad&&this.state===Dt&&this.startLoad(a.startPosition)},d.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},d.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,a=this.mediaBuffer,i=this.state,s=r?r.currentTime:0,o=lt.bufferInfo(a||r,s,t.maxBufferHole);if(this.log("media seeking to "+(Object(n.a)(s)?s.toFixed(3):s)+", state: "+i),i===Vt)this.resetLoadingState();else if(e&&!o.len){var l=t.maxFragLookUpTolerance,c=e.start-l,u=s>e.start+e.duration+l;(s<c||u)&&(u&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.loader.abort()),this.resetLoadingState())}r&&(this.lastCurrentTime=s),this.loadedmetadata||o.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},d.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},d.onKeyLoaded=function(t,e){if(this.state===Pt&&e.frag===this.fragCurrent&&this.levels){this.state=Ot;var r=this.levels[e.frag.level].details;r&&this.loadFragment(e.frag,r,e.frag.start)}},d.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},d.onHandlerDestroyed=function(){this.state=Dt,this.hls.off(i.a.KEY_LOADED,this.onKeyLoaded,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},d.loadKey=function(t,e){this.log("Loading key for "+t.sn+" of ["+e.startSN+"-"+e.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Pt,this.fragCurrent=t,this.hls.trigger(i.a.KEY_LOADING,{frag:t})},d.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r)},d._loadFragForPlayback=function(t,e,r){var a=this;this._doFragLoad(t,e,r,(function(e){if(a.fragContextChanged(t))return a.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void a.fragmentTracker.removeFragment(t);t.stats.chunkCount++,a._handleFragmentLoadProgress(e)})).then((function(e){if(e){a.fragLoadError=0;var r=a.state;if(!a.fragContextChanged(t))return"payload"in e&&(a.log("Loaded fragment "+t.sn+" of level "+t.level),a.hls.trigger(i.a.FRAG_LOADED,e),a.state===jt)?(a.fragmentTracker.backtrack(t,e),void a.resetFragmentLoading(t)):void a._handleFragmentLoadComplete(e);(r===Mt||r===jt||!a.fragCurrent&&r===Nt)&&(a.fragmentTracker.removeFragment(t),a.state=Ot)}})).catch((function(e){a.warn(e),a.resetFragmentLoading(t)}))},d.flushMainBuffer=function(t,e,r){if(void 0===r&&(r=null),t-e){var a={startOffset:t,endOffset:e,type:r};this.fragLoadError=0,this.hls.trigger(i.a.BUFFER_FLUSHING,a)}},d._loadInitSegment=function(t){var e=this;this._doFragLoad(t).then((function(r){if(!r||e.fragContextChanged(t)||!e.levels)throw new Error("init load aborted");return r})).then((function(r){var a=e.hls,n=r.payload,s=t.decryptdata;if(n&&n.byteLength>0&&s&&s.key&&s.iv&&"AES-128"===s.method){var o=self.performance.now();return e.decrypter.webCryptoDecrypt(new Uint8Array(n),s.key.buffer,s.iv.buffer).then((function(e){var n=self.performance.now();return a.trigger(i.a.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:o,tdecrypt:n}}),r.payload=e,r}))}return r})).then((function(r){var a=e.fragCurrent,n=e.hls,s=e.levels;if(!s)throw new Error("init load aborted, missing levels");s[t.level].details;var o=t.stats;e.state=Ot,e.fragLoadError=0,t.data=new Uint8Array(r.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),r.frag===a&&n.trigger(i.a.FRAG_BUFFERED,{stats:o,frag:a,part:null,id:t.type}),e.tick()})).catch((function(r){e.warn(r),e.resetFragmentLoading(t)}))},d.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},d.fragBufferedComplete=function(t,e){var r=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" "+Ct(lt.getBuffered(r))),this.state=Ot,this.tick()},d._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,a=t.part,n=t.partsLoaded,i=!n||0===n.length||n.some((function(t){return!t})),s=new ct(r.level,r.sn,r.stats.chunkCount+1,0,a?a.index:-1,!i);e.flush(s)}},d._handleFragmentLoadProgress=function(t){},d._doFragLoad=function(t,e,r,a){var s=this;if(void 0===r&&(r=null),!this.levels)throw new Error("frag load aborted, missing levels");if(r=Math.max(t.start,r||0),this.config.lowLatencyMode&&e){var o=e.partList;if(o&&a){r>t.end&&e.fragmentHint&&(t=e.fragmentHint);var l=this.getNextPart(o,t,r);if(l>-1){var c=o[l];return this.log("Loading part sn: "+t.sn+" p: "+c.index+" cc: "+t.cc+" of playlist ["+e.startSN+"-"+e.endSN+"] parts [0-"+l+"-"+(o.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=c.start+c.duration,this.state=Mt,this.hls.trigger(i.a.FRAG_LOADING,{frag:t,part:o[l],targetBufferTime:r}),this.doFragPartsLoad(t,o,l,a).catch((function(t){return s.handleFragLoadError(t)}))}if(!t.url||this.loadedEndOfParts(o,r))return Promise.resolve(null)}}return this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(e?"of ["+e.startSN+"-"+e.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),Object(n.a)(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Mt,this.hls.trigger(i.a.FRAG_LOADING,{frag:t,targetBufferTime:r}),this.fragmentLoader.load(t,a).catch((function(t){return s.handleFragLoadError(t)}))},d.doFragPartsLoad=function(t,e,r,a){var n=this;return new Promise((function(s,o){var l=[];!function r(c){var u=e[c];n.fragmentLoader.loadPart(t,u,a).then((function(a){l[u.index]=a;var o=a.part;n.hls.trigger(i.a.FRAG_LOADED,a);var d=e[c+1];if(!d||d.fragment!==t)return s({frag:t,part:o,partsLoaded:l});r(c+1)})).catch(o)}(r)}))},d.handleFragLoadError=function(t){var e=t.data;return e&&e.details===s.a.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(i.a.ERROR,e),null},d._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===Nt){var r=e.frag,a=e.part,n=e.level,i=self.performance.now();r.stats.parsing.end=i,a&&(a.stats.parsing.end=i),this.updateLevelTiming(r,a,n,t.partial)}else this.fragCurrent||(this.state=Ot)},d.getCurrentContext=function(t){var e=this.levels,r=t.level,a=t.sn,n=t.part;if(!e||!e[r])return this.warn("Levels object was unset while buffering fragment "+a+" of level "+r+". The current chunk will not be buffered."),null;var i=e[r],s=n>-1?function(t,e,r){if(!t||!t.details)return null;var a=t.details.partList;if(a)for(var n=a.length;n--;){var i=a[n];if(i.index===r&&i.fragment.sn===e)return i}return null}(i,a,n):null,o=s?s.fragment:function(t,e,r){if(!t||!t.details)return null;var a=t.details,n=a.fragments[e-a.startSN];return n||((n=a.fragmentHint)&&n.sn===e?n:e<a.startSN&&r&&r.sn===e?r:null)}(i,a,this.fragCurrent);return o?{frag:o,part:s,level:i}:null},d.bufferFragmentData=function(t,e,r,a){if(t&&this.state===Nt){var n=t.data1,s=t.data2,o=n;if(n&&s&&(o=Object(l.a)(n,s)),o&&o.length){var c={type:t.type,frag:e,part:r,chunkMeta:a,parent:e.type,data:o};this.hls.trigger(i.a.BUFFER_APPENDING,c),t.dropped&&t.independent&&!r&&this.flushBufferGap(e)}}},d.flushBufferGap=function(t){var e=this.media;if(e)if(lt.isBuffered(e,e.currentTime)){var r=e.currentTime,a=lt.bufferInfo(e,r,0),n=t.duration,i=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),s=Math.max(Math.min(t.start-i,a.end-i),r+i);t.start-s>i&&this.flushMainBuffer(s,t.start)}else this.flushMainBuffer(0,t.start)},d.getFwdBufferInfo=function(t,e){var r=this.config,a=this.getLoadPosition();if(!Object(n.a)(a))return null;var i=lt.bufferInfo(t,a,r.maxBufferHole);if(0===i.len&&void 0!==i.nextStart){var s=this.fragmentTracker.getBufferedFrag(a,e);if(s&&i.nextStart<s.end)return lt.bufferInfo(t,a,Math.max(i.nextStart,r.maxBufferHole))}return i},d.getMaxBufferLength=function(t){var e,r=this.config;return e=t?Math.max(8*r.maxBufferSize/t,r.maxBufferLength):r.maxBufferLength,Math.min(e,r.maxMaxBufferLength)},d.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},d.getNextFragment=function(t,e){var r,a,n=e.fragments,i=n.length;if(!i)return null;var s,o=this.config,l=n[0].start;if(e.live){var c=o.initialLiveManifestSize;if(i<c)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+c+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(s=this.getInitialLiveFragment(e,n),this.startPosition=s?this.hls.liveSyncPosition||s.start:t)}else t<=l&&(s=n[0]);if(!s){var u=o.lowLatencyMode?e.partEnd:e.fragmentEnd;s=this.getFragmentAtPosition(t,u,e)}return null===(r=s)||void 0===r||!r.initSegment||null!==(a=s)&&void 0!==a&&a.initSegment.data||this.bitrateTest||(s=s.initSegment),s},d.getNextPart=function(t,e,r){for(var a=-1,n=!1,i=!0,s=0,o=t.length;s<o;s++){var l=t[s];if(i=i&&!l.independent,a>-1&&r<l.start)break;var c=l.loaded;!c&&(n||l.independent||i)&&l.fragment===e&&(a=s),n=c}return a},d.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},d.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,a=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),a=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!Object(n.a)(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var a=0;a<t.length;++a){var i=t[a];if(gt(e,r,i))return i}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!a){var i=r.sn+1;if(i>=t.startSN&&i<=t.endSN){var s=e[i-t.startSN];r.cc===s.cc&&(a=s,this.log("Live playlist, switching playlist, load frag with next SN: "+a.sn))}a||(a=function(t,e){return mt(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+a.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(a=this.getFragmentAtPosition(o,this.bitrateTest?t.fragmentEnd:t.edge,t))}return a},d.getFragmentAtPosition=function(t,e,r){var a,n=this.config,i=this.fragPrevious,s=r.fragments,o=r.endSN,l=r.fragmentHint,c=n.maxFragLookUpTolerance,u=!!(n.lowLatencyMode&&r.partList&&l);if(u&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),a=t<e?yt(i,s,t,t>e-c?0:c):s[s.length-1]){var d=a.sn-r.startSN,h=i&&a.level===i.level,p=s[d+1];if(this.fragmentTracker.getState(a)===tt.BACKTRACKED){a=null;for(var f=d;s[f]&&this.fragmentTracker.getState(s[f])===tt.BACKTRACKED;)a=i?s[f--]:s[--f];a||(a=p)}else i&&a.sn===i.sn&&!u&&h&&(a.sn<o&&this.fragmentTracker.getState(p)!==tt.OK?(this.log("SN "+a.sn+" just loaded, load next one: "+p.sn),a=p):a=null)}return a},d.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var a=this.hls.liveSyncPosition,n=r.currentTime,i=t.fragments[0].start,s=t.edge,o=n>=i-e.maxFragLookUpTolerance&&n<=s;if(null!==a&&r.duration>a&&(n<a||!o)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&r.readyState<4||n<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=a),r.readyState&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+a.toFixed(3)),r.currentTime=a))}}},d.alignPlaylists=function(t,e){var r=this.levels,a=this.levelLastLoaded,i=this.fragPrevious,s=null!==a?r[a]:null,o=t.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var l=t.fragments[0].start,c=!e,u=t.alignedSliding&&Object(n.a)(l);if(c||!u&&!l){ht(i,s,t);var d=t.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(i?i.sn:"na")+" fragments: "+o),d}return l},d.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},d.setStartPosition=function(t,e){var r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){var a=t.startTimeOffset;Object(n.a)(a)?(r=e+a,a<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log("Start time offset "+a+" found in playlist, adjust startPosition to "+r),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},d.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},d.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},d.resetFragmentLoading=function(t){this.fragCurrent&&this.fragContextChanged(t)||(this.state=Ot)},d.onFragmentOrKeyLoadError=function(t,e){if(!e.fatal){var r=e.frag;if(r&&r.type===t){this.fragCurrent;var a=this.config;if(this.fragLoadError+1<=a.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(r.level))return;var n=Math.min(Math.pow(2,this.fragLoadError)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+t+" "+r.level+" failed to load, retrying in "+n+"ms"),this.retryDate=self.performance.now()+n,this.fragLoadError++,this.state=Ft}else e.levelRetry?(t===L.b.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Ot):(o.b.error(e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.hls.stopLoad(),this.state=Ht)}}},d.afterBufferFlushed=function(t,e,r){if(t){var a=lt.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,a,r),this.state===Vt&&this.resetLoadingState()}},d.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=Ot},d.resetLiveStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;if(null!=e&&e.live)return this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState(),!0;this.nextLoadPosition=this.startPosition}return!1},d.updateLevelTiming=function(t,e,r,a){var n=this,s=r.details;Object.keys(t.elementaryStreams).reduce((function(e,o){var l=t.elementaryStreams[o];if(l){var c=l.endPTS-l.startPTS;if(c<=0)return n.warn("Could not parse fragment "+t.sn+" "+o+" duration reliably ("+c+") resetting transmuxer to fallback to playlist timing"),n.resetTransmuxer(),e||!1;var u=a?0:q(s,t,l.startPTS,l.endPTS,l.startDTS,l.endDTS);return n.hls.trigger(i.a.LEVEL_PTS_UPDATED,{details:s,level:r,drift:u,type:o,frag:t,start:l.startPTS,end:l.endPTS}),!0}return e}),!1)?(this.state=Ut,this.hls.trigger(i.a.FRAG_PARSED,{frag:t,part:e})):this.resetLoadingState()},d.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},c=a,(u=[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}])&&Rt(c.prototype,u),a}(st);function qt(){return self.MediaSource||self.WebKitMediaSource}function Wt(){return self.SourceBuffer||self.WebKitSourceBuffer}var Kt=r(18),Xt=r(10),Zt=r(14),Jt=qt()||{isTypeSupported:function(){return!1}},Qt=function(){function t(t,e,r,a){var n=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=t,this.id=e,this.onTransmuxComplete=r,this.onFlush=a;var l=t.config,c=function(e,r){(r=r||{}).frag=n.frag,r.id=n.id,t.trigger(e,r)};this.observer=new Zt.EventEmitter,this.observer.on(i.a.FRAG_DECRYPTED,c),this.observer.on(i.a.ERROR,c);var u={mp4:Jt.isTypeSupported("video/mp4"),mpeg:Jt.isTypeSupported("audio/mpeg"),mp3:Jt.isTypeSupported('audio/mp4; codecs="mp3"')},d=navigator.vendor;if(l.enableWorker&&"undefined"!=typeof Worker){var h;o.b.log("demuxing in webworker");try{h=this.worker=Kt(19),this.onwmsg=this.onWorkerMessage.bind(this),h.addEventListener("message",this.onwmsg),h.onerror=function(e){t.trigger(i.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},h.postMessage({cmd:"init",typeSupported:u,vendor:d,id:e,config:JSON.stringify(l)})}catch(t){o.b.warn("Error in worker:",t),o.b.error("Error while initializing DemuxerWorker, fallback to inline"),h&&self.URL.revokeObjectURL(h.objectURL),this.transmuxer=new Xt.c(this.observer,u,l,d,e),this.worker=null}}else this.transmuxer=new Xt.c(this.observer,u,l,d,e)}var e=t.prototype;return e.destroy=function(){var t=this.worker;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.worker=null;else{var e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}var r=this.observer;r&&r.removeAllListeners(),this.observer=null},e.push=function(t,e,r,a,n,i,s,l,c,u){var d,h,p=this;c.transmuxing.start=self.performance.now();var f=this.transmuxer,m=this.worker,y=i?i.start:n.start,v=n.decryptdata,g=this.frag,b=!(g&&n.cc===g.cc),w=!(g&&c.level===g.level),k=g?c.sn-g.sn:-1,T=this.part?c.part-this.part.index:1,x=!w&&(1===k||0===k&&1===T),E=self.performance.now();(w||k||0===n.stats.parsing.start)&&(n.stats.parsing.start=E),!i||!T&&x||(i.stats.parsing.start=E);var S=!(g&&(null===(d=n.initSegment)||void 0===d?void 0:d.url)===(null===(h=g.initSegment)||void 0===h?void 0:h.url)),_=new Xt.b(b,x,l,w,y,S);if(!x||b||S){o.b.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+b+"\n        trackSwitch: "+w+"\n        contiguous: "+x+"\n        accurateTimeOffset: "+l+"\n        timeOffset: "+y+"\n        initSegmentChange: "+S);var L=new Xt.a(r,a,e,s,u);this.configureTransmuxer(L)}if(this.frag=n,this.part=i,m)m.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:c,state:_},t instanceof ArrayBuffer?[t]:[]);else if(f){var A=f.push(t,v,c,_);Object(Xt.d)(A)?A.then((function(t){p.handleTransmuxComplete(t)})):this.handleTransmuxComplete(A)}},e.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer,a=this.worker;if(a)a.postMessage({cmd:"flush",chunkMeta:t});else if(r){var n=r.flush(t);Object(Xt.d)(n)?n.then((function(r){e.handleFlushResult(r,t)})):this.handleFlushResult(n,t)}},e.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t)})),this.onFlush(e)},e.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},e.configureTransmuxer=function(t){var e=this.worker,r=this.transmuxer;e?e.postMessage({cmd:"configure",config:t}):r&&r.configure(t)},e.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},t}(),$t=function(){function t(t,e,r,a){this.config=void 0,this.media=void 0,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=a}var e=t.prototype;return e.destroy=function(){this.hls=this.fragmentTracker=this.media=null},e.poll=function(t){var e=this.config,r=this.media,a=this.stalled,n=r.currentTime,i=r.seeking,s=this.seeking&&!i,l=!this.seeking&&i;if(this.seeking=i,n===t){if((l||s)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&lt.getBuffered(r).length){var c=lt.bufferInfo(r,n,0),u=c.len>0,d=c.nextStart||0;if(u||d){if(i){var h=c.len>2,p=!d||d-n>2&&!this.fragmentTracker.getPartialFragment(n);if(h||p)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var f,m=Math.max(d,c.start||0)-n,y=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,v=(null==y||null===(f=y.details)||void 0===f?void 0:f.live)?2*y.details.targetduration:2;if(m>0&&m<=v)return void this._trySkipBufferHole(null)}var g=self.performance.now();if(null!==a){var b=g-a;!i&&b>=250&&this._reportStall(c.len);var w=lt.bufferInfo(r,n,e.maxBufferHole);this._tryFixBufferStall(w,b)}else this.stalled=g}}}else if(this.moved=!0,null!==a){if(this.stallReported){var k=self.performance.now()-a;o.b.warn("playback not stuck anymore @"+n+", after "+Math.round(k)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var r=this.config,a=this.fragmentTracker,n=this.media.currentTime,i=a.getPartialFragment(n);i&&this._trySkipBufferHole(i)||t.len>r.maxBufferHole&&e>1e3*r.highBufferWatchdogPeriod&&(o.b.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,o.b.warn("Playback stalling at @"+r.currentTime+" due to low buffer (buffer="+t+")"),e.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,r=this.hls,a=this.media,n=a.currentTime,l=0,c=lt.getBuffered(a),u=0;u<c.length;u++){var d=c.start(u);if(n+e.maxBufferHole>=l&&n<d){var h=Math.max(d+.05,a.currentTime+.1);return o.b.warn("skipping hole, adjusting currentTime from "+n+" to "+h),this.moved=!0,this.stalled=null,a.currentTime=h,t&&r.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+h,frag:t}),h}l=c.end(u)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,a=r.currentTime,n=(this.nudgeRetry||0)+1;if(this.nudgeRetry=n,n<t.nudgeMaxRetry){var l=a+n*t.nudgeOffset;o.b.warn("Nudging 'currentTime' from "+a+" to "+l),r.currentTime=l,e.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.b.error("Playhead still not moving while enough data buffered @"+a+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_STALLED_ERROR,fatal:!0})},t}();function te(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ee(t,e){return(ee=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var re=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[stream-controller]")||this).audioCodecSwap=!1,a.gapController=null,a.level=-1,a._forceStartLoad=!1,a.altAudio=!1,a.audioOnly=!1,a.fragPlaying=null,a.onvplaying=null,a.onvseeked=null,a.fragLastKbps=0,a.stalled=!1,a.couldBacktrack=!1,a.audioCodecSwitch=!1,a.videoBuffer=null,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,ee(e,r);var l,u,d=a.prototype;return d._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(i.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},d._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(i.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(i.a.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},d.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},d.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var a=r.startLevel;-1===a&&(r.config.testBandwidth?(a=0,this.bitrateTest=!0):a=r.nextAutoLevel),this.level=r.nextLoadLevel=a,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Ot,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=Dt},d.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},d.doTick=function(){switch(this.state){case Ot:this.doTickIdle();break;case zt:var t,e=this.levels,r=this.level,a=null==e||null===(t=e[r])||void 0===t?void 0:t.details;if(a&&(!a.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(a))break;this.state=Ot;break}break;case Ft:var n,i=self.performance.now(),s=this.retryDate;(!s||i>=s||null!==(n=this.media)&&void 0!==n&&n.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=Ot)}this.onTickEnd()},d.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},d.doTickIdle=function(){var t,e,r=this.hls,a=this.levelLastLoaded,n=this.levels,s=this.media,o=r.config,l=r.nextLoadLevel;if(null!==a&&(s||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&n&&n[l]){var u=n[l];this.level=r.nextLoadLevel=l;var d=u.details;if(!d||this.state===zt||d.live&&this.levelLastLoaded!==l)this.state=zt;else{var h=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:s,L.b.MAIN);if(null!==h&&!(h.len>=this.getMaxBufferLength(u.maxBitrate))){if(this._streamEnded(h,d)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(i.a.BUFFER_EOS,p),void(this.state=Vt)}var f=h.end,m=this.getNextFragment(f,d);if(this.couldBacktrack&&!this.fragPrevious&&m&&"initSegment"!==m.sn){var y=m.sn-d.startSN;y>1&&(m=d.fragments[y-1],this.fragmentTracker.removeFragment(m))}if(m&&this.fragmentTracker.getState(m)===tt.OK&&this.nextLoadPosition>f){var v=this.audioOnly&&!this.altAudio?c.a.AUDIO:c.a.VIDEO;this.afterBufferFlushed(s,v,L.b.MAIN),m=this.getNextFragment(this.nextLoadPosition,d)}m&&(!m.initSegment||m.initSegment.data||this.bitrateTest||(m=m.initSegment),"identity"!==(null===(t=m.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=m.decryptdata)&&void 0!==e&&e.key?this.loadFragment(m,d,f):this.loadKey(m,d))}}}},d.loadFragment=function(e,r,a){var n,i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,i===tt.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(e);if(s)return this._handleFragmentLoadProgress(s),void this._handleFragmentLoadComplete(s);i=tt.NOT_LOADED}i===tt.NOT_LOADED||i===tt.PARTIAL?"initSegment"===e.sn?this._loadInitSegment(e):this.bitrateTest?(e.bitrateTest=!0,this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,a)):i===tt.APPENDING?this.reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e):0===(null===(n=this.media)||void 0===n?void 0:n.buffered.length)&&this.fragmentTracker.removeAllFragments()},d.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,L.b.MAIN);return e&&"fragment"in e?e.fragment:e},d.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,L.b.MAIN)},d.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},d.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},d.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,a=this.getAppendedFrag(e.currentTime);if(a&&a.start>1&&this.flushMainBuffer(0,a.start-1),!e.paused&&t){var n=t[this.hls.nextLoadLevel],i=this.fragLastKbps;r=i&&this.fragCurrent?this.fragCurrent.duration*n.maxBitrate/(1e3*i)+1:0}else r=0;var s=this.getBufferedFrag(e.currentTime+r);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(s.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,.5*c),.75*c));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},d.abortCurrentFrag=function(){var t=this.fragCurrent;this.fragCurrent=null,null!=t&&t.loader&&t.loader.abort(),this.state===Pt&&(this.state=Ot),this.nextLoadPosition=this.getLoadPosition()},d.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null)},d.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var a=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),a.addEventListener("playing",this.onvplaying),a.addEventListener("seeked",this.onvseeked),this.gapController=new $t(this.config,a,this.fragmentTracker,this.hls)},d.onMediaDetaching=function(){var e=this.media;e&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},d.onMediaPlaying=function(){this.tick()},d.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;Object(n.a)(e)&&this.log("Media seeked to "+e.toFixed(3)),this.tick()},d.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(i.a.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=this.stalled=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null},d.onManifestParsed=function(t,e){var r,a,n,i=!1,s=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(i=!0),-1!==r.indexOf("mp4a.40.5")&&(s=!0))})),this.audioCodecSwitch=i&&s&&!("function"==typeof(null==(n=Wt())||null===(a=n.prototype)||void 0===a?void 0:a.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},d.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===Ot){var a=r[e.level];(!a.details||a.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(a.details))&&(this.state=zt)}},d.onLevelLoaded=function(t,e){var r,a=this.levels,n=e.level,s=e.details,o=s.totalduration;if(a){this.log("Level "+n+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+o);var l=this.fragCurrent;!l||this.state!==Mt&&this.state!==Ft||l.level!==e.level&&l.loader&&(this.state=Ot,l.loader.abort());var c=a[n],u=0;if(s.live||null!==(r=c.details)&&void 0!==r&&r.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;u=this.alignPlaylists(s,c.details)}if(c.details=s,this.levelLastLoaded=n,this.hls.trigger(i.a.LEVEL_UPDATED,{details:s,level:n}),this.state===zt){if(this.waitForCdnTuneIn(s))return;this.state=Ot}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,u),this.tick()}else this.warn("Levels were reset while loading level "+n)},d._handleFragmentLoadProgress=function(t){var e,r=t.frag,a=t.part,n=t.payload,i=this.levels;if(i){var s=i[r.level],o=s.details;if(o){var l=s.videoCodec,c=o.PTSKnown||!o.live,u=null===(e=r.initSegment)||void 0===e?void 0:e.data,d=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new Qt(this.hls,L.b.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=a?a.index:-1,f=-1!==p,m=new ct(r.level,r.sn,r.stats.chunkCount,n.byteLength,p,f),y=this.initPTS[r.cc];h.push(n,u,d,l,r,a,o.totalduration,c,m,y)}else this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},d.onAudioTrackSwitching=function(t,e){var r=this.altAudio,a=!!e.url,n=e.id;if(!a){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var s=this.fragCurrent;null!=s&&s.loader&&(this.log("Switching to main audio track, cancel main fragment load"),s.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;r&&o.trigger(i.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:n})}},d.onAudioTrackSwitched=function(t,e){var r=e.id,a=!!this.hls.audioTracks[r].url;if(a){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=a,this.tick()},d.onBufferCreated=function(t,e){var r,a,n=e.tracks,i=!1;for(var s in n){var o=n[s];if("main"===o.id){if(a=s,r=o,"video"===s){var l=n[s];l&&(this.videoBuffer=l.buffer)}}else i=!0}i&&r?(this.log("Alternate track found, use "+a+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},d.onFragBuffered=function(t,e){var r=e.frag,a=e.part;if(!r||r.type===L.b.MAIN){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(a?" p: "+a.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Ut&&(this.state=Ot));var n=a?a.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,a)}},d.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(L.b.MAIN,e);break;case s.a.LEVEL_LOAD_ERROR:case s.a.LEVEL_LOAD_TIMEOUT:this.state!==Ht&&(e.fatal?(this.warn(""+e.details),this.state=Ht):e.levelRetry||this.state!==zt||(this.state=Ot));break;case s.a.BUFFER_FULL_ERROR:if("main"===e.parent&&(this.state===Nt||this.state===Ut)){var r=!0,a=this.getFwdBufferInfo(this.media,L.b.MAIN);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},d.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){var r=lt.getBuffered(t);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this.seekToStartPos()):e.poll(this.lastCurrentTime),this.lastCurrentTime=t.currentTime}},d.onFragLoadEmergencyAborted=function(){this.state=Ot,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},d.onBufferFlushed=function(t,e){var r=e.type;if(r!==c.a.AUDIO||this.audioOnly&&!this.altAudio){var a=(r===c.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(a,r,L.b.MAIN)}},d.onLevelsUpdated=function(t,e){this.levels=e.levels},d.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},d.seekToStartPos=function(){var t=this.media,e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void o.b.log("could not seek to "+r+", already seeking at "+e);var a=lt.getBuffered(t),n=(a.length?a.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(o.b.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r}},d._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},d._loadBitrateTestFrag=function(t){var e=this;this._doFragLoad(t).then((function(r){var a=e.hls;if(r&&!a.nextLoadLevel&&!e.fragContextChanged(t)){e.fragLoadError=0,e.state=Ot,e.startFragRequested=!1,e.bitrateTest=!1;var n=t.stats;n.parsing.start=n.parsing.end=n.buffering.start=n.buffering.end=self.performance.now(),a.trigger(i.a.FRAG_LOADED,r)}}))},d._handleTransmuxComplete=function(t){var e,r="main",a=this.hls,s=t.remuxResult,o=t.chunkMeta,l=this.getCurrentContext(o);if(!l)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(o.level);var u=l.frag,d=l.part,h=l.level,p=s.video,f=s.text,m=s.id3,y=s.initSegment,v=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(u)){if(this.state=Nt,y){y.tracks&&(this._bufferInitSegment(h,y.tracks,u,o),a.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:r,tracks:y.tracks}));var g=y.initPTS,b=y.timescale;Object(n.a)(g)&&(this.initPTS[u.cc]=g,a.trigger(i.a.INIT_PTS_FOUND,{frag:u,id:r,initPTS:g,timescale:b}))}if(p&&!1!==s.independent){if(h.details){var w=p.startPTS,k=p.endPTS,T=p.startDTS,x=p.endDTS;if(d)d.elementaryStreams[p.type]={startPTS:w,endPTS:k,startDTS:T,endDTS:x};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){if(this.getLoadPosition()+this.config.maxBufferHole<w)return void this.backtrack(u);u.setElementaryStreamInfo(p.type,u.start,k,u.start,x,!0)}u.setElementaryStreamInfo(p.type,w,k,T,x),this.bufferFragmentData(p,u,d,o)}}else if(!1===s.independent)return void this.backtrack(u);if(v){var E=v.startPTS,S=v.endPTS,_=v.startDTS,L=v.endDTS;d&&(d.elementaryStreams[c.a.AUDIO]={startPTS:E,endPTS:S,startDTS:_,endDTS:L}),u.setElementaryStreamInfo(c.a.AUDIO,E,S,_,L),this.bufferFragmentData(v,u,d,o)}if(null!=m&&null!==(e=m.samples)&&void 0!==e&&e.length){var A={frag:u,id:r,samples:m.samples};a.trigger(i.a.FRAG_PARSING_METADATA,A)}if(f){var C={frag:u,id:r,samples:f.samples};a.trigger(i.a.FRAG_PARSING_USERDATA,C)}}},d._bufferInitSegment=function(t,e,r,a){var n=this;if(this.state===Nt){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var s=e.audio,o=e.video,l=e.audiovideo;if(s){var c=t.audioCodec,u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===u.indexOf("firefox")&&(c="mp4a.40.5")),-1!==u.indexOf("android")&&"audio/mpeg"!==s.container&&(c="mp4a.40.2",this.log("Android: force audio codec to "+c)),t.audioCodec&&t.audioCodec!==c&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+c+'"'),s.levelCodec=c,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(t.audioCodec||"")+"/"+s.codec+"]")}o&&(o.levelCodec=t.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+o.codec+"]")),l&&this.log("Init audiovideo buffer, container:"+l.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+l.codec+"]"),this.hls.trigger(i.a.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var s=e[t].initSegment;null!=s&&s.byteLength&&n.hls.trigger(i.a.BUFFER_APPENDING,{type:t,data:s,frag:r,part:null,chunkMeta:a,parent:r.type})})),this.tick()}},d.backtrack=function(t){this.couldBacktrack=!0,this.resetTransmuxer(),this.flushBufferGap(t);var e=this.fragmentTracker.backtrack(t);this.fragPrevious=null,this.nextLoadPosition=t.start,e?this.resetFragmentLoading(t):this.state=jt},d.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(lt.isBuffered(t,r)?e=this.getAppendedFrag(r):lt.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){var a=this.fragPlaying,n=e.level;a&&e.sn===a.sn&&a.level===n&&e.urlId===a.urlId||(this.hls.trigger(i.a.FRAG_CHANGED,{frag:e}),a&&a.level===n||this.hls.trigger(i.a.LEVEL_SWITCHED,{level:n}),this.fragPlaying=e)}}},l=a,(u=[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;if(t){var e=this.getAppendedFrag(t.currentTime);return this.followingBufferedFrag(e)}return null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&te(l.prototype,u),a}(Yt),ae=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),ne=function(){function t(t,e,r){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ae(t),this.fast_=new ae(e)}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,a=this.fast_;this.slow_.halfLife!==t&&(this.slow_=new ae(t,r.getEstimate(),r.getTotalWeight())),this.fast_.halfLife!==e&&(this.fast_=new ae(e,a.getEstimate(),a.getTotalWeight()))},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,a=8*e/r;this.fast_.sample(r,a),this.slow_.sample(r,a)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function ie(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var se=function(){function t(t){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new ne(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e,r,a=t.prototype;return a.registerListeners=function(){var t=this.hls;t.on(i.a.FRAG_LOADING,this.onFragLoading,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.ERROR,this.onError,this)},a.unregisterListeners=function(){var t=this.hls;t.off(i.a.FRAG_LOADING,this.onFragLoading,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.ERROR,this.onError,this)},a.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},a.onFragLoading=function(t,e){var r,a=e.frag;a.type===L.b.MAIN&&(this.timer||(this.fragCurrent=a,this.partCurrent=null!=(r=e.part)?r:null,this.timer=self.setInterval(this.onCheck,100)))},a.onLevelLoaded=function(t,e){var r=this.hls.config;e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},a._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,a=r.autoLevelEnabled,s=r.config,l=r.media;if(t&&l){var c=e?e.stats:t.stats,u=e?e.duration:t.duration;if(c.aborted)return o.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(a&&!l.paused&&l.playbackRate&&l.readyState){var d=performance.now()-c.loading.start,h=Math.abs(l.playbackRate);if(!(d<=500*u/h)){var p=r.levels,f=r.minAutoLevel,m=p[t.level],y=c.total||Math.max(c.loaded,Math.round(u*m.maxBitrate/8)),v=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/d),g=(y-c.loaded)/v,b=l.currentTime,w=(lt.bufferInfo(l,b,s.maxBufferHole).end-b)/h;if(!(w>=2*u/h||g<=w)){var k,T=Number.POSITIVE_INFINITY;for(k=t.level-1;k>f&&!((T=u*p[k].maxBitrate/(6.4*v))<w);k--);if(!(T>=g)){var x=this.bwEstimator.getEstimate();o.b.warn("Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+k+"\n      Current BW estimate: "+(Object(n.a)(x)?(x/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+g.toFixed(3)+" s\n      Estimated load time for the next fragment: "+T.toFixed(3)+" s\n      Time to underbuffer: "+w.toFixed(3)+" s"),r.nextLoadLevel=k,this.bwEstimator.sample(d,c.loaded),this.clearTimer(),t.loader&&(this.fragCurrent=this.partCurrent=null,t.loader.abort()),r.trigger(i.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:c})}}}}}},a.onFragLoaded=function(t,e){var r=e.frag,a=e.part;if(r.type===L.b.MAIN&&Object(n.a)(r.sn)){var s=a?a.stats:r.stats,o=a?a.duration:r.duration;if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var l=this.hls.levels[r.level],c=(l.loaded?l.loaded.bytes:0)+s.loaded,u=(l.loaded?l.loaded.duration:0)+o;l.loaded={bytes:c,duration:u},l.realBitrate=Math.round(8*c/u)}if(r.bitrateTest){var d={stats:s,frag:r,part:a,id:r.type};this.onFragBuffered(i.a.FRAG_BUFFERED,d),r.bitrateTest=!1}}},a.onFragBuffered=function(t,e){var r=e.frag,a=e.part,n=a?a.stats:r.stats;if(!n.aborted&&r.type===L.b.MAIN&&"initSegment"!==r.sn){var i=n.parsing.end-n.loading.start;this.bwEstimator.sample(i,n.loaded),n.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},a.onError=function(t,e){switch(e.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},a.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},a.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,a=r.maxAutoLevel,n=r.config,i=r.minAutoLevel,s=r.media,l=e?e.duration:t?t.duration:0,c=s?s.currentTime:0,u=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,d=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=(lt.bufferInfo(s,c,n.maxBufferHole).end-c)/u,p=this.findBestLevel(d,i,a,h,n.abrBandWidthFactor,n.abrBandWidthUpFactor);if(p>=0)return p;o.b.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,m=n.abrBandWidthFactor,y=n.abrBandWidthUpFactor;if(!h){var v=this.bitrateTestDelay;v&&(f=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-v,o.b.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),m=y=1)}return p=this.findBestLevel(d,i,a,h+f,m,y),Math.max(p,0)},a.findBestLevel=function(t,e,r,a,n,i){for(var s,l=this.fragCurrent,c=this.partCurrent,u=this.lastLoadedFragLevel,d=this.hls.levels,h=d[u],p=!(null==h||null===(s=h.details)||void 0===s||!s.live),f=null==h?void 0:h.codecSet,m=c?c.duration:l?l.duration:0,y=r;y>=e;y--){var v=d[y];if(v&&(!f||v.codecSet===f)){var g,b=v.details,w=(c?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||m;g=y<=u?n*t:i*t;var k=d[y].maxBitrate,T=k*w/g;if(o.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+y+"/"+Math.round(g)+"/"+k+"/"+w+"/"+a+"/"+T),g>k&&(!T||p&&!this.bitrateTestDelay||T<a))return y}}return-1},e=t,(r=[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var r=this.getNextABRAutoLevel();return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}}])&&ie(e.prototype,r),t}(),oe=r(13);function le(){return(le=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function ce(t,e){return(ce=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ue=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[audio-stream-controller]")||this).videoBuffer=null,a.videoTrackCC=-1,a.waitingVideoCC=-1,a.audioSwitch=!1,a.trackId=-1,a.waitingData=null,a.mainDetails=null,a.bufferFlushed=!1,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,ce(e,r);var l=a.prototype;return l.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},l._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.BUFFER_RESET,this.onBufferReset,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.on(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},l._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(i.a.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.BUFFER_RESET,this.onBufferReset,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),t.off(i.a.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.a.FRAG_BUFFERED,this.onFragBuffered,this)},l.onInitPtsFound=function(t,e){var r=e.frag,a=e.id,n=e.initPTS;if("main"===a){var i=r.cc;this.initPTS[r.cc]=n,this.log("InitPTS for cc: "+i+" found from main: "+n),this.videoTrackCC=i,this.state===Gt&&this.tick()}},l.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=Dt);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Ot):(this.loadedmetadata=!1,this.state=Bt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},l.doTick=function(){switch(this.state){case Ot:this.doTickIdle();break;case Bt:var e,r=this.levels,a=this.trackId,n=null==r||null===(e=r[a])||void 0===e?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=Gt}break;case Ft:var i,s=performance.now(),l=this.retryDate;(!l||s>=l||null!==(i=this.media)&&void 0!==i&&i.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=Ot);break;case Gt:var c=this.waitingData;if(c){var u=c.frag,d=c.part,h=c.cache,p=c.complete;if(void 0!==this.initPTS[u.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Mt;var f={frag:u,part:d,payload:h.flush(),networkDetails:null};this._handleFragmentLoadProgress(f),p&&t.prototype._handleFragmentLoadComplete.call(this,f)}else if(this.videoTrackCC!==this.waitingVideoCC)o.b.log("Waiting fragment cc ("+u.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var m=this.getLoadPosition(),y=lt.bufferInfo(this.mediaBuffer,m,this.config.maxBufferHole);vt(y.end,this.config.maxFragLookUpTolerance,u)<0&&(o.b.log("Waiting fragment cc ("+u.cc+") @ "+u.start+" cancelled because another fragment at "+y.end+" is needed"),this.clearWaitingFragment())}}else this.state=Ot}this.onTickEnd()},l.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Ot)},l.onTickEnd=function(){var t=this.media;if(t&&t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length&&(this.loadedmetadata=!0),this.lastCurrentTime=t.currentTime}},l.doTickIdle=function(){var t,e,r=this.hls,a=this.levels,n=this.media,s=this.trackId,o=r.config;if(a&&a[s]&&(n||!this.startFragRequested&&o.startFragPrefetch)){var l=a[s].details;if(!l||l.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(l))this.state=Bt;else{this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.a.AUDIO,L.b.AUDIO));var u=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,L.b.AUDIO);if(null!==u){var d=u.len,h=this.getMaxBufferLength(),p=this.audioSwitch;if(!(d>=h)||p){if(!p&&this._streamEnded(u,l))return r.trigger(i.a.BUFFER_EOS,{type:"audio"}),void(this.state=Vt);var f=l.fragments[0].start,m=u.end;if(p){var y=this.getLoadPosition();m=y,l.PTSKnown&&y<f&&(u.end>f||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=f+.05)}var v=this.getNextFragment(m,l);v?"identity"!==(null===(t=v.decryptdata)||void 0===t?void 0:t.keyFormat)||null!==(e=v.decryptdata)&&void 0!==e&&e.key?this.loadFragment(v,l,m):this.loadKey(v,l):this.bufferFlushed=!0}}}}},l.getMaxBufferLength=function(){var e=t.prototype.getMaxBufferLength.call(this),r=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,L.b.MAIN);return null===r?e:Math.max(e,r.len)},l.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},l.onAudioTracksUpdated=function(t,e){var r=e.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(t){return new H(t)}))},l.onAudioTrackSwitching=function(t,e){var r=!!e.url;this.trackId=e.id;var a=this.fragCurrent;null!=a&&a.loader&&a.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.audioSwitch=!0,this.state=Ot):this.state=Dt,this.tick()},l.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},l.onLevelLoaded=function(t,e){this.mainDetails=e.details},l.onAudioTrackLoaded=function(t,e){var r,a=this.levels,n=e.details,i=e.id;if(a){this.log("Track "+i+" loaded ["+n.startSN+","+n.endSN+"],duration:"+n.totalduration);var s=a[i],o=0;if(n.live||null!==(r=s.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(n.fragments[0]||(n.deltaUpdateFailed=!0),n.deltaUpdateFailed||!l)return;!s.details&&n.hasProgramDateTime&&l.hasProgramDateTime?(ft(n,l),o=n.fragments[0].start):o=this.alignPlaylists(n,s.details)}s.details=n,this.levelLastLoaded=i,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(s.details,o),this.state!==Bt||this.waitForCdnTuneIn(n)||(this.state=Ot),this.tick()}else this.warn("Audio tracks were reset while loading level "+i)},l._handleFragmentLoadProgress=function(t){var e,r=t.frag,a=t.part,n=t.payload,i=this.config,s=this.trackId,l=this.levels;if(l){var c=l[s],u=c.details,d=i.defaultAudioCodec||c.audioCodec||"mp4a.40.2",h=this.transmuxer;h||(h=this.transmuxer=new Qt(this.hls,L.b.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var p=this.initPTS[r.cc],f=null===(e=r.initSegment)||void 0===e?void 0:e.data;if(void 0!==p){var m=a?a.index:-1,y=-1!==m,v=new ct(r.level,r.sn,r.stats.chunkCount,n.byteLength,m,y);h.push(n,f,d,"",r,a,u.totalduration,!1,v,p)}else o.b.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:a,cache:new oe.a,complete:!1}).cache.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=Gt}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},l._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},l.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},l.onBufferCreated=function(t,e){var r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},l.onFragBuffered=function(t,e){var r=e.frag,a=e.part;r.type===L.b.AUDIO&&(this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(a?" p: "+a.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==r.sn&&(this.fragPrevious=r,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(r,a)))},l.onError=function(e,r){switch(r.details){case s.a.FRAG_LOAD_ERROR:case s.a.FRAG_LOAD_TIMEOUT:case s.a.KEY_LOAD_ERROR:case s.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(L.b.AUDIO,r);break;case s.a.AUDIO_TRACK_LOAD_ERROR:case s.a.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==Ht&&this.state!==Dt&&(this.state=r.fatal?Ht:Ot,this.warn(r.details+" while loading frag, switching to "+this.state+" state"));break;case s.a.BUFFER_FULL_ERROR:if("audio"===r.parent&&(this.state===Nt||this.state===Ut)){var a=!0,n=this.getFwdBufferInfo(this.mediaBuffer,L.b.AUDIO);n&&n.len>.5&&(a=!this.reduceMaxBufferLength(n.len)),a&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},l.onBufferFlushed=function(t,e){e.type===c.a.AUDIO&&(this.bufferFlushed=!0)},l._handleTransmuxComplete=function(t){var e,r="audio",a=this.hls,n=t.remuxResult,s=t.chunkMeta,o=this.getCurrentContext(s);if(!o)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetLiveStartWhenNotLoaded(s.level);var l=o.frag,u=o.part,d=n.audio,h=n.text,p=n.id3,f=n.initSegment;if(!this.fragContextChanged(l)){if(this.state=Nt,this.audioSwitch&&d&&this.completeAudioSwitch(),null!=f&&f.tracks&&(this._bufferInitSegment(f.tracks,l,s),a.trigger(i.a.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:r,tracks:f.tracks})),d){var m=d.startPTS,y=d.endPTS,v=d.startDTS,g=d.endDTS;u&&(u.elementaryStreams[c.a.AUDIO]={startPTS:m,endPTS:y,startDTS:v,endDTS:g}),l.setElementaryStreamInfo(c.a.AUDIO,m,y,v,g),this.bufferFragmentData(d,l,u,s)}if(null!=p&&null!==(e=p.samples)&&void 0!==e&&e.length){var b=le({frag:l,id:r},p);a.trigger(i.a.FRAG_PARSING_METADATA,b)}if(h){var w=le({frag:l,id:r},h);a.trigger(i.a.FRAG_PARSING_USERDATA,w)}}},l._bufferInitSegment=function(t,e,r){if(this.state===Nt){t.video&&delete t.video;var a=t.audio;if(a){a.levelCodec=a.codec,a.id="audio",this.log("Init audio buffer, container:"+a.container+", codecs[parsed]=["+a.codec+"]"),this.hls.trigger(i.a.BUFFER_CODECS,t);var n=a.initSegment;if(null!=n&&n.byteLength){var s={type:"audio",frag:e,part:null,chunkMeta:r,parent:e.type,data:n};this.hls.trigger(i.a.BUFFER_APPENDING,s)}this.tick()}}},l.loadFragment=function(e,r,a){var i=this.fragmentTracker.getState(e);this.fragCurrent=e,(this.audioSwitch||i===tt.NOT_LOADED||i===tt.PARTIAL)&&("initSegment"===e.sn?this._loadInitSegment(e):r.live&&!Object(n.a)(this.initPTS[e.cc])?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=Gt):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,a)))},l.completeAudioSwitch=function(){var e=this.hls,r=this.media,a=this.trackId;r&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,e.trigger(i.a.AUDIO_TRACK_SWITCHED,{id:a})},a}(Yt);function de(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.trackName="",r.selectDefaultTrack=!0,r.registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,he(e,r);var n,o,l=a.prototype;return l.registerListeners=function(){var t=this.hls;t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(i.a.ERROR,this.onError,this)},l.unregisterListeners=function(){var t=this.hls;t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(i.a.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(i.a.ERROR,this.onError,this)},l.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,t.prototype.destroy.call(this)},l.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},l.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},l.onAudioTrackLoaded=function(t,e){var r=e.id,a=e.details,n=this.tracksInGroup[r];if(n){var i=n.details;n.details=e.details,this.log("audioTrack "+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,i))}else this.warn("Invalid audio track id "+r)},l.onLevelLoading=function(t,e){this.switchLevel(e.level)},l.onLevelSwitching=function(t,e){this.switchLevel(e.level)},l.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];if(this.groupId!==r){this.groupId=r;var a=this.tracks.filter((function(t){return!r||t.groupId===r}));this.selectDefaultTrack&&!a.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=a;var n={audioTracks:a};this.log("Updating audio tracks, "+a.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(i.a.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack()}}},l.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===L.a.AUDIO_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},l.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var r=e[this.trackId];this.log("Now switching to audio-track index "+t);var a=e[t],n=a.id,s=a.groupId,o=void 0===s?"":s,l=a.name,c=a.type,u=a.url;if(this.trackId=t,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(i.a.AUDIO_TRACK_SWITCHING,{id:n,groupId:o,name:l,type:c,url:u}),!a.details||a.details.live){var d=this.switchParams(a.url,null==r?void 0:r.details);this.loadPlaylist(d)}}},l.selectInitialTrack=function(){this.tracksInGroup;var t=this.trackName,e=this.findTrackId(t)||this.findTrackId();-1!==e?this.setAudioTrack(e):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},l.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var a=e[r];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},l.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,a=e.groupId,n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist for id: "+r),this.clearTimer(),this.hls.trigger(i.a.AUDIO_TRACK_LOADING,{url:n,id:r,groupId:a,deliveryDirectives:t||null})}},n=a,(o=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}])&&de(n.prototype,o),a}(Z);function fe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ye=function(t){var e,r;function a(e,r){var a;return(a=t.call(this,e,r,"[subtitle-stream-controller]")||this).levels=[],a.currentTrackId=-1,a.tracksBuffered=[],a.mainDetails=null,a._registerListeners(),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,me(e,r);var n,s,o=a.prototype;return o.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},o._registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.on(i.a.ERROR,this.onError,this),t.on(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(i.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},o._unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.LEVEL_LOADED,this.onLevelLoaded,this),t.off(i.a.ERROR,this.onError,this),t.off(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.a.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(i.a.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)},o.startLoad=function(){this.stopLoad(),this.state=Ot,this.setInterval(500),this.tick()},o.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},o.onLevelLoaded=function(t,e){this.mainDetails=e.details},o.onSubtitleFragProcessed=function(t,e){var r=e.frag,a=e.success;if(this.fragPrevious=r,this.state=Ot,a){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,s=r.start,o=0;o<n.length;o++)if(s>=n[o].start&&s<=n[o].end){i=n[o];break}var l=r.start+r.duration;i?i.end=l:(i={start:s,end:l},n.push(i)),this.fragmentTracker.fragBuffered(r)}}},o.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset;if(0===r&&a!==Number.POSITIVE_INFINITY){var n=this.currentTrackId,i=this.levels;if(!i.length||!i[n]||!i[n].details)return;var s=a-i[n].details.targetduration;if(s<=0)return;e.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=s)t.shift();else{if(!(t[e].start<s))break;t[e].start=s,e++}})),this.fragmentTracker.removeFragmentsInRange(r,s,L.b.SUBTITLE)}},o.onError=function(t,e){var r,a=e.frag;a&&a.type===L.b.SUBTITLE&&(null!==(r=this.fragCurrent)&&void 0!==r&&r.loader&&this.fragCurrent.loader.abort(),this.state=Ot)},o.onSubtitleTracksUpdated=function(t,e){var r=this,a=e.subtitleTracks;this.tracksBuffered=[],this.levels=a.map((function(t){return new H(t)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(t){r.tracksBuffered[t.id]=[]})),this.mediaBuffer=null},o.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},o.onSubtitleTrackLoaded=function(t,e){var r,a=e.details,n=e.id,i=this.currentTrackId,s=this.levels;if(s.length){var o=s[i];if(!(n>=s.length||n!==i)&&o){if(this.mediaBuffer=this.mediaBufferTimeRanges,a.live||null!==(r=o.details)&&void 0!==r&&r.live){var l=this.mainDetails;if(a.deltaUpdateFailed||!l)return;var c=l.fragments[0];o.details?0===this.alignPlaylists(a,o.details)&&c&&X(a,c.start):a.hasProgramDateTime&&l.hasProgramDateTime?ft(a,l):c&&X(a,c.start)}o.details=a,this.levelLastLoaded=n,this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Ot&&(yt(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}}},o._handleFragmentLoadComplete=function(t){var e=t.frag,r=t.payload,a=e.decryptdata,n=this.hls;if(!this.fragContextChanged(e)&&r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).then((function(t){var r=performance.now();n.trigger(i.a.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:s,tdecrypt:r}})}))}},o.doTick=function(){if(this.media){if(this.state===Ot){var t,e=this.currentTrackId,r=this.levels;if(!r.length||!r[e]||!r[e].details)return;var a=r[e].details,n=a.targetduration,i=this.config,s=this.media,o=lt.bufferedInfo(this.mediaBufferTimeRanges,s.currentTime-n,i.maxBufferHole),l=o.end;if(o.len>this.getMaxBufferLength()+n)return;var c,u=a.fragments,d=u.length,h=a.edge,p=this.fragPrevious;l<h?!(c=yt(p,u,l,i.maxFragLookUpTolerance))&&p&&p.start<u[0].start&&(c=u[0]):c=u[d-1],null!==(t=c)&&void 0!==t&&t.encrypted?this.loadKey(c,a):c&&this.fragmentTracker.getState(c)===tt.NOT_LOADED&&this.loadFragment(c,a,l)}}else this.state=Ot},o.loadFragment=function(e,r,a){this.fragCurrent=e,t.prototype.loadFragment.call(this,e,r,a)},n=a,(s=[{key:"mediaBufferTimeRanges",get:function(){return this.tracksBuffered[this.currentTrackId]||[]}}])&&fe(n.prototype,s),a}(Yt);function ve(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function be(t){for(var e=[],r=0;r<t.length;r++){var a=t[r];"subtitles"===a.kind&&a.label&&e.push(t[r])}return e}var we,ke=function(t){var e,r;function a(e){var r;return(r=t.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r.subtitleDisplay=!0,r.registerListeners(),r}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,ge(e,r);var n,s,o=a.prototype;return o.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},o.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.on(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(i.a.ERROR,this.onError,this)},o.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.LEVEL_LOADING,this.onLevelLoading,this),t.off(i.a.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(i.a.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(i.a.ERROR,this.onError,this)},o.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},o.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},o.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),be(this.media.textTracks).forEach((function(t){O(t)})),this.subtitleTrack=-1,this.media=null)},o.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},o.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},o.onSubtitleTrackLoaded=function(t,e){var r=e.id,a=e.details,n=this.trackId,i=this.tracksInGroup[n];if(i){var s=i.details;i.details=e.details,this.log("subtitle track "+r+" loaded ["+a.startSN+"-"+a.endSN+"]"),r===this.trackId&&(this.retryCount=0,this.playlistLoaded(r,e,s))}else this.warn("Invalid subtitle track id "+r)},o.onLevelLoading=function(t,e){this.switchLevel(e.level)},o.onLevelSwitching=function(t,e){this.switchLevel(e.level)},o.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var r=e.textGroupIds[e.urlId];if(this.groupId!==r){var a=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,n=this.tracks.filter((function(t){return!r||t.groupId===r}));this.tracksInGroup=n;var s=this.findTrackId(null==a?void 0:a.name)||this.findTrackId();this.groupId=r;var o={subtitleTracks:n};this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(i.a.SUBTITLE_TRACKS_UPDATED,o),-1!==s&&this.setSubtitleTrack(s,a)}}},o.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var a=e[r];if((!this.selectDefaultTrack||a.default)&&(!t||t===a.name))return a.id}return-1},o.onError=function(e,r){t.prototype.onError.call(this,e,r),!r.fatal&&r.context&&r.context.type===L.a.SUBTITLE_TRACK&&r.context.id===this.trackId&&r.context.groupId===this.groupId&&this.retryLoadingOrFail(r)},o.loadPlaylist=function(t){var e=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(e)){var r=e.id,a=e.groupId,n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+r),this.hls.trigger(i.a.SUBTITLE_TRACK_LOADING,{url:n,id:r,groupId:a,deliveryDirectives:t||null})}},o.toggleTrackModes=function(t){var e=this,r=this.media,a=this.subtitleDisplay,n=this.trackId;if(r){var i=be(r.textTracks),s=i.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(i).forEach((function(t){t.mode="disabled"}));else{var o=s[n];o&&(o.mode="disabled")}var l=s[t];l&&(l.mode=a?"showing":"hidden")}},o.setSubtitleTrack=function(t,e){var r,a=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!==(r=a[t])&&void 0!==r&&r.details)||t<-1||t>=a.length)){this.clearTimer();var n=a[t];if(this.log("Switching to subtitle track "+t),this.trackId=t,n){var s=n.id,o=n.groupId,l=void 0===o?"":o,c=n.name,u=n.type,d=n.url;this.hls.trigger(i.a.SUBTITLE_TRACK_SWITCH,{id:s,groupId:l,name:c,type:u,url:d});var h=this.switchParams(n.url,null==e?void 0:e.details);this.loadPlaylist(h)}else this.hls.trigger(i.a.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},o.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=be(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},n=a,(s=[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}])&&ve(n.prototype,s),a}(Z),Te=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t})),a={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(a,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,a=e[t],n=r[t];if(n.length){var i=n[0];try{i.execute()}catch(e){o.b.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),i.onError(e),a&&a.updating||(n.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}(),xe=qt(),Ee=/([ha]vc.)(?:\.[^.,]+)+/,Se=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.hls,r=e.media,a=e.mediaSource;o.b.log("[buffer-controller]: Media source opened"),r&&(e.updateMediaElementDuration(),t.trigger(i.a.MEDIA_ATTACHED,{media:r})),a&&a.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){o.b.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){o.b.log("[buffer-controller]: Media source ended")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null},e.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.BUFFER_RESET,this.onBufferReset,this),t.on(i.a.BUFFER_APPENDING,this.onBufferAppending,this),t.on(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.a.BUFFER_EOS,this.onBufferEos,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(i.a.FRAG_PARSED,this.onFragParsed,this),t.on(i.a.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.BUFFER_RESET,this.onBufferReset,this),t.off(i.a.BUFFER_APPENDING,this.onBufferAppending,this),t.off(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.a.BUFFER_EOS,this.onBufferEos,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(i.a.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(i.a.FRAG_PARSED,this.onFragParsed,this),t.off(i.a.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Te(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,o.b.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&xe){var a=this.mediaSource=new xe;a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(a),this._objectUrl=r.src}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(o.b.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){o.b.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):o.b.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.a.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var r=t.sourceBuffer[e];try{r&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(r),t.sourceBuffer[e]=void 0)}catch(t){o.b.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var r=this,a=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(a){var n=r.tracks[t];if(n&&"function"==typeof n.buffer.changeType){var i=e[t],s=i.codec,o=i.levelCodec,l=i.container;if((n.levelCodec||n.codec).replace(Ee,"$1")!==(o||s).replace(Ee,"$1")){var c=l+";codecs="+(o||s);r.appendChangeType(t,c)}}}else r.pendingTracks[t]=e[t]})),a||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var r=this,a=this.operationQueue,n={execute:function(){var n=r.sourceBuffer[t];n&&(o.b.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),n.changeType(e)),a.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){o.b.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};a.append(n,t)},e.onBufferAppending=function(t,e){var r=this,a=this.hls,n=this.operationQueue,l=this.tracks,c=e.data,u=e.type,d=e.frag,h=e.part,p=e.chunkMeta,f=p.buffering[u],m=self.performance.now();f.start=m;var y=d.stats.buffering,v=h?h.stats.buffering:null;0===y.start&&(y.start=m),v&&0===v.start&&(v.start=m);var g=l.audio,b="audio"===u&&1===p.id&&"audio/mpeg"===(null==g?void 0:g.container),w={execute:function(){if(f.executeStart=self.performance.now(),b){var t=r.sourceBuffer[u];if(t){var e=d.start-t.timestampOffset;Math.abs(e)>=.1&&(o.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+d.start+" (delta: "+e+") sn: "+d.sn+")"),t.timestampOffset=d.start)}}r.appendExecutor(c,u)},onStart:function(){},onComplete:function(){var t=self.performance.now();f.executeEnd=f.end=t,0===y.first&&(y.first=t),v&&0===v.first&&(v.first=t);var e=r.sourceBuffer,a={};for(var n in e)a[n]=lt.getBuffered(e[n]);r.appendError=0,r.hls.trigger(i.a.BUFFER_APPENDED,{type:u,frag:d,part:h,chunkMeta:p,parent:d.type,timeRanges:a})},onError:function(t){o.b.error("[buffer-controller]: Error encountered while trying to append to the "+u+" SourceBuffer",t);var e={type:s.b.MEDIA_ERROR,parent:d.type,details:s.a.BUFFER_APPEND_ERROR,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=s.a.BUFFER_FULL_ERROR:(r.appendError++,e.details=s.a.BUFFER_APPEND_ERROR,r.appendError>a.config.appendErrorMaxRetry&&(o.b.error("[buffer-controller]: Failed "+a.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),a.trigger(i.a.ERROR,e)}};n.append(w,u)},e.onBufferFlushing=function(t,e){var r=this,a=this.operationQueue,n=function(t){return{execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(i.a.BUFFER_FLUSHED,{type:t})},onError:function(e){o.b.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?a.append(n(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){a.append(n(t),t)}))},e.onFragParsed=function(t,e){var r=this,a=e.frag,n=e.part,s=[],l=n?n.elementaryStreams:a.elementaryStreams;l[c.a.AUDIOVIDEO]?s.push("audiovideo"):(l[c.a.AUDIO]&&s.push("audio"),l[c.a.VIDEO]&&s.push("video")),0===s.length&&o.b.warn("Fragments must have at least one ElementaryStreamType set. type: "+a.type+" level: "+a.level+" sn: "+a.sn),this.blockBuffers((function(){var t=self.performance.now();a.stats.buffering.end=t,n&&(n.stats.buffering.end=t);var e=n?n.stats:a.stats;r.hls.trigger(i.a.FRAG_BUFFERED,{frag:a,part:n,stats:e,id:a.type})}),s)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,a){var n=r.sourceBuffer[a];return e.type&&e.type!==a||n&&!n.ended&&(n.ended=!0,o.b.log("[buffer-controller]: "+a+" sourceBuffer now EOS")),t&&!(n&&!n.ended)}),!0)&&this.blockBuffers((function(){var t=r.mediaSource;t&&"open"===t.readyState&&t.endOfStream()}))},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,a=this.sourceBuffer;if(r&&null!==e){var s=this.getSourceBufferTypes();if(s.length){var o=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(Object(n.a)(o)&&!(o<0)){var l=r.currentTime,c=e.levelTargetDuration,u=Math.max(o,c),d=Math.floor(l/c)*c-u;s.forEach((function(r){var n=a[r];if(n){var s=lt.getBuffered(n);s.length>0&&d>s.start(0)&&(t.trigger(i.a.BACK_BUFFER_REACHED,{bufferEnd:d}),e.live&&t.trigger(i.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),t.trigger(i.a.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:r}))}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,a=this.mediaSource,i=t.fragments[0].start+t.totalduration,s=r.duration,l=Object(n.a)(a.duration)?a.duration:0;t.live&&e.config.liveDurationInfinity?(o.b.log("[buffer-controller]: Media Source duration is set to Infinity"),a.duration=1/0,this.updateSeekableRange(t)):(i>l&&i>s||!Object(n.a)(s))&&(o.b.log("[buffer-controller]: Updating Media Source duration to "+i.toFixed(3)),a.duration=i)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var a=Math.max(0,r[0].start),n=Math.max(a,a+t.totalduration);e.setLiveSeekableRange(a,n)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,a=Object.keys(r).length;if(a&&!t||2===a){this.createSourceBuffers(r),this.pendingTracks={};var n=this.getSourceBufferTypes();if(0===n.length)return void this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});n.forEach((function(t){e.executeNext(t)}))}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var a=0;for(var n in t)if(!e[n]){var l=t[n];if(!l)throw Error("source buffer exists for track "+n+", however track does not");var c=l.levelCodec||l.codec,u=l.container+";codecs="+c;o.b.log("[buffer-controller]: creating sourceBuffer("+u+")");try{var d=e[n]=r.addSourceBuffer(u),h=n;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[n]={buffer:d,codec:c,container:l.container,levelCodec:l.levelCodec,id:l.id},a++}catch(t){o.b.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:u})}}a&&this.hls.trigger(i.a.BUFFER_CREATED,{tracks:this.tracks})},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){o.b.error("[buffer-controller]: "+t+" SourceBuffer error",e),this.hls.trigger(i.a.ERROR,{type:s.b.MEDIA_ERROR,details:s.a.BUFFER_APPENDING_ERROR,fatal:!1});var r=this.operationQueue.current(t);r&&r.onError(e)},e.removeExecutor=function(t,e,r){var a=this.media,i=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer[t];if(!a||!i||!l)return o.b.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(t);var c=Object(n.a)(a.duration)?a.duration:1/0,u=Object(n.a)(i.duration)?i.duration:1/0,d=Math.max(0,e),h=Math.min(r,c,u);h>d?(o.b.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+t+" SourceBuffer"),l.remove(d,h)):s.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.operationQueue,a=this.sourceBuffer[e];if(!a)return o.b.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);a.ended=!1,a.appendBuffer(t)},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return o.b.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve(t);var a=this.operationQueue,n=e.map((function(t){return a.appendBlocker(t)}));Promise.all(n).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];e&&e.updating||a.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var a=this.sourceBuffer[t];if(a){var n=r.bind(this,t);this.listeners[t].push({event:e,listener:n}),a.addEventListener(e,n)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}(),_e={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Le=function(t){var e=t;return _e.hasOwnProperty(t)&&(e=_e[t]),String.fromCharCode(e)},Ae={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Ce={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Re={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Ie={25:2,26:4,29:6,30:8,31:10,27:13,28:15},De=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(t){t[t.ERROR=0]="ERROR",t[t.TEXT=1]="TEXT",t[t.WARNING=2]="WARNING",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t[t.DATA=3]="DATA"}(we||(we={}));var Oe=function(){function t(){this.time=null,this.verboseLevel=we.ERROR}return t.prototype.log=function(t,e){this.verboseLevel>=t&&o.b.log(this.time+" ["+t+"] "+e)},t}(),Pe=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},Me=function(){function t(t,e,r,a,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=a||"black",this.flash=n||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var a=e[r];t.hasOwnProperty(a)&&(this[a]=t[a])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Fe=function(){function t(t,e,r,a,n,i){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Me(e,r,a,n,i)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Be=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<100;e++)this.chars.push(new Fe);this.logger=t,this.pos=0,this.currPenState=new Me}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<100;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(we.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>100&&(this.logger.log(we.DEBUG,"Too large cursor position "+this.pos),this.pos=100)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){t>=144&&this.backSpace();var e=Le(t);this.pos>=100?this.logger.log(we.ERROR,"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,r=0;r<100;r++){var a=this.chars[r].uchar;" "!==a&&(e=!1),t.push(a)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Ne=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new Be(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,r=0;r<15;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(we.INFO,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(we.INFO,"pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<15;r++)this.rows[r].clear();var a=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var i=n.rows[a].cueStartTime,s=this.logger.time;if(i&&null!==s&&i<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(n.rows[a+o])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var c=t.indent,u=Math.max(c-1,0);l.setCursor(t.indent),t.color=l.chars[u].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(we.INFO,"bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(we.TEXT,this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(we.INFO,"Rolling up")}else this.logger.log(we.DEBUG,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",a=-1,n=0;n<15;n++){var i=this.rows[n].getTextString();i&&(a=n+1,t?e.push("Row "+a+": '"+i+"'"):e.push(i.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),Ue=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Ne(r),this.nonDisplayedMemory=new Ne(r),this.lastOutputScreen=new Ne(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(we.INFO,"MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(we.INFO,r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(we.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(we.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(we.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(we.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(we.INFO,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(we.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(we.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(we.INFO,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(we.INFO,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(we.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(we.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(we.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(this.logger.log(we.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(we.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(we.INFO,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(we.INFO,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}();function je(t,e,r){r.a=t,r.b=e}function Ve(t,e,r){return r.a===t&&r.b===e}var He=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var a=new Oe;this.channels=[null,new Ue(t,e,a),new Ue(t+1,r,a)],this.cmdHistory={a:null,b:null},this.logger=a}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var r,a,n,i=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(a=127&e[s],n=127&e[s+1],0!==a||0!==n){if(this.logger.log(we.DATA,"["+Pe([e[s],e[s+1]])+"] -> ("+Pe([a,n])+")"),(r=this.parseCmd(a,n))||(r=this.parseMidrow(a,n)),r||(r=this.parsePAC(a,n)),r||(r=this.parseBackgroundAttributes(a,n)),!r&&(i=this.parseChars(a,n))){var o=this.currentChannel;o&&o>0?this.channels[o].insertChars(i):this.logger.log(we.WARNING,"No channel found yet. TEXT-MODE?")}r||i||this.logger.log(we.WARNING,"Couldn't parse cleaned data "+Pe([a,n])+" orig: "+Pe([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(Ve(t,e,r))return je(null,null,r),this.logger.log(we.DEBUG,"Repeated command ("+Pe([t,e])+") is dropped"),!0;var a=20===t||21===t||23===t?1:2,n=this.channels[a];return 20===t||21===t||28===t||29===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),je(t,e,r),this.currentChannel=a,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(we.ERROR,"Mismatch channel in midrow parsing"),!1;var a=this.channels[r];return!!a&&(a.ccMIDROW(e),this.logger.log(we.DEBUG,"MIDROW ("+Pe([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var r,a=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(Ve(t,e,a))return je(null,null,a),!0;var n=t<=23?1:2;r=e>=64&&e<=95?1===n?Ae[t]:Re[t]:1===n?Ce[t]:Ie[t];var i=this.channels[n];return!!i&&(i.setPAC(this.interpretPAC(r,e)),je(t,e,a),this.currentChannel=n,!0)},e.interpretPAC=function(t,e){var r,a={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,a.underline=1==(1&r),r<=13?a.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(a.italics=!0,a.color="white"):a.indent=4*Math.floor((r-16)/2),a},e.parseChars=function(t,e){var r,a,n=null,i=null;if(t>=25?(r=2,i=t-8):(r=1,i=t),i>=17&&i<=19?(a=17===i?e+80:18===i?e+112:e+144,this.logger.log(we.INFO,"Special char '"+Le(a)+"' in channel "+r),n=[a]):t>=32&&t<=127&&(n=0===e?[t]:[t,e]),n){var s=Pe(n);this.logger.log(we.DEBUG,"Char codes =  "+s.join(",")),je(t,e,this.cmdHistory)}return n},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var a={};16===t||24===t?(r=Math.floor((e-32)/2),a.background=De[r],e%2==1&&(a.background=a.background+"_semi")):45===e?a.background="transparent":(a.foreground="black",47===e&&(a.underline=!0));var n=t<=23?1:2;return this.channels[n].setBkgData(a),je(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t)}},t}(),Ge=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}(),ze=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var r=e.toLowerCase();return!!~t.indexOf(r)&&r}function a(t){return r(e,t)}function n(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var s in i)t[s]=i[s]}return t}function i(e,i,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var c="",u=!1,d=e,h=i,p=s,f=null,m="",y=!0,v="auto",g="start",b=50,w="middle",k=50,T="middle";Object.defineProperty(o,"id",n({},l,{get:function(){return c},set:function(t){c=""+t}})),Object.defineProperty(o,"pauseOnExit",n({},l,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(o,"startTime",n({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},l,{get:function(){return p},set:function(t){p=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},l,{get:function(){return f},set:function(t){f=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},l,{get:function(){return m},set:function(e){var a=function(e){return r(t,e)}(e);if(!1===a)throw new SyntaxError("An invalid or illegal string was specified.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},l,{get:function(){return y},set:function(t){y=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},l,{get:function(){return v},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},l,{get:function(){return g},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},l,{get:function(){return w},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");w=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},l,{get:function(){return k},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");k=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},l,{get:function(){return T},set:function(t){var e=a(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),o.displayState=void 0}return i.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},i}(),Ye=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function qe(t){function e(t,e,r,a){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(a||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}var We=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,r){for(var a=0;a<r.length;++a)if(e===r[a]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return!1},t}();function Ke(t,e,r,a){var n=a?t.split(a):[t];for(var i in n)if("string"==typeof n[i]){var s=n[i].split(r);2===s.length&&e(s[0],s[1])}}var Xe=new ze(0,0,""),Ze="middle"===Xe.align?"middle":"center";function Je(t,e,r){var a=t;function n(){var e=qe(t);if(null===e)throw new Error("Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){t=t.replace(/^\s+/,"")}if(i(),e.startTime=n(),i(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);t=t.substr(3),i(),e.endTime=n(),i(),function(t,e){var a=new We;Ke(t,(function(t,e){var n;switch(t){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===e){a.set(t,r[i].region);break}break;case"vertical":a.alt(t,e,["rl","lr"]);break;case"line":n=e.split(","),a.integer(t,n[0]),a.percent(t,n[0])&&a.set("snapToLines",!1),a.alt(t,n[0],["auto"]),2===n.length&&a.alt("lineAlign",n[1],["start",Ze,"end"]);break;case"position":n=e.split(","),a.percent(t,n[0]),2===n.length&&a.alt("positionAlign",n[1],["start",Ze,"end","line-left","line-right","auto"]);break;case"size":a.percent(t,e);break;case"align":a.alt(t,e,["start",Ze,"end","left","right"])}}),/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical","");var n=a.get("line","auto");"auto"===n&&-1===Xe.line&&(n=-1),e.line=n,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",Ze);var i=a.get("position","auto");"auto"===i&&50===Xe.position&&(i="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=i}(t,e)}function Qe(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var $e=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new Ye,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=Qe(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var a=t.substr(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.substr(r),a}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var a="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var n=(a=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var i=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(i?i=!1:a=r(),e.state){case"HEADER":/:/.test(a)?Ke(a,(function(t,e){}),/:/):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;if(e.cue=new ze(0,0,""),e.state="CUE",-1===a.indexOf("--\x3e")){e.cue.id=a;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{Je(a,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var s=-1!==a.indexOf("--\x3e");if(!a||s&&(i=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=a;continue;case"BADCUE":a||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){this.onparsingerror&&this.onparsingerror(t)}return this.onflush&&this.onflush(),this},t}(),tr=r(8),er=r(16),rr=/\r\n|\n\r|\n|\r/g,ar=function(t,e,r){return void 0===r&&(r=0),t.substr(r,e.length)===e},nr=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function ir(t,e,r){return nr(t.toString())+nr(e.toString())+nr(r)}function sr(t,e,r,a,i,s,o,l){var c,u=new $e,d=Object(M.f)(new Uint8Array(t)).trim().replace(rr,"\n").split("\n"),h=[],p=Object(tr.a)(e,r),f="00:00.000",m=0,y=0,v=!0,g=!1;u.oncue=function(t){var e=a[i],r=a.ccOffset,n=(m-p)/9e4;if(null!=e&&e.new&&(void 0!==y?r=a.ccOffset=e.start:function(t,e,r){var a=t[e],n=t[a.prevCC];if(!n||!n.new&&a.new)return t.ccOffset=t.presentationOffset=a.start,void(a.new=!1);for(;null!==(i=n)&&void 0!==i&&i.new;){var i;t.ccOffset+=a.start-n.start,a.new=!1,n=t[(a=n).prevCC]}t.presentationOffset=r}(a,i,n)),n&&(r=n-a.presentationOffset),g){var o=t.endTime-t.startTime,l=Object(er.b)(9e4*(t.startTime+r-y),9e4*s)/9e4;t.startTime=l,t.endTime=l+o}var c=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(c)),t.id||(t.id=ir(t.startTime,t.endTime,c)),t.endTime>0&&h.push(t)},u.onparsingerror=function(t){c=t},u.onflush=function(){c?l(c):o(h)},d.forEach((function(t){if(v){if(ar(t,"X-TIMESTAMP-MAP=")){v=!1,g=!0,t.substr(16).split(",").forEach((function(t){ar(t,"LOCAL:")?f=t.substr(6):ar(t,"MPEGTS:")&&(m=parseInt(t.substr(7)))}));try{y=function(t){var e=parseInt(t.substr(-3)),r=parseInt(t.substr(-6,2)),a=parseInt(t.substr(-9,2)),i=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(n.a)(e)&&Object(n.a)(r)&&Object(n.a)(a)&&Object(n.a)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,(e+=6e4*a)+36e5*i}(f)/1e3}catch(t){g=!1,c=t}return}""===t&&(v=!1)}u.parse(t+"\n")})),u.flush()}function or(){return(or=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var lr=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,cr=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,ur={left:"start",center:"center",right:"end",start:"start",end:"end"};function dr(t,e,r,a,n){var i=Object(l.b)(new Uint8Array(t),["mdat"]);if(0!==i.length){var s=i[0],o=Object(M.f)(new Uint8Array(t,s.start,s.end-s.start)),c=Object(tr.c)(e,1,r);try{a(function(t,e){var r=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(a).reduce((function(t,e){return t[e]=r.getAttribute("ttp:"+e)||a[e],t}),{}),i="preserve"!==r.getAttribute("xml:space"),s=pr(hr(r,"styling","style")),o=pr(hr(r,"layout","region")),l=hr(r,"body","[begin]");return[].map.call(l,(function(t){var r=function t(e,r){return[].slice.call(e.childNodes).reduce((function(e,a,n){var i;return"br"===a.nodeName&&n?e+"\n":null!==(i=a.childNodes)&&void 0!==i&&i.length?t(a,r):r?e+a.textContent.trim().replace(/\s+/g," "):e+a.textContent}),"")}(t,i);if(!r||!t.hasAttribute("begin"))return null;var a=yr(t.getAttribute("begin"),n),l=yr(t.getAttribute("dur"),n),c=yr(t.getAttribute("end"),n);if(null===a)throw mr(t);if(null===c){if(null===l)throw mr(t);c=a+l}var u=new ze(a-e,c-e,r);u.id=ir(u.startTime,u.endTime,u.text);var d=o[t.getAttribute("region")],h=s[t.getAttribute("style")];u.position=10,u.size=80;var p=function(t,e){var r="http://www.w3.org/ns/ttml#styling";return["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((function(a,n){var i=fr(e,r,n)||fr(t,r,n);return i&&(a[n]=i),a}),{})}(d,h),f=p.textAlign;if(f){var m=ur[f];m&&(u.lineAlign=m),u.align=f}return or(u,p),u})).filter((function(t){return null!==t}))}(o,c))}catch(t){n(t)}}else n(new Error("Could not parse IMSC1 mdat"))}function hr(t,e,r){var a=t.getElementsByTagName(e)[0];return a?[].slice.call(a.querySelectorAll(r)):[]}function pr(t){return t.reduce((function(t,e){var r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function fr(t,e,r){return t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function mr(t){return new Error("Could not parse ttml timestamp "+t)}function yr(t,e){if(!t)return null;var r=qe(t);return null===r&&(lr.test(t)?r=function(t,e){var r=lr.exec(t),a=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+a/e.frameRate}(t,e):cr.test(t)&&(r=function(t,e){var r=cr.exec(t),a=Number(r[1]);switch(r[2]){case"h":return 3600*a;case"m":return 60*a;case"ms":return 1e3*a;case"f":return a/e.frameRate;case"t":return a/e.tickRate}return a}(t,e))),r}var vr=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new Ge(this,"textTrack1"),r=new Ge(this,"textTrack2"),a=new Ge(this,"textTrack3"),n=new Ge(this,"textTrack4");this.cea608Parser1=new He(1,e,r),this.cea608Parser2=new He(3,a,n)}t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.on(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(i.a.FRAG_LOADING,this.onFragLoading,this),t.on(i.a.FRAG_LOADED,this.onFragLoaded,this),t.on(i.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(i.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(i.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(i.a.MANIFEST_LOADING,this.onManifestLoading,this),t.off(i.a.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(i.a.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(i.a.FRAG_LOADING,this.onFragLoading,this),t.off(i.a.FRAG_LOADED,this.onFragLoaded,this),t.off(i.a.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(i.a.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(i.a.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(i.a.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(i.a.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,r,a,n){for(var s,o,l,c,u=!1,d=n.length;d--;){var h=n[d],p=(s=h[0],o=h[1],l=e,c=r,Math.min(o,c)-Math.max(s,l));if(p>=0&&(h[0]=Math.min(h[0],e),h[1]=Math.max(h[1],r),u=!0,p/(r-e)>.5))return}if(u||n.push([e,r]),this.config.renderTextTracksNatively){var f=this.captionsTracks[t];this.Cues.newCue(f,e,r,a)}else{var m=this.Cues.newCue(null,e,r,a);this.hls.trigger(i.a.CUES_PARSED,{type:"captions",cues:m,track:t})}},e.onInitPtsFound=function(t,e){var r=this,a=e.frag,n=e.id,s=e.initPTS,o=e.timescale,l=this.unparsedVttFrags;"main"===n&&(this.initPTS[a.cc]=s,this.timescale[a.cc]=o),l.length&&(this.unparsedVttFrags=[],l.forEach((function(t){r.onFragLoaded(i.a.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var a=e.textTracks[r];if(a[t])return a}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,r=this.captionsTracks,a=this.media,n=e[t],i=n.label,s=n.languageCode,o=this.getExistingTrack(t);if(o)r[t]=o,O(r[t]),I(r[t],a);else{var l=this.createTextTrack("captions",i,s);l&&(l[t]=!0,r[t]=l)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(i.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},e.createTextTrack=function(t,e,r){var a=this.media;if(a)return a.addTextTrack(t,e,r)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){O(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)O(e[r])}},e.onSubtitleTracksUpdated=function(t,e){var r=this;this.textTracks=[];var a=e.subtitleTracks||[],n=a.some((function(t){return"stpp.ttml.im1t"===t.textCodec}));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){var s=this.tracks&&a&&this.tracks.length===a.length;if(this.tracks=a||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,e){var a;if(e<o.length){for(var n=null,i=0;i<o.length;i++)if(gr(o[i],t)){n=o[i];break}n&&(a=n)}a?O(a):(a=r.createTextTrack("subtitles",t.name,t.lang))&&(a.mode="disabled"),a&&(a.groupId=t.groupId,r.textTracks.push(a))}))}else if(!s&&this.tracks&&this.tracks.length){var l=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(i.a.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},e.onManifestLoaded=function(t,e){var r=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var a="textTrack"+e[1],n=r.captionsProperties[a];n&&(n.label=t.name,t.lang&&(n.languageCode=t.lang),n.media=t)}}))},e.onFragLoading=function(t,e){var r=this.cea608Parser1,a=this.cea608Parser2,n=this.lastSn,i=this.lastPartIndex;if(this.enabled&&r&&a&&e.frag.type===L.b.MAIN){var s,o,l=e.frag.sn,c=null!=(s=null==e||null===(o=e.part)||void 0===o?void 0:o.index)?s:-1;l===n+1||l===n&&c===i+1||(r.reset(),a.reset()),this.lastSn=l,this.lastPartIndex=c}},e.onFragLoaded=function(t,e){var r=e.frag,a=e.payload,s=this.initPTS,o=this.unparsedVttFrags;if(r.type===L.b.SUBTITLE)if(a.byteLength){if(!Object(n.a)(s[r.cc]))return o.push(e),void(s.length&&this.hls.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")}));var l=r.decryptdata,c="stats"in e;if(null==l||null==l.key||"AES-128"!==l.method||c){var u=this.tracks[r.level],d=this.vttCCs;d[r.cc]||(d[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),u&&"stpp.ttml.im1t"===u.textCodec?this._parseIMSC1(r,a):this._parseVTTs(r,a,d)}}else this.hls.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var r=this,a=this.hls;dr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(e){r._appendCues(e,t.level),a.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){o.b.log("Failed to parse IMSC1: "+e),a.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,r){var a=this,n=this.hls;sr(e,this.initPTS[t.cc],this.timescale[t.cc],r,t.cc,t.start,(function(e){a._appendCues(e,t.level),n.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(r){a._fallbackToIMSC1(t,e),o.b.log("Failed to parse VTT cue: "+r),n.trigger(i.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:r})}))},e._fallbackToIMSC1=function(t,e){var r=this,a=this.tracks[t.level];a.textCodec||dr(e,this.initPTS[t.cc],this.timescale[t.cc],(function(){a.textCodec="stpp.ttml.im1t",r._parseIMSC1(t,e)}),(function(){a.textCodec="wvtt"}))},e._appendCues=function(t,e){var r=this.hls;if(this.config.renderTextTracksNatively){var a=this.textTracks[e];if("disabled"===a.mode)return;t.forEach((function(t){return D(a,t)}))}else{var n=this.tracks[e].default?"default":"subtitles"+e;r.trigger(i.a.CUES_PARSED,{type:"subtitles",cues:t,track:n})}},e.onFragDecrypted=function(t,e){var r=e.frag;if(r.type===L.b.SUBTITLE){if(!Object(n.a)(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(e);this.onFragLoaded(i.a.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var r=this.cea608Parser1,a=this.cea608Parser2;if(this.enabled&&r&&a)for(var n=0;n<e.samples.length;n++){var i=e.samples[n].bytes;if(i){var s=this.extractCea608Data(i);r.addData(e.samples[n].pts,s[0]),a.addData(e.samples[n].pts,s[1])}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,a=e.endOffset,n=e.endOffsetSubtitles,i=e.type,s=this.media;if(s&&!(s.currentTime<a)){if(!i||"video"===i){var o=this.captionsTracks;Object.keys(o).forEach((function(t){return P(o[t],r,a)}))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var l=this.textTracks;Object.keys(l).forEach((function(t){return P(l[t],r,n)}))}}},e.extractCea608Data=function(t){for(var e=31&t[0],r=2,a=[[],[]],n=0;n<e;n++){var i=t[r++],s=127&t[r++],o=127&t[r++],l=3&i;0===s&&0===o||0!=(4&i)&&(0!==l&&1!==l||(a[l].push(s),a[l].push(o)))}return a},t}();function gr(t,e){return t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function br(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var wr,kr=function(){function t(t){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e,r,a,n=t.prototype;return n.setStreamController=function(t){this.streamController=t},n.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},n.registerListeners=function(){var t=this.hls;t.on(i.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.on(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.on(i.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.unregisterListener=function(){var t=this.hls;t.off(i.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this),t.off(i.a.BUFFER_CODECS,this.onBufferCodecs,this),t.off(i.a.MEDIA_DETACHING,this.onMediaDetaching,this)},n.onFpsDropLevelCapping=function(e,r){t.isLevelAllowed(r.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(r.droppedLevel)},n.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null},n.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},n.getMaxLevel=function(e){var r=this,a=this.hls.levels;if(!a.length)return-1;var n=a.filter((function(a,n){return t.isLevelAllowed(n,r.restrictedLevels)&&n<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},n.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},t.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},t.getMaxLevelByMediaSize=function(t,e,r){if(!t||!t.length)return-1;for(var a,n,i=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=r)&&(a=o,!(n=t[s+1])||a.width!==n.width||a.height!==n.height)){i=s;break}}return i},e=t,a=[{key:"contentScaleFactor",get:function(){var t=1;try{t=self.devicePixelRatio}catch(t){}return t}}],(r=[{key:"mediaWidth",get:function(){return this.getDimensions().width*t.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*t.contentScaleFactor}}])&&br(e.prototype,r),a&&br(e,a),t}(),Tr=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHING,this.onMediaAttaching)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var a=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=a,a&&"function"==typeof a.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,r){var a=performance.now();if(e){if(this.lastTime){var n=a-this.lastTime,s=r-this.lastDroppedFrames,l=e-this.lastDecodedFrames,c=1e3*s/n,u=this.hls;if(u.trigger(i.a.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:r}),c>0&&s>u.config.fpsDroppedMonitoringThreshold*l){var d=u.currentLevel;o.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===u.autoLevelCapping||u.autoLevelCapping>=d)&&(d-=1,u.trigger(i.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:u.currentLevel}),u.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}();!function(t){t.WIDEVINE="com.widevine.alpha",t.PLAYREADY="com.microsoft.playready"}(wr||(wr={}));var xr="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Er(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Sr,_r,Lr,Ar=function(){function t(t){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=t,this._config=t.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var e,r,a=t.prototype;return a.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},a._registerListeners=function(){this.hls.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(i.a.MANIFEST_PARSED,this.onManifestParsed,this)},a._unregisterListeners=function(){this.hls.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(i.a.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(i.a.MANIFEST_PARSED,this.onManifestParsed,this)},a.getLicenseServerUrl=function(t){switch(t){case wr.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},a._attemptKeySystemAccess=function(t,e,r){var a=this,n=function(t,e,r,a){switch(t){case wr.WIDEVINE:return function(t,e,r){var a={audioCapabilities:[],videoCapabilities:[]};return t.forEach((function(t){a.audioCapabilities.push({contentType:'audio/mp4; codecs="'+t+'"',robustness:r.audioRobustness||""})})),e.forEach((function(t){a.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"',robustness:r.videoRobustness||""})})),[a]}(e,r,a);default:throw new Error("Unknown key-system: "+t)}}(t,e,r,this._drmSystemOptions);o.b.log("Requesting encrypted media key-system access");var i=this.requestMediaKeySystemAccess(t,n);this.mediaKeysPromise=i.then((function(e){return a._onMediaKeySystemAccessObtained(t,e)})),i.catch((function(e){o.b.error('Failed to obtain key-system "'+t+'" access:',e)}))},a._onMediaKeySystemAccessObtained=function(t,e){var r=this;o.b.log('Access for key-system "'+t+'" obtained');var a={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(a);var n=Promise.resolve().then((function(){return e.createMediaKeys()})).then((function(e){return a.mediaKeys=e,o.b.log('Media-keys created for key-system "'+t+'"'),r._onMediaKeysCreated(),e}));return n.catch((function(t){o.b.error("Failed to create media-keys:",t)})),n},a._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},a._onNewMediaKeySession=function(t){var e=this;o.b.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(r){e._onKeySessionMessage(t,r.message)}),!1)},a._onKeySessionMessage=function(t,e){o.b.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){o.b.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},a.onMediaEncrypted=function(t){var e=this;if(o.b.log('Media is encrypted using "'+t.initDataType+'" init data type'),!this.mediaKeysPromise)return o.b.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});var r=function(r){e._media&&(e._attemptSetMediaKeys(r),e._generateRequestWithPreferredKeySession(t.initDataType,t.initData))};this.mediaKeysPromise.then(r).catch(r)},a._attemptSetMediaKeys=function(t){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return o.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_KEYS,fatal:!0});o.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},a._generateRequestWithPreferredKeySession=function(t,e){var r=this,a=this._mediaKeysList[0];if(!a)return o.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(a.mediaKeysSessionInitialized)o.b.warn("Key-Session already initialized but requested again");else{var n=a.mediaKeysSession;if(!n)return o.b.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return o.b.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});o.b.log('Generating key-session request for "'+t+'" init data type'),a.mediaKeysSessionInitialized=!0,n.generateRequest(t,e).then((function(){o.b.debug("Key-session generation succeeded")})).catch((function(t){o.b.error("Error generating key-session request:",t),r.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},a._createLicenseXhr=function(t,e,r){var a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,a,t,e,r);var n=this._licenseXhrSetup;if(n)try{n.call(this.hls,a,t),n=void 0}catch(t){o.b.error(t)}try{a.readyState||a.open("POST",t,!0),n&&n.call(this.hls,a,t)}catch(t){throw new Error("issue setting up KeySystem license XHR "+t)}return a},a._onLicenseRequestReadyStageChange=function(t,e,r,a){switch(t.readyState){case 4:if(200===t.status){this._requestLicenseFailureCount=0,o.b.log("License request succeeded");var n=t.response,l=this._licenseResponseCallback;if(l)try{n=l.call(this.hls,t,e)}catch(t){o.b.error(t)}a(n)}else{if(o.b.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var c=3-this._requestLicenseFailureCount+1;o.b.warn("Retrying license request, "+c+" attempts left"),this._requestLicense(r,a)}}},a._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case wr.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},a._requestLicense=function(t,e){o.b.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return o.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var a=this.getLicenseServerUrl(r.mediaKeySystemDomain),n=this._createLicenseXhr(a,t,e);o.b.log("Sending license request to URL: "+a);var l=this._generateLicenseRequestChallenge(r,t);n.send(l)}catch(t){o.b.error("Failure requesting DRM license: "+t),this.hls.trigger(i.a.ERROR,{type:s.b.KEY_SYSTEM_ERROR,details:s.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},a.onMediaAttached=function(t,e){if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",this._onMediaEncrypted)}},a.onMediaDetached=function(){var t=this._media,e=this._mediaKeysList;t&&(t.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(e.map((function(t){if(t.mediaKeysSession)return t.mediaKeysSession.close().catch((function(){}))}))).then((function(){return t.setMediaKeys(null)})).catch((function(){})))},a.onManifestParsed=function(t,e){if(this._emeEnabled){var r=e.levels.map((function(t){return t.audioCodec})).filter((function(t){return!!t})),a=e.levels.map((function(t){return t.videoCodec})).filter((function(t){return!!t}));this._attemptKeySystemAccess(wr.WIDEVINE,r,a)}},e=t,(r=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&Er(e.prototype,r),t}();function Cr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Rr(t,e,r){return e&&Cr(t.prototype,e),r&&Cr(t,r),t}function Ir(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Dr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function Or(){return(Or=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(Sr||(Sr={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(_r||(_r={})),function(t){t.VOD="v",t.LIVE="l"}(Lr||(Lr={}));var Pr=function(){function t(e){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(t){try{r.apply(t,{ot:Sr.MANIFEST,su:!r.initialized})}catch(t){o.b.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var e=t.frag,a=r.hls.levels[e.level],n=r.getObjectType(e),i={d:1e3*e.duration,ot:n};n!==Sr.VIDEO&&n!==Sr.AUDIO&&n!=Sr.MUXED||(i.br=a.bitrate/1e3,i.tb=r.getTopBandwidth(n)/1e3,i.bl=r.getBufferLength(n)),r.apply(t,i)}catch(t){o.b.warn("Could not generate segment CMCD data.",t)}},this.hls=e;var a=this.config=e.config,n=a.cmcd;null!=n&&(a.pLoader=this.createPlaylistLoader(),a.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||t.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(i.a.MEDIA_DETACHED,this.onMediaDetached,this),t.on(i.a.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(i.a.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(i.a.MEDIA_DETACHED,this.onMediaDetached,this),t.off(i.a.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},e.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var r,a;this.audioBuffer=null===(r=e.tracks.audio)||void 0===r?void 0:r.buffer,this.videoBuffer=null===(a=e.tracks.video)||void 0===a?void 0:a.buffer},e.createData=function(){var t;return{v:1,sf:_r.HLS,sid:this.sid,cid:this.cid,pr:null===(t=this.media)||void 0===t?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,r){void 0===r&&(r={}),Or(r,this.createData());var a=r.ot===Sr.INIT||r.ot===Sr.VIDEO||r.ot===Sr.MUXED;if(this.starved&&a&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var n=t.toHeaders(r);if(!Object.keys(n).length)return;e.headers||(e.headers={}),Or(e.headers,n)}else{var i=t.toQuery(r);if(!i)return;e.url=t.appendQueryToUri(e.url,i)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?Sr.TIMED_TEXT:"initSegment"===t.sn?Sr.INIT:"audio"===e?Sr.AUDIO:"main"===e?this.hls.audioTracks.length?Sr.VIDEO:Sr.MUXED:void 0},e.getTopBandwidth=function(t){var e,r=0,a=this.hls;if(t===Sr.AUDIO)e=a.audioTracks;else{var n=a.maxAutoLevel,i=n>-1?n+1:a.levels.length;e=a.levels.slice(0,i)}for(var s,o=Ir(e);!(s=o()).done;){var l=s.value;l.bitrate>r&&(r=l.bitrate)}return r>0?r:NaN},e.getBufferLength=function(t){var e=this.hls.media,r=t===Sr.AUDIO?this.audioBuffer:this.videoBuffer;return r&&e?1e3*lt.bufferInfo(r,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.config.pLoader,e=this.applyPlaylistData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var a=t.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(t,r,a){e(t),this.loader.load(t,r,a)},Rr(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},e.createFragmentLoader=function(){var t=this.config.fLoader,e=this.applyFragmentData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var a=t.prototype;return a.destroy=function(){this.loader.destroy()},a.abort=function(){this.loader.abort()},a.load=function(t,r,a){e(t),this.loader.load(t,r,a)},Rr(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.substr(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,r=[],a=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},n=function(t){return Math.round(t)},i=function(t){return 100*n(t/100)},s={br:n,d:n,bl:i,dl:i,mtp:i,nor:function(t){return encodeURIComponent(t)},rtp:i,tb:n},o=Ir(Object.keys(t||{}).sort());!(e=o()).done;){var l=e.value,c=t[l];if(a(c)&&!("v"===l&&1===c||"pr"==l&&1===c)){var u=s[l];u&&(c=u(c));var d,h=typeof c;d="ot"===l||"sf"===l||"st"===l?l+"="+c:"boolean"===h?l:"number"===h?l+"="+c:l+"="+JSON.stringify(c),r.push(d)}}return r.join(",")},t.toHeaders=function(e){for(var r={},a=["Object","Request","Session","Status"],n=[{},{},{},{}],i={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(e);s<o.length;s++){var l=o[s];n[null!=i[l]?i[l]:1][l]=e[l]}for(var c=0;c<n.length;c++){var u=t.serialize(n[c]);u&&(r["CMCD-"+a[c]]=u)}return r},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var r=t.includes("?")?"&":"?";return""+t+r+e},t}(),Mr=r(12),Fr=/^age:\s*[\d.]+\s*$/m,Br=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t?t.xhrSetup:null,this.stats=new Mr.a,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t=this.config,e=this.context;if(t){var r=this.loader=new self.XMLHttpRequest,a=this.stats;a.loading.first=0,a.loaded=0;var n=this.xhrSetup;try{if(n)try{n(r,e.url)}catch(t){r.open("GET",e.url,!0),n(r,e.url)}r.readyState||r.open("GET",e.url,!0);var i=this.context.headers;if(i)for(var s in i)r.setRequestHeader(s,i[s])}catch(t){return void this.callbacks.onError({code:r.status,text:t.message},e,r)}e.rangeEnd&&r.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),r.onreadystatechange=this.readystatechange.bind(this),r.onprogress=this.loadprogress.bind(this),r.responseType=e.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),t.timeout),r.send()}},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var a=e.readyState,n=this.config;if(!r.aborted&&a>=2)if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===a){e.onreadystatechange=null,e.onprogress=null;var i=e.status;if(i>=200&&i<300){var s,l;if(r.loading.end=Math.max(self.performance.now(),r.loading.first),l="arraybuffer"===t.responseType?(s=e.response).byteLength:(s=e.responseText).length,r.loaded=r.total=l,!this.callbacks)return;var c=this.callbacks.onProgress;if(c&&c(r,t,s,e),!this.callbacks)return;var u={url:e.responseURL,data:s};this.callbacks.onSuccess(u,r,t,e)}else r.retry>=n.maxRetry||i>=400&&i<499?(o.b.error(i+" while loading "+t.url),this.callbacks.onError({code:i,text:e.statusText},t,e)):(o.b.warn(i+" while loading "+t.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,n.maxRetryDelay),r.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout)}},e.loadtimeout=function(){o.b.warn("timeout while loading "+this.context.url);var t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&Fr.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},t}();function Nr(t){var e="function"==typeof Map?new Map:void 0;return(Nr=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return Ur(t,arguments,Hr(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Vr(a,t)})(t)}function Ur(t,e,r){return(Ur=jr()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&Vr(n,r.prototype),n}).apply(null,arguments)}function jr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Vr(t,e){return(Vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hr(t){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(){return(Gr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var zr=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Yr,this.controller=new self.AbortController,this.stats=new Mr.a}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!==(t=this.callbacks)&&void 0!==t&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,r){var a=this,i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();var s=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Gr({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}(t,this.controller.signal),o=r.onProgress,l="arraybuffer"===t.responseType,c=l?"byteLength":"length";this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){a.abortInternal(),r.onTimeout(i,t,a.response)}),e.timeout),self.fetch(this.request).then((function(r){if(a.response=a.loader=r,!r.ok){var s=r.status,c=r.statusText;throw new qr(c||"fetch, bad network response",s,r)}return i.loading.first=Math.max(self.performance.now(),i.loading.start),i.total=parseInt(r.headers.get("Content-Length")||"0"),o&&Object(n.a)(e.highWaterMark)?a.loadProgressively(r,i,t,e.highWaterMark,o):l?r.arrayBuffer():r.text()})).then((function(s){var l=a.response;self.clearTimeout(a.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first),i.loaded=i.total=s[c];var u={url:l.url,data:s};o&&!Object(n.a)(e.highWaterMark)&&o(i,t,s,l),r.onSuccess(u,i,t,l)})).catch((function(e){if(self.clearTimeout(a.requestTimeout),!i.aborted){var n=e.code||0;r.onError({code:n,text:e.message},t,e.details)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.loadProgressively=function(t,e,r,a,n){void 0===a&&(a=0);var i=new oe.a,s=t.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return i.dataLength&&n(e,r,i.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=s.value,c=l.length;return e.loaded+=c,c<a||i.dataLength?(i.push(l),i.dataLength>=a&&n(e,r,i.flush(),t)):n(e,r,l,t),o()})).catch((function(){return Promise.reject()}))}()},t}();function Yr(t,e){return new self.Request(t.url,e)}var qr=function(t){var e,r;function a(e,r,a){var n;return(n=t.call(this,e)||this).code=void 0,n.details=void 0,n.code=r,n.details=a,n}return r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,Vr(e,r),a}(Nr(Error)),Wr=zr,Kr=/\s/;function Xr(){return(Xr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}function Zr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Jr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zr(Object(r),!0).forEach((function(e){Qr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Qr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $r=Jr(Jr({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Br,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:se,bufferController:Se,capLevelController:kr,fpsController:Tr,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:xr,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:{newCue:function(t,e,r,a){for(var n,i,s,o,l,c=[],u=self.VTTCue||self.TextTrackCue,d=0;d<a.rows.length;d++)if(s=!0,o=0,l="",!(n=a.rows[d]).isEmpty()){for(var h=0;h<n.chars.length;h++)Kr.test(n.chars[h].uchar)&&s?o++:(l+=n.chars[h].uchar,s=!1);n.cueStartTime=e,e===r&&(r+=1e-4),o>=16?o--:o++;var p=Qe(l.trim()),f=ir(e,r,p);t&&t.cues&&t.cues.getCueById(f)||((i=new u(e,r,p)).id=f,i.line=d+1,i.align="left",i.position=10+Math.min(80,10*Math.floor(8*o/32)),c.push(i))}return t&&c.length&&(c.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),c.forEach((function(e){return D(t,e)}))),c}},enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:ye,subtitleTrackController:ke,timelineController:vr,audioStreamController:ue,audioTrackController:pe,emeController:Ar,cmcdController:Pr});function ta(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ea=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Zt.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var r=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return Xr({},t,e)}(t.DefaultConfig,e);this.userConfig=e,Object(o.a)(r.debug),this._autoLevelCapping=-1,r.progressive&&function(t){var e=t.loader;e!==Wr&&e!==Br?(o.b.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}()&&(t.loader=Wr,t.progressive=!0,t.enableSoftwareAES=!0,o.b.log("[config]: Progressive streaming enabled, using FetchLoader"))}(r);var a=r.abrController,n=r.bufferController,i=r.capLevelController,s=r.fpsController,l=this.abrController=new a(this),c=this.bufferController=new n(this),u=this.capLevelController=new i(this),d=new s(this),h=new C(this),p=new R(this),f=new F(this),m=this.levelController=new rt(this),y=new at(this),v=this.streamController=new re(this,y);u.setStreamController(v),d.setStreamController(v);var g=[m,v];this.networkControllers=g;var b=[h,p,l,c,u,d,f,y];this.audioTrackController=this.createController(r.audioTrackController,null,g),this.createController(r.audioStreamController,y,g),this.subtitleTrackController=this.createController(r.subtitleTrackController,null,g),this.createController(r.subtitleStreamController,y,g),this.createController(r.timelineController,null,b),this.emeController=this.createController(r.emeController,null,b),this.cmcdController=this.createController(r.cmcdController,null,b),this.latencyController=this.createController(U,null,b),this.coreComponents=b}t.isSupported=function(){return function(){var t=qt();if(!t)return!1;var e=Wt(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!a}()};var e,r,n,l=t.prototype;return l.createController=function(t,e,r){if(t){var a=e?new t(this,e):new t(this);return r&&r.push(a),a}return null},l.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},l.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r)},l.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},l.off=function(t,e,r,a){void 0===r&&(r=this),this._emitter.off(t,e,r,a)},l.listeners=function(t){return this._emitter.listeners(t)},l.emit=function(t,e,r){return this._emitter.emit(t,e,r)},l.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){o.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(i.a.ERROR,{type:s.b.OTHER_ERROR,details:s.a.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},l.listenerCount=function(t){return this._emitter.listenerCount(t)},l.destroy=function(){o.b.log("destroy"),this.trigger(i.a.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0},l.attachMedia=function(t){o.b.log("attachMedia"),this._media=t,this.trigger(i.a.MEDIA_ATTACHING,{media:t})},l.detachMedia=function(){o.b.log("detachMedia"),this.trigger(i.a.MEDIA_DETACHING,void 0),this._media=null},l.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,n=this.url=a.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});o.b.log("loadSource:"+n),e&&r&&r!==n&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(i.a.MANIFEST_LOADING,{url:t})},l.startLoad=function(t){void 0===t&&(t=-1),o.b.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},l.stopLoad=function(){o.b.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},l.swapAudioCodec=function(){o.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},l.recoverMediaError=function(){o.b.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},l.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},e=t,n=[{key:"version",get:function(){return"1.1.5"}},{key:"Events",get:function(){return i.a}},{key:"ErrorTypes",get:function(){return s.b}},{key:"ErrorDetails",get:function(){return s.a}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:$r},set:function(e){t.defaultConfig=e}}],(r=[{key:"levels",get:function(){return this.levelController.levels||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){o.b.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){o.b.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){o.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){o.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){o.b.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(o.b.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,a=0;a<r;a++)if(t[a].maxBitrate>e)return a;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&ta(e.prototype,r),n&&ta(e,n),t}();ea.defaultConfig=void 0}]).default})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("smartplayer",[],e):"object"==typeof exports?exports.smartplayer=e():t.smartplayer=e()}(window,(function(){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=69)}([function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=r(11),i=Object.prototype.toString;function s(t){return"[object Array]"===i.call(t)}function o(t){return void 0===t}function l(t){return null!==t&&"object"===a(t)}function c(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===i.call(t)}function d(t,e){if(null!=t)if("object"!==a(t)&&(t=[t]),s(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:l,isPlainObject:c,isUndefined:o,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return l(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:d,merge:function t(){var e={};function r(r,a){c(e[a])&&c(r)?e[a]=t(e[a],r):c(r)?e[a]=t({},r):s(r)?e[a]=r.slice():e[a]=r}for(var a=0,n=arguments.length;a<n;a++)d(arguments[a],r);return e},extend:function(t,e,r){return d(e,(function(e,a){t[a]=r&&"function"==typeof e?n(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,r){"use strict";(function(t){var a=r(4),n=r(5),i=r(6);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=setTimeout;function l(t){return Boolean(t&&void 0!==t.length)}function c(){}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(t,this)}function d(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var a;try{a=r(t._value)}catch(t){return void p(e.promise,t)}h(e.promise,a)}else(1===t._state?h:p)(e.promise,t._value)}))):t._deferreds.push(e)}function h(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===s(e)||"function"==typeof e)){var r=e.then;if(e instanceof u)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void y((a=r,n=e,function(){a.apply(n,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){p(t,e)}var a,n}function p(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&u._immediateFn((function(){t._handled||u._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)d(t,t._deferreds[e]);t._deferreds=null}function m(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function y(t,e){var r=!1;try{t((function(t){r||(r=!0,h(e,t))}),(function(t){r||(r=!0,p(e,t))}))}catch(t){if(r)return;r=!0,p(e,t)}}u.prototype.catch=function(t){return this.then(null,t)},u.prototype.then=function(t,e){var r=new this.constructor(c);return d(this,new m(t,e,r)),r},u.prototype.finally=a.a,u.all=function(t){return new u((function(e,r){if(!l(t))return r(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return e([]);var n=a.length;function i(t,o){try{if(o&&("object"===s(o)||"function"==typeof o)){var l=o.then;if("function"==typeof l)return void l.call(o,(function(e){i(t,e)}),r)}a[t]=o,0==--n&&e(a)}catch(t){r(t)}}for(var o=0;o<a.length;o++)i(o,a[o])}))},u.any=i.a,u.allSettled=n.a,u.resolve=function(t){return t&&"object"===s(t)&&t.constructor===u?t:new u((function(e){e(t)}))},u.reject=function(t){return new u((function(e,r){r(t)}))},u.race=function(t){return new u((function(e,r){if(!l(t))return r(new TypeError("Promise.race accepts an array"));for(var a=0,n=t.length;a<n;a++)u.resolve(t[a]).then(e,r)}))},u._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=u}).call(this,r(9).setImmediate)},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(a=window)}t.exports=a},function(t,e,r){var a=r(7);t.exports=function(t){"use strict";var e="",r=(t=t||{}).icons,n=a.$escape,i=t.message,s=t.btnLink,o=t.btnText;return e+='<div class="smartplayer-blocked">\n  <div class="smartplayer-blocked__logo">',e+=r.vturb,e+='</div>\n  <div class="smartplayer-blocked__content">\n    <div class="smartplayer-blocked__msg" style="white-space: break-spaces;line-height: 1.5em;">',e+=n(i||"BLOQUEADO"),e+="</div>\n    ",s&&o&&(e+='\n      <a href="',e+=n(s),e+='" target="_blank" class="smartplayer-blocked__button">',e+=n(o),e+="</a>\n    "),e+="\n  </div>\n</div>\n"}},function(t,e,r){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))}},function(t,e,r){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=function(t){return new this((function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var o=r.then;if("function"==typeof o)return void o.call(r,(function(e){s(t,e)}),(function(r){n[t]={status:"rejected",reason:r},0==--i&&e(n)}))}n[t]={status:"fulfilled",value:r},0==--i&&e(n)}for(var o=0;o<n.length;o++)s(o,n[o])}))}},function(t,e,r){"use strict";function a(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}a.prototype=Error.prototype,e.a=function(t){var e=this;return new e((function(r,n){if(!t||void 0===t.length)return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return n();for(var s=[],o=0;o<i.length;o++)try{e.resolve(i[o]).then(r).catch((function(t){s.push(t),s.length===i.length&&n(new a(s,"All promises were rejected"))}))}catch(t){n(t)}}))}},function(t,e,r){"use strict";t.exports=r(50)},function(t,e,r){"use strict";var a=r(20),n=r.n(a)()((function(t){return t[1]}));n.push([t.i,'#smartplayer#smartplayer,#smartplayer#smartplayer:after,#smartplayer#smartplayer :after,#smartplayer#smartplayer:before,#smartplayer#smartplayer :before,#smartplayer#smartplayer :not(a):not(animate):not(animateMotion):not(animateTransform):not(canvas):not(circle):not(clipPath):not(defs):not(desc):not(discard):not(ellipse):not(feBlend):not(feColorMatrix):not(feComponentTransfer):not(feComposite):not(feConvolveMatrix):not(feDiffuseLighting):not(feDisplacementMap):not(feDistantLight):not(feDropShadow):not(feFlood):not(feFuncA):not(feFuncB):not(feFuncG):not(feFuncR):not(feGaussianBlur):not(feImage):not(feMerge):not(feMergeNode):not(feMorphology):not(feOffset):not(fePointLight):not(feSpecularLighting):not(feSpotLight):not(feTile):not(feTurbulence):not(filter):not(foreignObject):not(g):not(image):not(line):not(linearGradient):not(marker):not(mask):not(metadata):not(mpath):not(path):not(pattern):not(polygon):not(polyline):not(radialGradient):not(rect):not(script):not(set):not(stop):not(style):not(switch):not(symbol):not(text):not(textPath):not(title):not(tspan):not(use):not(view){-ms-flex-line-pack:stretch;align-content:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;align-self:auto;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-direction:normal;animation-direction:normal;-webkit-animation-duration:0s;animation-duration:0s;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-name:none;animation-name:none;-webkit-animation-play-state:running;animation-play-state:running;-webkit-animation-timing-function:ease;animation-timing-function:ease;azimuth:center;-webkit-backface-visibility:visible;backface-visibility:visible;background-attachment:scroll;background-blend-mode:normal;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-repeat:repeat;background-size:auto auto;block-size:auto;border-block-end-color:currentcolor;border-block-end-style:none;border-block-end-width:medium;border-block-start-color:currentcolor;border-block-start-style:none;border-block-start-width:medium;border-bottom-left-radius:0;border-bottom-right-radius:0;border-collapse:separate;border-image-outset:0s;border-image-repeat:stretch;border-image-slice:100%;border-image-source:none;border-image-width:1;border-inline-end-color:currentcolor;border-inline-end-style:none;border-inline-end-width:medium;border-inline-start-color:currentcolor;border-inline-start-style:none;border-inline-start-width:medium;border-spacing:0;border-top-left-radius:0;border-top-right-radius:0;border:none;bottom:auto;-webkit-box-decoration-break:slice;box-decoration-break:slice;-webkit-box-shadow:none;box-shadow:none;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-column-break-after:auto;-moz-column-break-after:auto;break-after:auto;-webkit-column-break-before:auto;-moz-column-break-before:auto;break-before:auto;-webkit-column-break-inside:auto;-moz-column-break-inside:auto;break-inside:auto;caption-side:top;caret-color:auto;clear:none;clip:auto;-webkit-clip-path:none;clip-path:none;color:initial;-webkit-column-count:auto;-moz-column-count:auto;-webkit-column-fill:balance;-moz-column-fill:balance;column-fill:balance;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule-color:currentcolor;-moz-column-rule-color:currentcolor;column-rule-color:currentcolor;-webkit-column-rule-style:none;-moz-column-rule-style:none;column-rule-style:none;-webkit-column-rule-width:medium;-moz-column-rule-width:medium;column-rule-width:medium;-webkit-column-span:none;-moz-column-span:none;column-span:none;-webkit-column-width:auto;-moz-column-width:auto;columns:auto;content:normal;counter-increment:none;counter-reset:none;cursor:auto;display:inline;empty-cells:show;-webkit-filter:none;filter:none;-ms-flex-preferred-size:auto;flex-basis:auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:1;flex-shrink:1;-ms-flex-wrap:nowrap;flex-wrap:nowrap;float:none;font-family:initial;-webkit-font-feature-settings:normal;font-feature-settings:normal;-webkit-font-kerning:auto;font-kerning:auto;-webkit-font-language-override:normal;font-language-override:normal;font-size:medium;font-size-adjust:none;font-stretch:normal;font-style:normal;font-synthesis:weight style;font-variant:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-east-asian:normal;-webkit-font-variant-ligatures:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;font-weight:400;grid-auto-columns:auto;grid-auto-flow:row;grid-auto-rows:auto;grid-column-end:auto;grid-column-gap:0;grid-column-start:auto;grid-row-end:auto;grid-row-gap:0;grid-row-start:auto;grid-template-areas:none;grid-template-columns:none;grid-template-rows:none;height:auto;-webkit-hyphens:manual;-ms-hyphens:manual;hyphens:manual;image-orientation:0deg;image-rendering:auto;image-resolution:1dppx;ime-mode:auto;inline-size:auto;isolation:auto;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;left:auto;letter-spacing:normal;line-break:auto;line-height:normal;list-style-image:none;list-style-position:outside;list-style-type:disc;-webkit-margin-after:0;margin-block-end:0;-webkit-margin-before:0;margin-block-start:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-margin-start:0;margin-inline-start:0;margin:0;-webkit-mask-clip:border-box;mask-clip:border-box;-webkit-mask-composite:source-over;mask-composite:add;-webkit-mask-image:none;mask-image:none;mask-mode:match-source;-webkit-mask-origin:border-box;mask-origin:border-box;-webkit-mask-position:0 0;mask-position:0 0;-webkit-mask-repeat:repeat;mask-repeat:repeat;-webkit-mask-size:auto;mask-size:auto;mask-type:luminance;max-height:none;max-width:none;min-block-size:0;min-height:0;min-inline-size:0;min-width:0;mix-blend-mode:normal;-o-object-fit:fill;object-fit:fill;-o-object-position:50% 50%;object-position:50% 50%;offset-block-end:auto;offset-block-start:auto;offset-inline-end:auto;offset-inline-start:auto;opacity:1;-webkit-box-ordinal-group:1;-ms-flex-order:0;order:0;orphans:2;outline-color:initial;outline-offset:0;outline-style:none;outline-width:medium;overflow:visible;overflow-wrap:normal;overflow-x:visible;overflow-y:visible;-webkit-padding-after:0;padding-block-end:0;-webkit-padding-before:0;padding-block-start:0;-webkit-padding-end:0;padding-inline-end:0;-webkit-padding-start:0;padding-inline-start:0;padding:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;-webkit-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:initial;resize:none;right:auto;ruby-align:space-around;ruby-merge:separate;ruby-position:over;scroll-behavior:auto;-ms-scroll-snap-coordinate:none;scroll-snap-coordinate:none;-ms-scroll-snap-destination:0 0;scroll-snap-destination:0 0;-ms-scroll-snap-points-x:none;scroll-snap-points-x:none;-ms-scroll-snap-points-y:none;scroll-snap-points-y:none;-ms-scroll-snap-type:none;scroll-snap-type:none;shape-image-threshold:0;shape-margin:0;shape-outside:none;-moz-tab-size:8;-o-tab-size:8;tab-size:8;table-layout:auto;text-align:initial;-moz-text-align-last:auto;text-align-last:auto;text-combine-upright:none;-webkit-text-decoration-color:currentcolor;text-decoration-color:currentcolor;-webkit-text-decoration-line:none;text-decoration-line:none;-webkit-text-decoration-style:solid;text-decoration-style:solid;-webkit-text-emphasis-color:currentcolor;text-emphasis-color:currentcolor;-webkit-text-emphasis-position:over;text-emphasis-position:over right;-webkit-text-emphasis-style:none;text-emphasis-style:none;text-indent:0;text-justify:auto;text-orientation:mixed;-o-text-overflow:clip;text-overflow:clip;text-rendering:auto;text-shadow:none;text-transform:none;text-underline-position:auto;top:auto;-ms-touch-action:auto;touch-action:auto;-webkit-transform:none;-ms-transform:none;transform:none;transform-box:border-box;-webkit-transform-origin:50% 50% 0;-ms-transform-origin:50% 50% 0;transform-origin:50% 50% 0;-webkit-transform-style:flat;transform-style:flat;-webkit-transition-delay:0s;-o-transition-delay:0s;transition-delay:0s;-webkit-transition-duration:0s;-o-transition-duration:0s;transition-duration:0s;-webkit-transition-property:all;-o-transition-property:all;transition-property:all;-webkit-transition-timing-function:ease;-o-transition-timing-function:ease;transition-timing-function:ease;vertical-align:baseline;visibility:visible;white-space:normal;widows:2;width:auto;will-change:auto;word-break:normal;word-spacing:normal;word-wrap:normal;-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr-tb;writing-mode:horizontal-tb;z-index:auto;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none}#smartplayer#smartplayer,#smartplayer#smartplayer:after,#smartplayer#smartplayer :after,#smartplayer#smartplayer:before,#smartplayer#smartplayer :before,#smartplayer#smartplayer :not(a):not(animate):not(animateMotion):not(animateTransform):not(canvas):not(circle):not(clipPath):not(defs):not(desc):not(discard):not(ellipse):not(feBlend):not(feColorMatrix):not(feComponentTransfer):not(feComposite):not(feConvolveMatrix):not(feDiffuseLighting):not(feDisplacementMap):not(feDistantLight):not(feDropShadow):not(feFlood):not(feFuncA):not(feFuncB):not(feFuncG):not(feFuncR):not(feGaussianBlur):not(feImage):not(feMerge):not(feMergeNode):not(feMorphology):not(feOffset):not(fePointLight):not(feSpecularLighting):not(feSpotLight):not(feTile):not(feTurbulence):not(filter):not(foreignObject):not(g):not(image):not(line):not(linearGradient):not(marker):not(mask):not(metadata):not(mpath):not(path):not(pattern):not(polygon):not(polyline):not(radialGradient):not(rect):not(script):not(set):not(stop):not(style):not(switch):not(symbol):not(text):not(textPath):not(title):not(tspan):not(use):not(view){-webkit-box-sizing:border-box;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;text-decoration:none}#smartplayer#smartplayer#smartplayer{@import"../../node_modules/balloon-css/balloon.css"}#smartplayer#smartplayer#smartplayer,#smartplayer#smartplayer#smartplayer div{display:block}@-webkit-keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-.5px) rotate(-1.5deg);transform:translateY(-.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}28%{-webkit-transform:translateY(.5px) rotate(1.5deg);transform:translateY(.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}50%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(.5px) rotate(2.5deg);transform:translateY(.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}76%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-.5deg);transform:translateY(2.5px) rotate(-.5deg)}92%{-webkit-transform:translateY(.5px) rotate(-.5deg);transform:translateY(.5px) rotate(-.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(.5deg);transform:translateY(2.5px) rotate(.5deg)}96%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}@keyframes my-face{2%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}4%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}6%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}8%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}10%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}12%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}14%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}16%{-webkit-transform:translateY(-.5px) rotate(-1.5deg);transform:translateY(-.5px) rotate(-1.5deg)}18%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}20%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}22%{-webkit-transform:translateY(.5px) rotate(-1.5deg);transform:translateY(.5px) rotate(-1.5deg)}24%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}26%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}28%{-webkit-transform:translateY(.5px) rotate(1.5deg);transform:translateY(.5px) rotate(1.5deg)}30%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}32%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}34%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}36%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}38%{-webkit-transform:translateY(1.5px) rotate(-1.5deg);transform:translateY(1.5px) rotate(-1.5deg)}40%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}42%{-webkit-transform:translateY(2.5px) rotate(-1.5deg);transform:translateY(2.5px) rotate(-1.5deg)}44%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}46%{-webkit-transform:translateY(-1.5px) rotate(2.5deg);transform:translateY(-1.5px) rotate(2.5deg)}48%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}50%{-webkit-transform:translateY(.5px) rotate(.5deg);transform:translateY(.5px) rotate(.5deg)}52%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}54%{-webkit-transform:translateY(-1.5px) rotate(1.5deg);transform:translateY(-1.5px) rotate(1.5deg)}56%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}58%{-webkit-transform:translateY(.5px) rotate(2.5deg);transform:translateY(.5px) rotate(2.5deg)}60%{-webkit-transform:translateY(2.5px) rotate(2.5deg);transform:translateY(2.5px) rotate(2.5deg)}62%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}64%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}66%{-webkit-transform:translateY(1.5px) rotate(-.5deg);transform:translateY(1.5px) rotate(-.5deg)}68%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}70%{-webkit-transform:translateY(1.5px) rotate(.5deg);transform:translateY(1.5px) rotate(.5deg)}72%{-webkit-transform:translateY(2.5px) rotate(1.5deg);transform:translateY(2.5px) rotate(1.5deg)}74%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}76%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}78%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}80%{-webkit-transform:translateY(1.5px) rotate(1.5deg);transform:translateY(1.5px) rotate(1.5deg)}82%{-webkit-transform:translateY(-.5px) rotate(.5deg);transform:translateY(-.5px) rotate(.5deg)}84%{-webkit-transform:translateY(1.5px) rotate(2.5deg);transform:translateY(1.5px) rotate(2.5deg)}86%{-webkit-transform:translateY(-1.5px) rotate(-1.5deg);transform:translateY(-1.5px) rotate(-1.5deg)}88%{-webkit-transform:translateY(-.5px) rotate(2.5deg);transform:translateY(-.5px) rotate(2.5deg)}90%{-webkit-transform:translateY(2.5px) rotate(-.5deg);transform:translateY(2.5px) rotate(-.5deg)}92%{-webkit-transform:translateY(.5px) rotate(-.5deg);transform:translateY(.5px) rotate(-.5deg)}94%{-webkit-transform:translateY(2.5px) rotate(.5deg);transform:translateY(2.5px) rotate(.5deg)}96%{-webkit-transform:translateY(-.5px) rotate(1.5deg);transform:translateY(-.5px) rotate(1.5deg)}98%{-webkit-transform:translateY(-1.5px) rotate(-.5deg);transform:translateY(-1.5px) rotate(-.5deg)}0%,to{-webkit-transform:translate(0) rotate(0deg);transform:translate(0) rotate(0deg)}}#smartplayer#smartplayer#smartplayer .smartplayer-autoplay-element-animated.element-pulse-animation{-webkit-animation:element-pulse-animation var(--autoplay-pulse-speed) infinite;animation:element-pulse-animation var(--autoplay-pulse-speed) infinite;min-height:1px}@-webkit-keyframes element-pulse-animation{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}50%{-webkit-transform:scale(1.05) translateY(-16px);transform:scale(1.05) translateY(-16px)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}@keyframes element-pulse-animation{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}50%{-webkit-transform:scale(1.05) translateY(-16px);transform:scale(1.05) translateY(-16px)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}#smartplayer#smartplayer#smartplayer [data-balloon]:before{display:none}#smartplayer#smartplayer#smartplayer [data-balloon]:after{padding:.3em .7em;background:rgba(17,17,17,.7)}#smartplayer#smartplayer#smartplayer [data-balloon][data-balloon-pos=up]:after{margin-bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-bezel{position:absolute;left:0;right:0;top:0;bottom:0;font-size:22px;color:#fff;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-bezel-icon{position:absolute;top:50%;left:50%;margin:-26px 0 0 -26px;height:52px;width:52px;padding:12px;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.5);border-radius:50%;opacity:0;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-bezel-icon.smartplayer-bezel-transition{-webkit-animation:bezel-hide .5s linear;animation:bezel-hide .5s linear}@-webkit-keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}@keyframes bezel-hide{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}to{opacity:0;-webkit-transform:scale(2);transform:scale(2)}}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-danloading{position:absolute;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:14px;-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon{display:none;position:absolute;top:50%;left:50%;margin:-50px 0 0 -50px;height:100px;width:100px;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot{-webkit-animation:smartplayer-loading-dot-fade .8s ease infinite;animation:smartplayer-loading-dot-fade .8s ease infinite;opacity:0;-webkit-transform-origin:4px 4px;-ms-transform-origin:4px 4px;transform-origin:4px 4px}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-7{-webkit-animation-delay:.7s;animation-delay:.7s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-6{-webkit-animation-delay:.6s;animation-delay:.6s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-5{-webkit-animation-delay:.5s;animation-delay:.5s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-4{-webkit-animation-delay:.4s;animation-delay:.4s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-3{-webkit-animation-delay:.3s;animation-delay:.3s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-2{-webkit-animation-delay:.2s;animation-delay:.2s}#smartplayer#smartplayer#smartplayer .smartplayer-bezel .smartplayer-loading-icon .smartplayer-loading-dot.smartplayer-loading-dot-1{-webkit-animation-delay:.1s;animation-delay:.1s}@-webkit-keyframes smartplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}@keyframes smartplayer-loading-dot-fade{0%{opacity:.7;-webkit-transform:scale(1.2);transform:scale(1.2)}50%{opacity:.25;-webkit-transform:scale(.9);transform:scale(.9)}to{opacity:.25;-webkit-transform:scale(.85);transform:scale(.85)}}#smartplayer#smartplayer#smartplayer .smartplayer-controller-mask{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x bottom;height:98px;width:100%;position:absolute;bottom:0;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller{pointer-events:none;position:absolute;bottom:0;left:0;right:0;height:41px;padding:0 20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#smartplayer#smartplayer#smartplayer .smartplayer-controller.smartplayer-controller-comment .smartplayer-icons{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller.smartplayer-controller-comment .smartplayer-icons.smartplayer-comment-box{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap{padding:5px 0;cursor:pointer;position:absolute;bottom:33px;width:calc(100% - 40px);height:3px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap:hover .smartplayer-bar .smartplayer-played .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap:hover .smartplayer-highlight{display:block;width:8px;-webkit-transform:translateX(-4px);-ms-transform:translateX(-4px);transform:translateX(-4px);top:4px;height:40%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight{z-index:12;position:absolute;top:5px;width:6px;height:20%;border-radius:6px;background-color:#fff;text-align:center;-webkit-transform:translateX(-3px);-ms-transform:translateX(-3px);transform:translateX(-3px);-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover .smartplayer-highlight-text{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover~.smartplayer-bar-preview{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight:hover~.smartplayer-bar-time{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-highlight .smartplayer-highlight-text{display:none;position:absolute;left:50%;top:-24px;padding:5px 8px;background-color:rgba(0,0,0,.62);color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-preview{position:absolute;background:#fff;pointer-events:none;display:none;background-size:16000px 100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-preview-canvas{position:absolute;width:100%;height:100%;z-index:1;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-time{position:absolute;left:0;top:-20px;border-radius:4px;padding:5px 7px;background-color:rgba(0,0,0,.62);color:#fff;font-size:12px;text-align:center;opacity:1;-webkit-transition:opacity .1s ease-in-out;-o-transition:opacity .1s ease-in-out;transition:opacity .1s ease-in-out;word-wrap:normal;word-break:normal;z-index:2;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar-time.smartplayer-hidden{opacity:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar{position:relative;height:3px;width:100%;background:hsla(0,0%,100%,.2);cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:hsla(0,0%,100%,.4);height:3px;-webkit-transition:all .5s ease;-o-transition:all .5s ease;transition:all .5s ease;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-played{position:absolute;left:0;top:0;bottom:0;height:3px;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-bar-wrap .smartplayer-bar .smartplayer-played .smartplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons{height:38px;position:absolute;bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box{display:none;position:absolute;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;z-index:2;height:38px;bottom:0;left:20px;right:20px;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-icon{padding:7px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-icon{position:absolute;left:0;top:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-send-icon{position:absolute;right:0;top:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box{position:absolute;background:rgba(28,28,28,.9);bottom:41px;left:0;-webkit-box-shadow:0 0 25px rgba(0,0,0,.3);box-shadow:0 0 25px rgba(0,0,0,.3);border-radius:4px;padding:10px 10px 16px;font-size:14px;width:204px;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box.smartplayer-comment-setting-open{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box input[type=radio]{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box label{cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-title{font-size:13px;color:#fff;line-height:30px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type{font-size:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type .smartplayer-comment-setting-title{margin-bottom:6px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type label:nth-child(2) span{border-radius:4px 0 0 4px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type label:nth-child(4) span{border-radius:0 4px 4px 0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type span{width:33%;padding:4px 6px;line-height:16px;display:inline-block;font-size:12px;color:#fff;border:1px solid #fff;margin-right:-1px;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:center;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-type input:checked+span{background:#e4e4e6;color:#1c1c1c}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color{font-size:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color label{font-size:0;padding:6px;display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color span{width:22px;height:22px;display:inline-block;border-radius:50%;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-setting-box .smartplayer-comment-setting-color span:hover{-webkit-animation:my-face 5s ease-in-out infinite;animation:my-face 5s ease-in-out infinite}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input{outline:none;border:none;padding:8px 31px;font-size:14px;line-height:18px;text-align:center;border-radius:4px;background:none;margin:0;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-webkit-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-moz-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input:-ms-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-ms-input-placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::placeholder{color:#fff;opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-comment-box .smartplayer-comment-input::-ms-clear{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-left .smartplayer-icon{padding:7px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-right{right:20px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons.smartplayer-icons-right .smartplayer-icon{padding:8px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-live-badge,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time span{line-height:38px;color:#eee;text-shadow:0 0 2px rgba(0,0,0,.5);vertical-align:middle;font-size:13px;cursor:default}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-live-dot{display:inline-block;width:6px;height:6px;vertical-align:4%;margin-right:5px;content:"";border-radius:6px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon{width:40px;height:100%;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;vertical-align:middle;-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon .smartplayer-icon-content{-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;opacity:.8;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon:hover .smartplayer-icon-content{opacity:1}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-quality-icon{color:#fff;width:auto;line-height:22px;font-size:14px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-comment-icon{padding:10px 9px 9px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-setting-icon{padding-top:8.5px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon.smartplayer-volume-icon{width:43px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-icon svg{cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume{position:relative;display:inline-block;cursor:pointer;height:100%}@media(min-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume:hover .smartplayer-volume-bar-wrap .smartplayer-volume-bar{width:45px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume:hover .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume.smartplayer-volume-active .smartplayer-volume-bar-wrap .smartplayer-volume-bar{width:45px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume.smartplayer-volume-active .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap{display:inline-block;margin:0 10px 0 -5px;vertical-align:middle;height:100%;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar{position:relative;top:17px;width:0;height:3px;background:#aaa;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner{position:absolute;bottom:0;left:0;height:100%;-webkit-transition:all .1s ease;-o-transition:all .1s ease;transition:all .1s ease;will-change:width}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-volume-bar-wrap .smartplayer-volume-bar .smartplayer-volume-bar-inner .smartplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:11px;width:11px;border-radius:50%;cursor:pointer;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0)}@media(max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume{pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-volume .smartplayer-icon{pointer-events:all}}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-subtitle-btn{display:inline-block;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control{display:inline-block;width:40px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-display{background-color:#fff;padding:0;width:100%;height:18px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-display .smartplayer-speed-control-display-content{color:#000;font-size:12px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-box-to-left{right:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-box-to-right{left:0}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-box{display:block!important;position:absolute;bottom:50px;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;z-index:2}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-box>div{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-box>div.smartplayer-speed-control-origin-panel{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-box.smartplayer-speed-control-box-open{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-item,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-speed-item{height:30px;padding:5px 10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;position:relative}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-item:hover,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-speed-control .smartplayer-speed-control-speed-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting{display:inline-block;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box{position:absolute;right:0;bottom:50px;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);width:150px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 0;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;z-index:2}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box>div{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box>div.smartplayer-setting-origin-panel{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-open{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box.smartplayer-setting-box-narrow{width:70px;text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-box .smartplayer-setting-origin-panel{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-item{height:30px;padding:5px 10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;position:relative}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-setting .smartplayer-setting-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-full{display:inline-block;height:100%;position:relative}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-full .smartplayer-full-in-icon{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality{position:relative;display:inline-block;height:100%;z-index:2}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality:hover .smartplayer-quality-list,#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality:hover .smartplayer-quality-mask{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-mask{display:none;position:absolute;bottom:38px;left:-18px;width:80px;padding-bottom:12px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-list{display:none;font-size:12px;width:80px;border-radius:2px;background:rgba(28,28,28,.9);padding:5px 0;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;color:#fff;text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-item{height:25px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;line-height:25px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-quality .smartplayer-quality-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-comment{display:inline-block;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-label{color:#eee;font-size:13px;display:inline-block;vertical-align:middle;white-space:nowrap}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle{width:32px;height:20px;text-align:center;font-size:0;vertical-align:middle;position:absolute;top:5px;right:10px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input{max-height:0;max-width:0;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label{display:inline-block;position:relative;-webkit-box-shadow:#dfdfdf 0 0 0 0 inset;box-shadow:inset 0 0 0 0 #dfdfdf;border:1px solid #dfdfdf;height:20px;width:32px;border-radius:10px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label:before{content:"";position:absolute;display:block;height:18px;width:18px;top:0;left:0;border-radius:15px;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input+label:after{content:"";position:absolute;display:block;left:0;top:0;border-radius:15px;background:#fff;-webkit-transition:.2s ease-in-out;-o-transition:.2s ease-in-out;transition:.2s ease-in-out;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.4);box-shadow:0 1px 3px rgba(0,0,0,.4);height:18px;width:18px}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label{border-color:hsla(0,0%,100%,.5)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label:before{width:30px;background:hsla(0,0%,100%,.5)}#smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-toggle input:checked+label:after{left:12px}#smartplayer#smartplayer#smartplayer .smartplayer-mobile-play{display:none;width:50px;height:50px;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0;opacity:.8;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-logo{pointer-events:none;position:absolute;left:20px;top:20px;max-width:50px;max-height:50px}#smartplayer#smartplayer#smartplayer .smartplayer-logo img{max-width:100%;max-height:100%;background:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu{position:absolute;border-radius:2px;background:rgba(28,28,28,.85);padding:5px 0;overflow:hidden;z-index:12;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu.smartplayer-menu-show{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item{height:30px;-webkit-box-sizing:border-box;box-sizing:border-box;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item:hover{background-color:hsla(0,0%,100%,.1)}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item a{padding:0 10px;line-height:30px;color:#eee;font-size:13px;margin:0;display:inline-block;vertical-align:middle;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden;text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-menu .smartplayer-menu-item a:hover{text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-notice{opacity:0;position:absolute;bottom:60px;left:20px;font-size:14px;border-radius:2px;background:rgba(28,28,28,.9);padding:7px 20px;-webkit-transition:all .3s ease-in-out;-o-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle{position:absolute;bottom:20px;left:50%;text-align:center;color:#fff;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);text-shadow:.5px .5px .5px rgba(0,0,0,.8);font-size:18px;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle.smartplayer-subtitle-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle p{display:block;text-align:inherit;padding:.25rem .4rem}#smartplayer#smartplayer#smartplayer.smartplayer-mobile .smartplayer-subtitle{bottom:25px}#smartplayer#smartplayer#smartplayer.smartplayer-mobile:not(.smartplayer-show-smart-auto-play,.smartplayer-hide-controller).smartplayer-paused .smartplayer-subtitle,#smartplayer#smartplayer#smartplayer.smartplayer-mobile:not(.smartplayer-show-smart-auto-play,.smartplayer-hide-controller) .smartplayer-subtitle:not(.smartplayer-subtitle-fixed){bottom:42px}@media(min-width:768px){#smartplayer#smartplayer#smartplayer .smartplayer-subtitle{bottom:52px}#smartplayer#smartplayer#smartplayer .smartplayer-subtitle.smartplayer-subtitle-fixed{bottom:20px}#smartplayer#smartplayer#smartplayer:not(:hover,.smartplayer-show-smart-auto-play,.smartplayer-paused) .smartplayer-subtitle:not(.smartplayer-subtitle-fixed){bottom:20px}}#smartplayer#smartplayer#smartplayer .smartplayer-mask{position:absolute;top:0;bottom:0;left:0;right:0;z-index:11;display:none}#smartplayer#smartplayer#smartplayer .smartplayer-mask.smartplayer-mask-show{display:block}#smartplayer#smartplayer#smartplayer.smartplayer-playing:not(.smartplayer-fulled):not(.smartplayer-loading) .smartplayer-video-wrap{background:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap{position:absolute;font-size:0;width:100%;height:100%;top:0;left:0;right:0;bottom:0}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;display:none;-o-object-fit:contain;object-fit:contain;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video-current{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-video-wrap .smartplayer-video-prepare{display:none}#smartplayer#smartplayer#smartplayer.smartplayer-initial .smartplayer-video-wrap{background:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer.smartplayer-fulled .smartplayer-video-wrap{background:#000}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel{position:absolute;top:10px;left:10px;width:400px;background:rgba(28,28,28,.8);padding:10px;color:#fff;font-size:12px;border-radius:2px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-close{cursor:pointer;position:absolute;right:10px;top:10px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item>span{display:inline-block;vertical-align:middle;line-height:15px;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;overflow:hidden}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item-title{width:100px;text-align:right;margin-right:10px}#smartplayer#smartplayer#smartplayer .smartplayer-info-panel .smartplayer-info-panel-item-data{width:260px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action{position:absolute;top:0;left:0;width:100%;height:100%;padding:20px 20px 40px;-webkit-transform:initial;-ms-transform:initial;transform:none;display:block;pointer-events:none}#smartplayer#smartplayer#smartplayer .smartplayer-call-action.smartplayer-hide{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-call-action>*{position:absolute}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tr>*{top:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cr>*{top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__br>*{bottom:40px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cl>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tl>*{left:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__bc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tc>*{left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cc>*{-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-call-action__br>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__cr>*,#smartplayer#smartplayer#smartplayer .smartplayer-call-action__tr>*{right:20px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link{pointer-events:all;display:inline-block;padding:.65em .5em .5em;text-align:center;border-radius:5px;color:#fff;font-weight:700;line-height:1.2;-webkit-transition:all .15s ease-out;-o-transition:all .15s ease-out;transition:all .15s ease-out;text-decoration:none}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link.inner.sm{font-size:18px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link.inner.md{font-size:22px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link.inner.lg{font-size:26px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link.inner.mobile.sm{font-size:12px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link.inner.mobile.md{font-size:14px}#smartplayer#smartplayer#smartplayer .smartplayer-call-action--link.inner.mobile.lg{font-size:17px}#smartplayer#smartplayer#smartplayer .smartplayer-resume{position:absolute;top:0;left:0;right:0;bottom:0;z-index:9999;background-color:rgba(0,0,0,.6);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);padding:8px;cursor:auto}#smartplayer#smartplayer#smartplayer .smartplayer-resume__content{position:absolute;top:50%;left:0;right:0;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);text-align:center}#smartplayer#smartplayer#smartplayer .smartplayer-resume__title{margin:0 8px 16px;min-width:180px;font-size:2em;line-height:1.3;text-align:center;color:#fff;font-weight:700}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions{display:inline-block}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div{background:rgba(0,0,0,0);padding:0;margin:4px;text-align:left;cursor:pointer;border:none;display:inline-table;color:#fff;min-width:180px;opacity:1;-webkit-transition:opacity .2s ease;-o-transition:opacity .2s ease;transition:opacity .2s ease}@media(max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div{display:table}}#smartplayer#smartplayer#smartplayer .smartplayer-resume__actions>div:hover{opacity:.8}#smartplayer#smartplayer#smartplayer .smartplayer-resume__text{text-align:left;font-size:16px;line-height:1.1;font-weight:700;display:table-cell;vertical-align:middle;padding:0 1em 0 .6em;-ms-flex-line-pack:normal;align-content:normal;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon{width:45px;height:45px;padding:5px;border:2px solid #fff;border-radius:50%;margin-right:8px;display:table-cell;vertical-align:middle}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg{display:block;cursor:pointer}#smartplayer#smartplayer#smartplayer .smartplayer-resume__play .smartplayer-resume__icon{padding-left:10px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__rewind .smartplayer-resume__icon{padding:9px 9px 9px 7px}@media(max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-resume__title{font-size:1.15em;margin-bottom:8px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__text{font-size:.9em}#smartplayer#smartplayer#smartplayer .smartplayer-resume__icon{width:30px;height:30px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__rewind .smartplayer-resume__icon{padding:4px 4px 4px 2px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__play .smartplayer-resume__icon{padding-left:5px}#smartplayer#smartplayer#smartplayer .smartplayer-resume__play{cursor:pointer}}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay{width:150px;height:150px;border-radius:75px;padding-left:20px;border:none;background-color:rgba(0,0,0,0);outline:none;cursor:pointer;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0;opacity:.9;position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:10}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay.smartplayer-hidden{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-bigplay svg{cursor:pointer}@media(max-width:550px){#smartplayer#smartplayer#smartplayer .smartplayer-bigplay{width:70px;height:70px;padding-left:13px;padding-right:6px}}#smartplayer#smartplayer#smartplayer.smartplayer-show-smart-auto-play .smartplayer-bigplay{display:none}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content{display:none;position:absolute;top:0;right:0;font-size:12px;overflow:hidden;pointer-events:none;z-index:10000;max-width:100%}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__box{background:rgba(0,0,0,.5);padding:2px 6px;border-bottom-left-radius:8px;-webkit-transform:translateX(91%);-ms-transform:translateX(91%);transform:translateX(91%);-webkit-transition:-webkit-transform .3s .5s;transition:-webkit-transform .3s .5s;-o-transition:transform .3s .5s;transition:transform .3s .5s;transition:transform .3s .5s,-webkit-transform .3s .5s;pointer-events:auto;white-space:nowrap}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__box:hover{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:-webkit-transform .3s 0s;transition:-webkit-transform .3s 0s;-o-transition:transform .3s 0s;transition:transform .3s 0s;transition:transform .3s 0s,-webkit-transform .3s 0s}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__icon{height:12px;width:12px;display:inline-block;margin-right:6px;color:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__icon svg{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-offline-content__text{color:#fff;font-size:12px;line-height:12px;white-space:nowrap}#smartplayer#smartplayer#smartplayer.smartplayer-offline .smartplayer-offline-content{display:block}#smartplayer#smartplayer#smartplayer .smartplayer-fake-bar{left:0;width:0;bottom:0;height:10px;opacity:.8;z-index:100005;position:absolute;background-color:rgba(0,0,0,.6)}#smartplayer#smartplayer#smartplayer .smartplayer-blocked{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background-color:#202020;-webkit-box-shadow:inset 0 0 160px 0 #000;box-shadow:inset 0 0 160px 0 #000}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo{position:absolute;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo svg{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);height:80%;opacity:.035}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__logo svg path{fill:#fff}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__content{top:50%;left:50%;width:80%;position:absolute;max-width:32em;text-align:center;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__msg{color:#ccc;text-align:center;font-size:1.2em;text-shadow:0 2px 0 #000,0 3px 3px #000}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button{color:#fff;padding:.7em 1.5em;display:inline-block;font-size:1em;margin:1.2em auto 0;background:#f1582d;font-weight:600;border-radius:5px;text-decoration:none;-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;-o-transition:transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button:hover{-webkit-transform:scale(1.05);-ms-transform:scale(1.05);transform:scale(1.05)}@media(max-width:480px){#smartplayer#smartplayer#smartplayer .smartplayer-blocked__msg{font-size:1em}#smartplayer#smartplayer#smartplayer .smartplayer-blocked__button{font-size:.8em}}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-finish,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-pause,#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play) .smartplayer-image-start{position:absolute;top:0;display:none;width:100%;height:100%;background-color:#000;background-position:50%;background-repeat:no-repeat;background-size:cover;cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-initial .smartplayer-image-start{z-index:9;display:block;background-color:rgba(0,0,0,0)}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-paused:not(.smartplayer-finished) .smartplayer-image-pause{z-index:9;display:block}#smartplayer#smartplayer#smartplayer.smartplay:not(.smartplayer-in-resume):not(.smartplayer-smart-auto-play).smartplayer-finished .smartplayer-image-finish{z-index:9;display:block}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail{position:absolute;top:0;display:none;width:100%;height:100%;background-color:#000;background-position:50%;background-repeat:no-repeat;background-size:contain;pointer-events:none;cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--tc,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--tl,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--tr{top:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--cc,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--cl,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--cr{top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--bc,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--bl,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--br{bottom:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--bl,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--cl,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--tl{left:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--bc,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--cc,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--tc{left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%)}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--cc{-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--br,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--cr,#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--tr{right:1.25rem}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--link{position:absolute;display:inline-block;pointer-events:all;padding:.5em;color:#fff;font-size:1rem;font-weight:700;line-height:1.2;text-align:center;border-radius:5px;text-decoration:none;-webkit-transition:all .15s ease-out;-o-transition:all .15s ease-out;transition:all .15s ease-out}@media(max-width:768px){#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--link{font-size:.875rem}}@media(max-width:480px){#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--link{font-size:.75rem}}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--md{font-size:1.25rem}@media(max-width:768px){#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--md{font-size:1rem}}@media(max-width:480px){#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--md{font-size:1.875rem}}#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--lg{font-size:1.5rem}@media(max-width:768px){#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--lg{font-size:1.25rem}}@media(max-width:480px){#smartplayer#smartplayer#smartplayer.smartplay .smartplayer-thumbnail--lg{font-size:1rem}}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-paused:not(.smartplayer-in-resume):not(.smartplayer-show-smart-auto-play) .smartplayer-thumbnail--ready{z-index:9;display:block}#smartplayer#smartplayer#smartplayer #smartplayer#smartplayer#smartplayer .smartplayer-elements-container,#smartplayer#smartplayer#smartplayer .smartplayer-mini-hooks-container{top:50%;position:absolute;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);left:50%}#smartplayer#smartplayer#smartplayer .smartplayer-mini-hooks-container{pointer-events:none;z-index:0}#smartplayer#smartplayer#smartplayer .smartplayer-mini-hooks-element{pointer-events:none;cursor:pointer;opacity:0}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-smart-auto-play{cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-smart-auto-play .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-smart-auto-play .smartplayer-controller-mask{opacity:0!important;-webkit-transform:translateY(100%)!important;-ms-transform:translateY(100%)!important;transform:translateY(100%)!important}#smartplayer#smartplayer#smartplayer .smartplayer-smartplay{cursor:pointer;z-index:9999;position:absolute;top:0;opacity:0;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-smartplay *{cursor:pointer}#smartplayer#smartplayer#smartplayer.smartplayer-show-smart-auto-play .smartplayer-smartplay{opacity:1}#smartplayer#smartplayer#smartplayer.smartplayer-show-smart-auto-play:not(.smartplayer-show-smart-auto-play) .smartplayer-loading-icon{opacity:0}#smartplayer#smartplayer#smartplayer.smartplay{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1;width:100%;max-width:100%;max-height:100%}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-initial{cursor:pointer!important}#smartplayer#smartplayer#smartplayer.smartplay svg{width:100%;height:100%}#smartplayer#smartplayer#smartplayer.smartplay svg circle,#smartplayer#smartplayer#smartplayer.smartplay svg path{fill:#fff}#smartplayer#smartplayer#smartplayer.smartplay:-webkit-full-screen{width:100%;height:100%;background:#000;position:fixed;z-index:100000;left:0;top:0;margin:0;padding:0!important;-webkit-transform:translate(0);transform:translate(0)}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-bar-wrap,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-setting-loop,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-live .smartplayer-time{display:none}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-arrow .smartplayer-icon{margin:0 -3px}@media(min-width:900px){#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing .smartplayer-controller-mask{opacity:0}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing:hover .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-playing:hover .smartplayer-controller-mask{opacity:1}}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-loading .smartplayer-bezel .smartplayer-loading-icon{display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller{cursor:none}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-hide-controller .smartplayer-controller-mask{opacity:0;-webkit-transform:translateY(100%);-ms-transform:translateY(100%);transform:translateY(100%)}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-controller .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-show-controller .smartplayer-controller-mask{opacity:1}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled{position:fixed!important;z-index:100000;left:0;top:0;width:100%!important;height:100%!important;padding:0!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled .smartplayer-video-wrap,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-fulled .smartplayer-video-wrap .smartplayer-video-current{height:100%}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-controller .smartplayer-icons .smartplayer-full .smartplayer-full-in-icon{position:static;display:inline-block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-bar-time,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile.smartplayer-hide-controller .smartplayer-mobile-play,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-mobile-play{display:none}.smartplayer-web-fullscreen-fix{position:fixed;top:0;left:0;margin:0;padding:0}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-controller,#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-controller-mask{opacity:0!important;-webkit-transform:translateY(100%)!important;-ms-transform:translateY(100%)!important;transform:translateY(100%)!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-in-resume .smartplayer-bigplay{display:none}#smartplayer#smartplayer#smartplayer:not(.smartplayer-fulled){width:100%;position:relative;padding:56.25% 0 0}#smartplayer#smartplayer#smartplayer .smartplayer-content{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%}#smartplayer#smartplayer#smartplayer .smartplayer-opacity-0{opacity:0!important}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-icon.smartplayer-full-in-icon{display:block}#smartplayer#smartplayer#smartplayer.smartplay.smartplayer-mobile .smartplayer-icon.smartplayer-full-icon{display:none}',""]),e.a=n},function(t,e,r){(function(t){var a=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(n.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new i(n.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(49),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(2))},function(t,e){var r,a,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(t){a=s}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&p())}function p(){if(!u){var t=o(h);u=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,u=!1,function(t){if(a===clearTimeout)return clearTimeout(t);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{a(t)}catch(e){try{return a.call(null,t)}catch(e){return a.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function m(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new f(t,e)),1!==c.length||u||o(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];return t.apply(e,r)}}},function(t,e,r){"use strict";var a=r(0);function n(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(a.isURLSearchParams(e))i=e.toString();else{var s=[];a.forEach(e,(function(t,e){null!=t&&(a.isArray(t)?e+="[]":t=[t],a.forEach(t,(function(t){a.isDate(t)?t=t.toISOString():a.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))})))})),i=s.join("&")}if(i){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";(function(e){var a=r(0),n=r(58),i={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!a.isUndefined(t)&&a.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var o,l={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(o=r(15)),o),transformRequest:[function(t,e){return n(e,"Accept"),n(e,"Content-Type"),a.isFormData(t)||a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t)?t:a.isArrayBufferView(t)?t.buffer:a.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):a.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),a.forEach(["post","put","patch"],(function(t){l.headers[t]=a.merge(i)})),t.exports=l}).call(this,r(10))},function(t,e,r){"use strict";var a=r(0),n=r(59),i=r(61),s=r(12),o=r(62),l=r(65),c=r(66),u=r(16);t.exports=function(t){return new Promise((function(e,r){var d=t.data,h=t.headers;a.isFormData(d)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";h.Authorization="Basic "+btoa(f+":"+m)}var y=o(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),s(y,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:a,config:t,request:p};n(e,r,i),p=null}},p.onabort=function(){p&&(r(u("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){r(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(u(e,t,"ECONNABORTED",p)),p=null},a.isStandardBrowserEnv()){var v=(t.withCredentials||c(y))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;v&&(h[t.xsrfHeaderName]=v)}if("setRequestHeader"in p&&a.forEach(h,(function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete h[e]:p.setRequestHeader(e,t)})),a.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),r(t),p=null)})),d||(d=null),p.send(d)}))}},function(t,e,r){"use strict";var a=r(60);t.exports=function(t,e,r,n,i){var s=new Error(t);return a(s,e,r,n,i)}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e){e=e||{};var r={},n=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(t,e){return a.isPlainObject(t)&&a.isPlainObject(e)?a.merge(t,e):a.isPlainObject(e)?a.merge({},e):a.isArray(e)?e.slice():e}function c(n){a.isUndefined(e[n])?a.isUndefined(t[n])||(r[n]=l(void 0,t[n])):r[n]=l(t[n],e[n])}a.forEach(n,(function(t){a.isUndefined(e[t])||(r[t]=l(void 0,e[t]))})),a.forEach(i,c),a.forEach(s,(function(n){a.isUndefined(e[n])?a.isUndefined(t[n])||(r[n]=l(void 0,t[n])):r[n]=l(void 0,e[n])})),a.forEach(o,(function(a){a in e?r[a]=l(t[a],e[a]):a in t&&(r[a]=l(void 0,t[a]))}));var u=n.concat(i).concat(s).concat(o),d=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===u.indexOf(t)}));return a.forEach(d,c),r}},function(t,e,r){"use strict";function a(t){this.message=t}a.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},a.prototype.__CANCEL__=!0,t.exports=a},function(t,e,r){"use strict";var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},i=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),s=[];function o(t){for(var e=-1,r=0;r<s.length;r++)if(s[r].identifier===t){e=r;break}return e}function l(t,e){for(var r={},a=[],n=0;n<t.length;n++){var i=t[n],l=e.base?i[0]+e.base:i[0],c=r[l]||0,u="".concat(l," ").concat(c);r[l]=c+1;var d=o(u),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(s[d].references++,s[d].updater(h)):s.push({identifier:u,updater:y(h,e),references:1}),a.push(u)}return a}function c(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var n=r.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(t){e.setAttribute(t,a[t])})),"function"==typeof t.insert)t.insert(e);else{var s=i(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function h(t,e,r,a){var n=r?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=d(e,n);else{var i=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}function p(t,e,r){var a=r.css,n=r.media,i=r.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var f=null,m=0;function y(t,e){var r,a,n;if(e.singleton){var i=m++;r=f||(f=c(e)),a=h.bind(null,r,i,!1),n=h.bind(null,r,i,!0)}else r=c(e),a=p.bind(null,r,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var r=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<r.length;a++){var n=o(r[a]);s[n].references--}for(var i=l(t,e),c=0;c<r.length;c++){var u=o(r[c]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}r=i}}}},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,a){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(a)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(n[s]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);a&&n[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},function(t,e,r){var a=r(7);t.exports=function(t){"use strict";var e="",r=(t=t||{}).enableSubtitle,n=t.subtitle,i=t.current,s=t.autoplay,o=t.volume,l=t.airplay,c=t.screenshot,u=t.preload,d=a.$escape;r=n&&"webvtt"===n.type;return e+='\n<video\n    class="smartplayer-video ',i&&(e+="smartplayer-video-current"),e+='"\n    ',s&&(e+="autoplay"),e+="\n    ",o<=0&&(e+="muted"),e+="\n    playsinline\n    ",l&&(e+=' x-webkit-airplay="allow" '),e+="\n    ",(c||r)&&(e+='crossorigin="anonymous"'),e+="\n    ",u&&(e+='preload="',e+=d(u),e+='"'),e+="\n    >\n    ",r&&(e+='\n    <track kind="metadata" default src="',e+=d(n.url),e+='"></track>\n    '),e+="\n</video>\n"}},function(t,e,r){"use strict";(function(e){function r(t){var e,r,n,i,s,o,l=Object.create(null);if(this[c]=l,t)if("string"==typeof t)for("?"===t.charAt(0)&&(t=t.slice(1)),s=0,o=(i=t.split("&")).length;s<o;s++)-1<(e=(n=i[s]).indexOf("="))?d(l,h(n.slice(0,e)),h(n.slice(e+1))):n.length&&d(l,h(n),"");else if(a(t))for(s=0,o=t.length;s<o;s++)d(l,(n=t[s])[0],n[1]);else if(t.forEach)t.forEach(u,l);else for(r in t)d(l,r,t[r])}var a=Array.isArray,n=r.prototype,i=/[!'\(\)~]|%20|%00/g,s=/\+/g,o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},l=function(t){return o[t]},c="__URLSearchParams__:"+Math.random();function u(t,e){d(this,e,t)}function d(t,e,r){var n=a(r)?r.join(","):r;e in t?t[e].push(n):t[e]=[n]}function h(t){return decodeURIComponent(t.replace(s," "))}function p(t){return encodeURIComponent(t).replace(i,l)}n.append=function(t,e){d(this[c],t,e)},n.delete=function(t){delete this[c][t]},n.get=function(t){var e=this[c];return t in e?e[t][0]:null},n.getAll=function(t){var e=this[c];return t in e?e[t].slice(0):[]},n.has=function(t){return t in this[c]},n.set=function(t,e){this[c][t]=[""+e]},n.forEach=function(t,e){var r=this[c];Object.getOwnPropertyNames(r).forEach((function(a){r[a].forEach((function(r){t.call(e,r,a,this)}),this)}),this)},n.toJSON=function(){return{}},n.toString=function(){var t,e,r,a,n=this[c],i=[];for(e in n)for(r=p(e),t=0,a=n[e];t<a.length;t++)i.push(r+"="+p(a[t]));return i.join("&")},function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}();"forEach"in t||(t.forEach=function(t,e){var r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(a){a.length&&!(a in r)&&(r[a]=this.getAll(a)).forEach((function(r){t.call(e,r,a,this)}),this)}),this)}),"keys"in t||(t.keys=function(){var t=[];this.forEach((function(e,r){t.push(r)}));var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(r[Symbol.iterator]=function(){return r}),r}),"values"in t||(t.values=function(){var t=[];this.forEach((function(e){t.push(e)}));var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(r[Symbol.iterator]=function(){return r}),r}),"entries"in t||(t.entries=function(){var t=[];this.forEach((function(e,r){t.push([r,e])}));var r={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(r[Symbol.iterator]=function(){return r}),r}),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,e,r,a=this.entries(),n=a.next(),i=n.done,s=[],o=Object.create(null);!i;)e=(r=n.value)[0],s.push(e),e in o||(o[e]=[]),o[e].push(r[1]),i=(n=a.next()).done;for(s.sort(),t=0;t<s.length;t++)this.delete(s[t]);for(t=0;t<s.length;t++)e=s[t],this.append(e,o[e].shift())})}((r=t.exports=e.URLSearchParams||r).prototype)}).call(this,r(2))},function(t,e){t.exports='<svg viewBox="0 0 288 288" xmlns="http://www.w3.org/2000/svg"><path d="M288 90v96c0 20-16 36-36 36h-10c-16 0-16-24 0-24h10c7 0 12-5 12-12V90c0-7-5-12-12-12H36c-7 0-12 5-12 12v96c0 7 5 12 12 12h10c16 0 16 24 0 24H36c-20 0-36-16-36-36V90c0-20 16-36 36-36h216c20 0 36 16 36 36zm-120 62l48 68c14 20 1 38-20 38H92c-21 0-34-18-20-38l48-68c13-18 35-18 48 0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M16 23c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6zM16 13c-2.206 0-4 1.794-4 4s1.794 4 4 4c2.206 0 4-1.794 4-4s-1.794-4-4-4zM27 28h-22c-1.654 0-3-1.346-3-3v-16c0-1.654 1.346-3 3-3h3c0.552 0 1 0.448 1 1s-0.448 1-1 1h-3c-0.551 0-1 0.449-1 1v16c0 0.552 0.449 1 1 1h22c0.552 0 1-0.448 1-1v-16c0-0.551-0.448-1-1-1h-11c-0.552 0-1-0.448-1-1s0.448-1 1-1h11c1.654 0 3 1.346 3 3v16c0 1.654-1.346 3-3 3zM24 10.5c0 0.828 0.672 1.5 1.5 1.5s1.5-0.672 1.5-1.5c0-0.828-0.672-1.5-1.5-1.5s-1.5 0.672-1.5 1.5zM15 4c0 0.552-0.448 1-1 1h-4c-0.552 0-1-0.448-1-1v0c0-0.552 0.448-1 1-1h4c0.552 0 1 0.448 1 1v0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.090 0.131h-22.731c-2.354 0-4.262 1.839-4.262 4.109v16.401c0 2.269 1.908 4.109 4.262 4.109h4.262v-2.706h8.469l-8.853 8.135 1.579 1.451 7.487-6.88h9.787c2.353 0 4.262-1.84 4.262-4.109v-16.401c0-2.27-1.909-4.109-4.262-4.109v0zM28.511 19.304c0 1.512-1.272 2.738-2.841 2.738h-8.425l-0.076-0.070-0.076 0.070h-11.311c-1.569 0-2.841-1.226-2.841-2.738v-13.696c0-1.513 1.272-2.739 2.841-2.739h19.889c1.569 0 2.841-0.142 2.841 1.37v15.064z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M27.128 0.38h-22.553c-2.336 0-4.229 1.825-4.229 4.076v16.273c0 2.251 1.893 4.076 4.229 4.076h4.229v-2.685h8.403l-8.784 8.072 1.566 1.44 7.429-6.827h9.71c2.335 0 4.229-1.825 4.229-4.076v-16.273c0-2.252-1.894-4.076-4.229-4.076zM28.538 19.403c0 1.5-1.262 2.717-2.819 2.717h-8.36l-0.076-0.070-0.076 0.070h-11.223c-1.557 0-2.819-1.217-2.819-2.717v-13.589c0-1.501 1.262-2.718 2.819-2.718h19.734c1.557 0 2.819-0.141 2.819 1.359v14.947zM9.206 10.557c-1.222 0-2.215 0.911-2.215 2.036s0.992 2.035 2.215 2.035c1.224 0 2.216-0.911 2.216-2.035s-0.992-2.036-2.216-2.036zM22.496 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.224 0 2.215-0.911 2.215-2.035s-0.991-2.036-2.215-2.036zM15.852 10.557c-1.224 0-2.215 0.911-2.215 2.036s0.991 2.035 2.215 2.035c1.222 0 2.215-0.911 2.215-2.035s-0.992-2.036-2.215-2.036z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M24.965 24.38h-18.132c-1.366 0-2.478-1.113-2.478-2.478v-11.806c0-1.364 1.111-2.478 2.478-2.478h18.132c1.366 0 2.478 1.113 2.478 2.478v11.806c0 1.364-1.11 2.478-2.478 2.478zM6.833 10.097v11.806h18.134l-0.002-11.806h-18.132zM2.478 28.928h5.952c0.684 0 1.238-0.554 1.238-1.239 0-0.684-0.554-1.238-1.238-1.238h-5.952v-5.802c0-0.684-0.554-1.239-1.238-1.239s-1.239 0.556-1.239 1.239v5.802c0 1.365 1.111 2.478 2.478 2.478zM30.761 19.412c-0.684 0-1.238 0.554-1.238 1.238v5.801h-5.951c-0.686 0-1.239 0.554-1.239 1.238 0 0.686 0.554 1.239 1.239 1.239h5.951c1.366 0 2.478-1.111 2.478-2.478v-5.801c0-0.683-0.554-1.238-1.239-1.238zM0 5.55v5.802c0 0.683 0.554 1.238 1.238 1.238s1.238-0.555 1.238-1.238v-5.802h5.952c0.684 0 1.238-0.554 1.238-1.238s-0.554-1.238-1.238-1.238h-5.951c-1.366-0.001-2.478 1.111-2.478 2.476zM32 11.35v-5.801c0-1.365-1.11-2.478-2.478-2.478h-5.951c-0.686 0-1.239 0.554-1.239 1.238s0.554 1.238 1.239 1.238h5.951v5.801c0 0.683 0.554 1.237 1.238 1.237 0.686 0.002 1.239-0.553 1.239-1.236z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 33"><path d="M6.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v4h4c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333zM30.667 28h-5.333c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h4v-4c0-0.8 0.533-1.333 1.333-1.333s1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM30.667 12c-0.8 0-1.333-0.533-1.333-1.333v-4h-4c-0.8 0-1.333-0.533-1.333-1.333s0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333v5.333c0 0.8-0.533 1.333-1.333 1.333zM1.333 12c-0.8 0-1.333-0.533-1.333-1.333v-5.333c0-0.8 0.533-1.333 1.333-1.333h5.333c0.8 0 1.333 0.533 1.333 1.333s-0.533 1.333-1.333 1.333h-4v4c0 0.8-0.533 1.333-1.333 1.333z"></path></svg>'},function(t,e){t.exports='<svg class="lds-eclipse" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path d="M68.095 59.578A20 20 0 0031.14 44.27a22 20-67.5 0136.955 15.308" fill="#fff"><animateTransform attributeName="transform" begin="0s" calcMode="linear" dur="0.8s" keyTimes="0;1" repeatCount="indefinite" type="rotate" values="0 50 51;360 50 51"></animateTransform></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M19.357 2.88c1.749 0 3.366 0.316 4.851 0.946 1.485 0.632 2.768 1.474 3.845 2.533s1.922 2.279 2.532 3.661c0.611 1.383 0.915 2.829 0.915 4.334 0 1.425-0.304 2.847-0.915 4.271-0.611 1.425-1.587 2.767-2.928 4.028-0.855 0.813-1.811 1.607-2.869 2.38s-2.136 1.465-3.233 2.075c-1.099 0.61-2.198 1.098-3.296 1.465-1.098 0.366-2.115 0.549-3.051 0.549-1.343 0-2.441-0.438-3.296-1.311-0.854-0.876-1.281-2.41-1.281-4.608 0-0.366 0.020-0.773 0.060-1.221s0.062-0.895 0.062-1.343c0-0.773-0.183-1.353-0.55-1.738-0.366-0.387-0.793-0.58-1.281-0.58-0.652 0-1.21 0.295-1.678 0.886s-0.926 1.23-1.373 1.921c-0.447 0.693-0.905 1.334-1.372 1.923s-1.028 0.886-1.679 0.886c-0.529 0-1.048-0.427-1.556-1.282s-0.763-2.259-0.763-4.212c0-2.197 0.529-4.241 1.587-6.133s2.462-3.529 4.21-4.912c1.75-1.383 3.762-2.471 6.041-3.264 2.277-0.796 4.617-1.212 7.018-1.253zM7.334 15.817c0.569 0 1.047-0.204 1.434-0.611s0.579-0.875 0.579-1.404c0-0.569-0.193-1.047-0.579-1.434s-0.864-0.579-1.434-0.579c-0.529 0-0.987 0.193-1.373 0.579s-0.58 0.864-0.58 1.434c0 0.53 0.194 0.998 0.58 1.404 0.388 0.407 0.845 0.611 1.373 0.611zM12.216 11.79c0.691 0 1.292-0.254 1.8-0.763s0.762-1.107 0.762-1.8c0-0.732-0.255-1.343-0.762-1.831-0.509-0.489-1.109-0.732-1.8-0.732-0.732 0-1.342 0.244-1.831 0.732-0.488 0.488-0.732 1.098-0.732 1.831 0 0.693 0.244 1.292 0.732 1.8s1.099 0.763 1.831 0.763zM16.366 25.947c0.692 0 1.282-0.214 1.77-0.64s0.732-0.987 0.732-1.678-0.244-1.261-0.732-1.709c-0.489-0.448-1.078-0.671-1.77-0.671-0.65 0-1.21 0.223-1.678 0.671s-0.702 1.018-0.702 1.709c0 0.692 0.234 1.25 0.702 1.678s1.027 0.64 1.678 0.64zM19.113 9.592c0.651 0 1.129-0.203 1.433-0.611 0.305-0.406 0.459-0.874 0.459-1.404 0-0.488-0.154-0.947-0.459-1.373-0.304-0.427-0.782-0.641-1.433-0.641-0.529 0-1.008 0.193-1.434 0.58s-0.64 0.865-0.64 1.434c0 0.571 0.213 1.049 0.64 1.434 0.427 0.389 0.905 0.581 1.434 0.581zM24.848 12.826c0.57 0 1.067-0.213 1.495-0.64 0.427-0.427 0.64-0.947 0.64-1.556 0-0.57-0.214-1.068-0.64-1.495-0.428-0.427-0.927-0.64-1.495-0.64-0.611 0-1.129 0.213-1.555 0.64-0.428 0.427-0.642 0.926-0.642 1.495 0 0.611 0.213 1.129 0.642 1.556s0.947 0.64 1.555 0.64z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 32"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-7 -7 35 35"><path d="M23.5,10.865,13,1.384a1.5,1.5,0,0,0-2.5,1.138V8.047a.25.25,0,0,1-.418.186L2.5,1.384A1.5,1.5,0,0,0,0,2.522V21.479a1.5,1.5,0,0,0,2.5,1.136l7.583-6.847a.25.25,0,0,1,.418.186v5.525A1.5,1.5,0,0,0,13,22.615l10.5-9.479A1.539,1.539,0,0,0,23.5,10.865Z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="-7 -7 35 35"><path d="M21.5,1.385,13.918,8.232a.25.25,0,0,1-.418-.185V2.521A1.5,1.5,0,0,0,11,1.385L.505,10.863a1.541,1.541,0,0,0,0,2.273L11,22.614a1.5,1.5,0,0,0,2.5-1.136V15.953a.25.25,0,0,1,.418-.185L21.5,22.614A1.5,1.5,0,0,0,24,21.478V2.521A1.5,1.5,0,0,0,21.5,1.385Z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M13.725 30l3.9-5.325-3.9-1.125v6.45zM0 17.5l11.050 3.35 13.6-11.55-10.55 12.425 11.8 3.65 6.1-23.375-32 15.5z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 28"><path d="M28.633 17.104c0.035 0.21 0.026 0.463-0.026 0.76s-0.14 0.598-0.262 0.904c-0.122 0.306-0.271 0.581-0.445 0.825s-0.367 0.419-0.576 0.524c-0.209 0.105-0.393 0.157-0.55 0.157s-0.332-0.035-0.524-0.105c-0.175-0.052-0.393-0.1-0.655-0.144s-0.528-0.052-0.799-0.026c-0.271 0.026-0.541 0.083-0.812 0.17s-0.502 0.236-0.694 0.445c-0.419 0.437-0.664 0.934-0.734 1.493s0.009 1.092 0.236 1.598c0.175 0.349 0.148 0.699-0.079 1.048-0.105 0.14-0.271 0.284-0.498 0.432s-0.476 0.284-0.747 0.406-0.555 0.218-0.851 0.288c-0.297 0.070-0.559 0.105-0.786 0.105-0.157 0-0.306-0.061-0.445-0.183s-0.236-0.253-0.288-0.393h-0.026c-0.192-0.541-0.52-1.009-0.982-1.402s-1-0.589-1.611-0.589c-0.594 0-1.131 0.197-1.611 0.589s-0.816 0.851-1.009 1.375c-0.087 0.21-0.218 0.362-0.393 0.458s-0.367 0.144-0.576 0.144c-0.244 0-0.52-0.044-0.825-0.131s-0.611-0.197-0.917-0.327c-0.306-0.131-0.581-0.284-0.825-0.458s-0.428-0.349-0.55-0.524c-0.087-0.122-0.135-0.266-0.144-0.432s0.057-0.397 0.197-0.694c0.192-0.402 0.266-0.86 0.223-1.375s-0.266-0.991-0.668-1.428c-0.244-0.262-0.541-0.432-0.891-0.511s-0.681-0.109-0.995-0.092c-0.367 0.017-0.742 0.087-1.127 0.21-0.244 0.070-0.489 0.052-0.734-0.052-0.192-0.070-0.371-0.231-0.537-0.485s-0.314-0.533-0.445-0.838c-0.131-0.306-0.231-0.62-0.301-0.943s-0.087-0.59-0.052-0.799c0.052-0.384 0.227-0.629 0.524-0.734 0.524-0.21 0.995-0.555 1.415-1.035s0.629-1.017 0.629-1.611c0-0.611-0.21-1.144-0.629-1.598s-0.891-0.786-1.415-0.996c-0.157-0.052-0.288-0.179-0.393-0.38s-0.157-0.406-0.157-0.616c0-0.227 0.035-0.48 0.105-0.76s0.162-0.55 0.275-0.812 0.244-0.502 0.393-0.72c0.148-0.218 0.31-0.38 0.485-0.485 0.14-0.087 0.275-0.122 0.406-0.105s0.275 0.052 0.432 0.105c0.524 0.21 1.070 0.275 1.637 0.197s1.070-0.327 1.506-0.747c0.21-0.209 0.362-0.467 0.458-0.773s0.157-0.607 0.183-0.904c0.026-0.297 0.026-0.568 0-0.812s-0.048-0.419-0.065-0.524c-0.035-0.105-0.066-0.227-0.092-0.367s-0.013-0.262 0.039-0.367c0.105-0.244 0.293-0.458 0.563-0.642s0.563-0.336 0.878-0.458c0.314-0.122 0.62-0.214 0.917-0.275s0.533-0.092 0.707-0.092c0.227 0 0.406 0.074 0.537 0.223s0.223 0.301 0.275 0.458c0.192 0.471 0.507 0.886 0.943 1.244s0.952 0.537 1.546 0.537c0.611 0 1.153-0.17 1.624-0.511s0.803-0.773 0.996-1.297c0.070-0.14 0.179-0.284 0.327-0.432s0.301-0.223 0.458-0.223c0.244 0 0.511 0.035 0.799 0.105s0.572 0.166 0.851 0.288c0.279 0.122 0.537 0.279 0.773 0.472s0.423 0.402 0.563 0.629c0.087 0.14 0.113 0.293 0.079 0.458s-0.070 0.284-0.105 0.354c-0.227 0.506-0.297 1.039-0.21 1.598s0.341 1.048 0.76 1.467c0.419 0.419 0.934 0.651 1.546 0.694s1.179-0.057 1.703-0.301c0.14-0.087 0.31-0.122 0.511-0.105s0.371 0.096 0.511 0.236c0.262 0.244 0.493 0.616 0.694 1.113s0.336 1 0.406 1.506c0.035 0.297-0.013 0.528-0.144 0.694s-0.266 0.275-0.406 0.327c-0.542 0.192-1.004 0.528-1.388 1.009s-0.576 1.026-0.576 1.637c0 0.594 0.162 1.113 0.485 1.559s0.747 0.764 1.27 0.956c0.122 0.070 0.227 0.14 0.314 0.21 0.192 0.157 0.323 0.358 0.393 0.602v0zM16.451 19.462c0.786 0 1.528-0.149 2.227-0.445s1.305-0.707 1.821-1.231c0.515-0.524 0.921-1.131 1.218-1.821s0.445-1.428 0.445-2.214c0-0.786-0.148-1.524-0.445-2.214s-0.703-1.292-1.218-1.808c-0.515-0.515-1.122-0.921-1.821-1.218s-1.441-0.445-2.227-0.445c-0.786 0-1.524 0.148-2.214 0.445s-1.292 0.703-1.808 1.218c-0.515 0.515-0.921 1.118-1.218 1.808s-0.445 1.428-0.445 2.214c0 0.786 0.149 1.524 0.445 2.214s0.703 1.297 1.218 1.821c0.515 0.524 1.118 0.934 1.808 1.231s1.428 0.445 2.214 0.445v0z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z"></path></svg>'},function(t,e){t.exports='\x3c!-- <svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg> --\x3e\x3c!-- <svg version="1.1" viewBox="0 0 36 36" fill-opacity="1" width="100%" height="100%"><path d="M11,11 C9.89,11 9,11.9 9,13 L9,23 C9,24.1 9.89,25 11,25 L25,25 C26.1,25 27,24.1 27,23 L27,13 C27,11.9 26.1,11 25,11 L11,11 Z M17,17 L15.5,17 L15.5,16.5 L13.5,16.5 L13.5,19.5 L15.5,19.5 L15.5,19 L17,19 L17,20 C17,20.55 16.55,21 16,21 L13,21 C12.45,21 12,20.55 12,20 L12,16 C12,15.45 12.45,15 13,15 L16,15 C16.55,15 17,15.45 17,16 L17,17 L17,17 Z M24,17 L22.5,17 L22.5,16.5 L20.5,16.5 L20.5,19.5 L22.5,19.5 L22.5,19 L24,19 L24,20 C24,20.55 23.55,21 23,21 L20,21 C19.45,21 19,20.55 19,20 L19,16 C19,15.45 19.45,15 20,15 L23,15 C23.55,15 24,15.45 24,16 L24,17 L24,17 Z" fill="#fff"></path></svg> --\x3e<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M512 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l448 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.433 1.258C13.5841 1.34378 15.6607 2.06916 17.3973 3.34139C19.1339 4.61363 20.4517 6.37489 21.182 8.4C21.2015 8.45424 21.2391 8.50009 21.2885 8.5298C21.3378 8.5595 21.396 8.57123 21.453 8.563L23.142 8.309C23.2346 8.29713 23.3286 8.31069 23.4141 8.34821C23.4995 8.38574 23.5731 8.44582 23.627 8.522C23.6799 8.59948 23.7099 8.69027 23.7136 8.78399C23.7173 8.87771 23.6946 8.97058 23.648 9.052L20.969 13.752C20.9309 13.8186 20.8781 13.8755 20.8145 13.9184C20.7509 13.9612 20.6784 13.9889 20.6024 13.9993C20.5264 14.0096 20.4491 14.0023 20.3763 13.978C20.3036 13.9537 20.2375 13.913 20.183 13.859L16.413 10.113C16.347 10.0476 16.3005 9.9652 16.2787 9.87489C16.2569 9.78459 16.2607 9.69 16.2897 9.60175C16.3187 9.51349 16.3717 9.43504 16.4427 9.37521C16.5138 9.31538 16.6001 9.27652 16.692 9.263L18.407 9.007C18.4453 9.00143 18.4818 8.98705 18.5136 8.96498C18.5454 8.94292 18.5716 8.91377 18.5902 8.87984C18.6088 8.84591 18.6193 8.80813 18.6208 8.76946C18.6224 8.73079 18.6149 8.69229 18.599 8.657C18.0034 7.30842 17.0576 6.14385 15.8599 5.28421C14.6622 4.42457 13.2562 3.9012 11.7879 3.76843C10.3196 3.63565 8.84257 3.89832 7.51008 4.52916C6.17759 5.16 5.03826 6.13602 4.21035 7.35588C3.38245 8.57574 2.89616 9.99497 2.80198 11.4662C2.70779 12.9375 3.00914 14.4071 3.67474 15.7226C4.34034 17.0381 5.34592 18.1514 6.58709 18.947C7.82826 19.7426 9.25977 20.1915 10.733 20.247C11.0645 20.253 11.3801 20.3904 11.6103 20.629C11.8405 20.8677 11.9665 21.188 11.9605 21.5195C11.9545 21.851 11.8171 22.1666 11.5785 22.3968C11.3398 22.627 11.0195 22.753 10.688 22.747H10.641C9.22425 22.7035 7.83008 22.3803 6.53871 21.796C5.24733 21.2117 4.08425 20.3778 3.11639 19.3422C2.14853 18.3067 1.39498 17.09 0.899117 15.7622C0.403251 14.4343 0.17485 13.0215 0.22706 11.6051C0.27927 10.1886 0.611059 8.79645 1.20333 7.5087C1.79561 6.22096 2.63668 5.06304 3.67815 4.10158C4.71963 3.14012 5.94094 2.39409 7.27183 1.90642C8.60271 1.41875 10.0169 1.19906 11.433 1.26V1.258Z" fill="black"></path></svg>'},function(t,e){t.exports='<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.567 1.258C10.4159 1.34378 8.33932 2.06916 6.60269 3.34139C4.86607 4.61363 3.54834 6.37489 2.818 8.4C2.79854 8.45424 2.76093 8.50009 2.71155 8.5298C2.66217 8.5595 2.60404 8.57123 2.547 8.563L0.858001 8.309C0.765439 8.29713 0.671392 8.31069 0.58595 8.34821C0.500507 8.38574 0.426892 8.44582 0.373001 8.522C0.320143 8.59948 0.290143 8.69027 0.28643 8.78399C0.282716 8.87771 0.305439 8.97058 0.352001 9.052L3.031 13.752C3.06906 13.8186 3.12192 13.8755 3.18549 13.9184C3.24906 13.9612 3.32164 13.9889 3.39762 13.9993C3.4736 14.0096 3.55094 14.0023 3.62366 13.978C3.69638 13.9537 3.76253 13.913 3.817 13.859L7.587 10.113C7.65301 10.0476 7.69952 9.9652 7.72129 9.87489C7.74307 9.78459 7.73926 9.69 7.71029 9.60175C7.68132 9.51349 7.62834 9.43504 7.55728 9.37521C7.48622 9.31538 7.3999 9.27652 7.308 9.263L5.593 9.007C5.5547 9.00143 5.51822 8.98705 5.48643 8.96498C5.45464 8.94292 5.4284 8.91377 5.40979 8.87984C5.39118 8.84591 5.3807 8.80813 5.37917 8.76946C5.37765 8.73079 5.38512 8.69229 5.401 8.657C5.99665 7.30842 6.94242 6.14385 8.14013 5.28421C9.33783 4.42457 10.7438 3.9012 12.2121 3.76843C13.6804 3.63565 15.1574 3.89832 16.4899 4.52916C17.8224 5.16 18.9617 6.13602 19.7896 7.35588C20.6176 8.57574 21.1038 9.99497 21.198 11.4662C21.2922 12.9375 20.9909 14.4071 20.3253 15.7226C19.6597 17.0381 18.6541 18.1514 17.4129 18.947C16.1717 19.7426 14.7402 20.1915 13.267 20.247C12.9355 20.253 12.6199 20.3904 12.3897 20.629C12.1595 20.8677 12.0335 21.188 12.0395 21.5195C12.0455 21.851 12.1829 22.1666 12.4215 22.3968C12.6602 22.627 12.9805 22.753 13.312 22.747H13.359C14.7758 22.7035 16.1699 22.3803 17.4613 21.796C18.7527 21.2117 19.9157 20.3778 20.8836 19.3422C21.8515 18.3067 22.605 17.09 23.1009 15.7622C23.5967 14.4343 23.8251 13.0215 23.7729 11.6051C23.7207 10.1886 23.3889 8.79645 22.7967 7.5087C22.2044 6.22096 21.3633 5.06304 20.3218 4.10158C19.2804 3.14012 18.0591 2.39409 16.7282 1.90642C15.3973 1.41875 13.9831 1.19906 12.567 1.26V1.258Z" fill="black"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 21 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 13 14"><path d="M11.48 4.541c-.688-.377-1.36-.781-2.04-1.173l-2.28-1.32c-.873-.504-1.753-.997-2.616-1.516-.577-.347-1.178-.556-1.858-.53-.373.015-.384.01-.384.393V10.88c0 .434.17.628.593.708.221.041.412-.045.597-.141.166-.087.321-.192.483-.286l4.62-2.667c.53-.306 1.066-.6 1.589-.917.362-.22.444-.707.197-1.016-.097-.12-.229-.196-.36-.272A3429.1 3429.1 0 0 0 7.176 4.65c-.91-.524-1.823-1.045-2.732-1.572-.134-.078-.198-.07-.197.1.002.324.002.649-.002.973a.255.255 0 0 0 .143.245c.358.201.714.405 1.07.61 1.06.61 2.12 1.22 3.179 1.833.182.105.178.175-.006.282-.871.505-1.743 1.01-2.614 1.517l-2.353 1.366c-.167.097-.215.073-.229-.114-.003-.044-.002-.087-.002-.13V1.805c0-.08-.001-.16.006-.238.022-.257.062-.28.28-.155.948.548 1.893 1.098 2.84 1.645 1.465.846 2.933 1.686 4.395 2.537.355.207.592.526.697.926.21.809-.106 1.521-.842 1.935-.401.225-.798.46-1.197.69a6910.143 6910.143 0 0 1-5.883 3.414c-.42.243-.874.312-1.333.173-.746-.227-1.174-.84-1.174-1.627 0-2.694.002-5.39-.003-8.084 0-.367.027-.719.225-1.039a.422.422 0 0 0 .047-.23c0-.375.001-.749-.001-1.124 0-.068.026-.156-.059-.191-.066-.027-.127.021-.176.06-.368.296-.685.631-.91 1.054C.076 2.052.02 2.598.021 3.144c.009 2.73-.076 5.462.04 8.19.05 1.2.809 2.105 1.898 2.483.283.098.586.207.882.178.522-.05 1.03-.168 1.497-.445.934-.555 1.883-1.086 2.824-1.63 1.39-.801 2.779-1.606 4.17-2.408.48-.277.9-.61 1.182-1.105.77-1.35.311-3.129-1.036-3.866z" fill="#000"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32"><g fill="#000" clip-path="url(#a)"><path d="M16 2.9 2.59 29.624h26.82L16 2.899zM16 0c.69 0 1.38.465 1.903 1.395l13.659 27.223c1.046 1.86.156 3.382-1.979 3.382H2.417C.283 32-.607 30.478.44 28.617L14.098 1.395C14.62.465 15.31 0 16 0z"></path><path d="M14 25a2 2 0 1 0 4 0 2 2 0 0 0-4 0zm2-4a2 2 0 0 0 2-2v-6a2 2 0 1 0-4 0v6a2 2 0 0 0 2 2z"></path></g><defs><clipPath id="a"><path d="M0 0h32v32H0z" fill="#fff" transform="matrix(-1 0 0 1 32 0)"></path></clipPath></defs></svg>'},function(t,e,r){var a=r(7);t.exports=function(t){"use strict";var e="",r=(t=t||{}).options,n=a.$escape,i=t.icons,s=a.$each,o=(t.$value,t.$index,t.undefined),l=t.video,c=t.tran,u=t.styles;return e+='<div class="smartplayer-mask"></div>\n<div class="smartplayer-video-wrap">\n    ',r.logo&&r.displays.logo&&(e+='\n    <div class="smartplayer-logo">\n        <img src="',e+=n(r.logo),e+='">\n    </div>\n    '),e+='\n    <div class="smartplayer-subtitle ',r.subtitle&&r.subtitle.show_by_default||(e+="smartplayer-subtitle-hide"),e+='"></div>\n    <div class="smartplayer-bezel">\n        <span class="smartplayer-bezel-icon"></span>\n        <span class="smartplayer-loading-icon">',e+=i.loading,e+='</span>\n    </div>\n</div>\n\n<div\n    id="smartplay-poster"\n    style="display: none; width: 100%; height: 100%; background: url(http://192.168.1.31:3000/',e+=n(r.accountId),e+="/",e+=n(r.videoId),e+='/poster.gif) no-repeat center center; background-size: cover; position: absolute; top: 0; left: 0; z-index: 99; pointer-events: none;"\n></div>\n\n',r.mini_hooks&&r.mini_hooks_elements&&r.mini_hooks_elements.length>0&&(e+="\n<style>\n",s(r.mini_hooks_elements,(function(t,r){e+="\n#smartplayer#smartplayer#smartplayer .smartplayer-show-mini-hook-",e+=n(t.id),e+=" { animation: smartplayer-mini-hook-show-",e+=n(t.id),e+=" 0.8s ease-in; opacity: ",e+=n(t.opacity!=o&&null!=t.opacity?t.opacity:1),e+=";}\n#smartplayer#smartplayer#smartplayer .smartplayer-fade-mini-hook-",e+=n(t.id),e+=" { animation: smartplayer-mini-hook-fade-",e+=n(t.id),e+=" 0.8s ease-out; opacity: 0;}\n\n@keyframes smartplayer-mini-hook-show-",e+=n(t.id),e+=" {\n  0% { opacity: 0; }\n  50% { opacity: ",e+=n(t.opacity!=o&&null!=t.opacity?t.opacity/2:.5),e+="; }\n  to { opacity: ",e+=n(t.opacity!=o&&null!=t.opacity?t.opacity:1),e+="; }\n}\n@keyframes smartplayer-mini-hook-fade-",e+=n(t.id),e+=" {\n  0% { opacity: ",e+=n(t.opacity!=o&&null!=t.opacity?t.opacity:1),e+="; }\n  50% { opacity: ",e+=n(t.opacity!=o&&null!=t.opacity?t.opacity/2:.5),e+="; }\n  to { opacity: 0; }\n}\n"})),e+='\n</style>\n    <div class="smartplayer-elements-container smartplayer-mini-hooks-container" style="position:absolute;transform-origin:top left;width: ',e+=r.video.width,e+="px;height: ",e+=r.video.height,e+='px;">\n        ',s(r.mini_hooks_elements,(function(t,r){e+="\n            ","text"===t.type&&(e+='\n                <span id="',e+=n(t.id),e+='" class="smartplayer-mini-hooks-element smartplayer-smart-element" style="left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;position:absolute;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;font-size:",e+=n(t.properties.size),e+="px;color:",e+=n(t.properties.color),e+="; ",t.properties.align&&(e+="text-align:",e+=n(t.properties.align),e+=";"),e+="font-weight:",e+=n(t.properties.weight),e+=';">',e+=n(t.properties.value),e+="</span>\n            "),e+="\n            ","image"===t.type&&(e+='\n                <img id="',e+=n(t.id),e+='" class="smartplayer-mini-hooks-element smartplayer-smart-element" style="position:absolute;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+='deg;" />\n            '),e+="\n            ","box"===t.type&&(e+='\n                <div id="',e+=n(t.id),e+='" class="smartplayer-mini-hooks-element smartplayer-smart-element" style="position:absolute;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;border-width:",e+=n(t.properties.border.size),e+="px;border-color:",e+=n(t.properties.border.color),e+=";border-radius:",e+=n(t.properties.radius),e+="px;border-style:",e+=n(t.properties.border.type),e+=";background-color:",e+=n(t.properties.color),e+="; ",t.opacity&&(e+=" opacity:",e+=n(t.opacity),e+=";"),e+='" ></div>\n            '),e+="\n        "})),e+="\n    </div>\n"),e+="\n\n",l.pic&&(e+='\n<div class="smartplayer-image-start smartplayer-opacity-0" style="background-image: url(',e+=n(l.pic),e+=");",l.pic_background&&(e+="background-color: ",e+=n(l.pic_background)),e+='"></div>\n'),e+="\n\n",l.pic_pause&&(e+='\n<div class="smartplayer-image-pause" style="background-image: url(',e+=n(l.pic_pause),e+=");",l.pic_background&&(e+="background-color: ",e+=n(l.pic_background)),e+='"></div>\n'),e+="\n\n",l.pic_finish&&(e+='\n<div class="smartplayer-image-finish" style="background-image: url(',e+=n(l.pic_finish),e+=");",l.pic_background&&(e+="background-color: ",e+=n(l.pic_background)),e+='"></div>\n'),e+="\n\n",r.thumbs.length>0&&(e+='\n<div class="smartplayer-thumbnail"></div>\n<style>',s(r.thumbs,(function(t,r){e+="\n",t.has_button&&(e+="#smartplayer#smartplayer#smartplayer #",e+=n(t.id),e+=" {background-color: ",e+=n(t.button_background_color),e+=";color:",e+=n(t.button_text_color),e+=";}\n#smartplayer#smartplayer#smartplayer #",e+=n(t.id),e+=":hover {background-color: ",e+=n(t.button_background_hover_color),e+=";color:",e+=n(t.button_text_color),e+=";}"),e+="\n"})),e+="</style>\n"),e+='\n\n<div class="smartplayer-controller-mask"></div>\n<div class="smartplayer-controller"',r.fake_bar&&(e+=' style="margin-bottom: ',e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height:10),e+="px;height: ",e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height+43:53),e+='px"'),e+='>\n    <div class="smartplayer-icons smartplayer-icons-left">\n        ',r.displays.play_pause&&(e+='\n        <button class="smartplayer-icon smartplayer-play-icon" aria-label="play">\n            <span class="smartplayer-icon-content">',e+=i.play,e+="</span>\n        </button>\n        "),e+="\n\n        ",r.displays.backward&&(e+='\n            <button class="smartplayer-icon smartplayer-seek-rewind-icon" aria-label="rewind">\n                <span class="smartplayer-icon-content">',e+=i.seekRewind,e+="</span>\n            </button>\n        "),e+="\n        ",r.displays.forward&&(e+='\n            <button class="smartplayer-icon smartplayer-seek-forward-icon" aria-label="forward">\n                <span class="smartplayer-icon-content">',e+=i.seekForward,e+="</span>\n            </button>\n        "),e+="\n        ",r.displays.speed_control&&(e+='\n        <div class="smartplayer-speed-control">\n            <button class="smartplayer-icon smartplayer-speed-control-display">\n                <span class="smartplayer-icon-content smartplayer-speed-control-display-content">',e+=n(r.turbo&&r.turbo_speed||1),e+='X</span>\n            </button>\n            <div class="smartplayer-speed-control-box smartplayer-speed-control-box-to-left">\n                <div class="smartplayer-speed-control-origin-panel">\n                    ',s(r.playbackSpeed,(function(t,r){e+='\n                        <div class="smartplayer-speed-control-item" data-speed="',e+=n(t),e+='">\n                            <span class="smartplayer-label">',e+=n(t),e+="</span>\n                        </div>\n                    "})),e+="\n                </div>\n            </div>\n        </div>\n        "),e+="\n        ",r.displays.volume&&(e+='\n        <div class="smartplayer-volume">\n            <button class="smartplayer-icon smartplayer-volume-icon" aria-label="volume">\n                <span class="smartplayer-icon-content">',e+=i.volumeDown,e+="</span>\n            </button>\n\n            ",r.displays.volume_bar&&(e+='\n            <div class="smartplayer-volume-bar-wrap" data-balloon-pos="up">\n                <div class="smartplayer-volume-bar">\n                    <div class="smartplayer-volume-bar-inner" style="background: ',e+=n(r.theme),e+=';">\n                        <span class="smartplayer-thumb" style="background: ',e+=n(r.theme),e+='"></span>\n                    </div>\n                </div>\n            </div>\n            '),e+="\n        </div>\n        "),e+="\n\n        ",r.displays.time&&(e+='\n        <span class="smartplayer-time">\n            <span class="smartplayer-ptime">0:00</span> /\n            <span class="smartplayer-dtime">0:00</span>\n        </span>\n        '),e+="\n        ",r.live&&(e+='\n        <span class="smartplayer-live-badge"><span class="smartplayer-live-dot" style="background: ',e+=n(r.theme),e+=';"></span>',e+=n(c("Live")),e+="</span>\n        "),e+='\n    </div>\n    <div class="smartplayer-icons smartplayer-icons-right">\n        ',r.video.quality&&(e+='\n        <div class="smartplayer-quality">\n            <button class="smartplayer-icon smartplayer-quality-icon" aria-label="quality">',e+=n(r.video.quality[r.video.defaultQuality].name),e+='</button>\n            <div class="smartplayer-quality-mask">\n                <div class="smartplayer-quality-list">\n                ',s(r.video.quality,(function(t,r){e+='\n                    <div class="smartplayer-quality-item" data-index="',e+=n(r),e+='">',e+=n(t.name),e+="</div>\n                "})),e+="\n                </div>\n            </div>\n        </div>\n        "),e+="\n        ",r.screenshot&&(e+='\n        <div class="smartplayer-icon smartplayer-camera-icon" data-balloon="',e+=n(c("Screenshot")),e+='" data-balloon-pos="up">\n            <span class="smartplayer-icon-content">',e+=i.camera,e+="</span>\n        </div>\n        "),e+="\n        ",r.airplay&&(e+='\n        <div class="smartplayer-icon smartplayer-airplay-icon" data-balloon="',e+=n(c("AirPlay")),e+='" data-balloon-pos="up">\n            <span class="smartplayer-icon-content">',e+=i.airplay,e+="</span>\n        </div>\n        "),e+="\n        ",r.subtitle&&r.subtitle_active&&r.displays.subtitle_control&&(e+='\n        <div class="smartplayer-subtitle-btn">\n            ',r.subtitle.show_by_default?(e+='\n                <button class="smartplayer-icon smartplayer-subtitle-icon" aria-label="subtitle" data-balloon="',e+=n(c("Hide subtitle")),e+='" data-balloon-pos="up">\n                    <span class="smartplayer-icon-content">',e+=i.subtitleActive,e+="</span>\n                </button>\n            "):(e+='\n                <button class="smartplayer-icon smartplayer-subtitle-icon" aria-label="subtitle" data-balloon="',e+=n(c("Show subtitle")),e+='" data-balloon-pos="up">\n                    <span class="smartplayer-icon-content">',e+=i.subtitleDisabled,e+="</span>\n                </button>\n            "),e+="\n        </div>\n        "),e+="\n        ",r.displays.settings&&(e+='\n        <div class="smartplayer-setting">\n            <button class="smartplayer-icon smartplayer-setting-icon" aria-label="setting" data-balloon="',e+=n(c("Setting")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.setting,e+='</span>\n            </button>\n            <div class="smartplayer-setting-box">\n                <div class="smartplayer-setting-origin-panel">\n                    <div class="smartplayer-setting-item smartplayer-setting-loop">\n                        <span class="smartplayer-label">',e+=n(c("Loop")),e+='</span>\n                        <div class="smartplayer-toggle">\n                            <input class="smartplayer-toggle-setting-input" type="checkbox" name="smartplayer-toggle">\n                            <label for="smartplayer-toggle"></label>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        '),e+="\n\n        ",r.displays.fullscreen&&(e+='\n        <div class="smartplayer-full">\n            <button class="smartplayer-icon smartplayer-full-in-icon" aria-label="fullscreen" data-balloon="',e+=n(c("Web full screen")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.fullWeb,e+='</span>\n            </button>\n            <button class="smartplayer-icon smartplayer-full-icon" aria-label="fullscreen" data-balloon="',e+=n(c("Full screen")),e+='" data-balloon-pos="up">\n                <span class="smartplayer-icon-content">',e+=i.full,e+="</span>\n            </button>\n        </div>\n        "),e+="\n    </div>\n    ",r.displays.seekbar&&(e+='\n    <div class="smartplayer-bar-wrap">\n        ',r.displays.seekbar_time&&(e+='\n        <div class="smartplayer-bar-time smartplayer-hidden">00:00</div>\n        '),e+='\n        <div class="smartplayer-bar-preview"></div>\n        <div class="smartplayer-bar">\n            <div class="smartplayer-loaded" style="width: 0;"></div>\n            <div class="smartplayer-played" style="width: 0; background: ',e+=n(r.theme),e+='">\n                <span class="smartplayer-thumb" style="background: ',e+=n(r.theme),e+='"></span>\n            </div>\n        </div>\n    </div>\n    '),e+='\n</div>\n\n<div class="smartplayer-info-panel smartplayer-info-panel-hide">\n    <div class="smartplayer-info-panel-close">[x]</div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-version">\n        <span class="smartplayer-info-panel-item-title">Player version</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-fps">\n        <span class="smartplayer-info-panel-item-title">Player FPS</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-type">\n        <span class="smartplayer-info-panel-item-title">Video type</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-url">\n        <span class="smartplayer-info-panel-item-title">Video url</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-resolution">\n        <span class="smartplayer-info-panel-item-title">Video resolution</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n    <div class="smartplayer-info-panel-item smartplayer-info-panel-item-duration">\n        <span class="smartplayer-info-panel-item-title">Video duration</span>\n        <span class="smartplayer-info-panel-item-data"></span>\n    </div>\n</div>\n\n',"smartplay"!=r.autoplay||r.smart_autoplay_elements&&r.smart_autoplay_elements.length||(e+='\n  <div class="smartplayer-smartplay"></div>\n'),e+="\n\n","smartplay"==r.autoplay&&r.smart_autoplay_elements&&r.smart_autoplay_elements.length&&(e+='\n    <div class="smartplayer-smartplay smartplayer-elements-container" style="position:absolute;transform-origin:top left;width: ',e+=r.video.width,e+="px;height: ",e+=r.video.height,e+='px;">\n        <div class="',e+=n(u.className.auto_play_animation),e+='">\n            ',s(r.smart_autoplay_elements,(function(t,r){e+="\n                ","text"===t.type&&(e+='\n                    <span\n                        id="',e+=n(t.id),e+='"\n                        class="smartplayer-autoplay-text-element smartplayer-smart-element smartplayer-autoplay-element"\n                        style="display:block;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;position:absolute;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;font-size:",e+=n(t.properties.size),e+="px;color:",e+=n(t.properties.color),e+="; ",t.properties.align&&(e+="text-align:",e+=n(t.properties.align),e+=";"),e+="font-weight:",e+=n(t.properties.weight),e+=";",t.opacity&&(e+=" opacity:",e+=n(t.opacity),e+=";"),e+='"\n                    >',e+=n(t.properties.value),e+="</span>\n                "),e+="\n\n                ","image"===t.type&&(e+='\n                    <img\n                        id="',e+=n(t.id),e+='"\n                        alt="',e+=n(t.properties.alt),e+='"\n                        src=',e+=n(t.properties.src),e+='\n                        class="smartplayer-autoplay-img-element smartplayer-smart-element smartplayer-autoplay-element"\n                        style="position:absolute;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;",t.opacity&&(e+=" opacity:",e+=n(t.opacity),e+=";"),e+='"\n                    />\n                '),e+="\n\n                ","box"===t.type&&(e+='\n                    <div\n                        id="',e+=n(t.id),e+='"\n                        class="smartplayer-autoplay-box-element smartplayer-smart-element smartplayer-autoplay-element"\n                        style="position:absolute;left:',e+=n(t.x),e+="px;top:",e+=n(t.y),e+="px;z-index:",e+=n(t.order),e+=";width:",e+=n(t.width),e+="px;height:",e+=n(t.height),e+="px;rotate:",e+=n(t.rotation),e+="deg;border-width:",e+=n(t.properties.border.size),e+="px;border-color:",e+=n(t.properties.border.color),e+=";border-radius:",e+=n(t.properties.radius),e+="px;border-style:",e+=n(t.properties.border.type),e+=";background-color:",e+=n(t.properties.color),e+="; ",t.opacity&&(e+=" opacity:",e+=n(t.opacity),e+=";"),e+='"\n                    ></div>\n                '),e+="\n            "})),e+="\n        </div>\n    </div>\n"),e+="\n\n",r.foreground_color&&(e+="\n    <style>\n        #smartplayer#smartplayer#smartplayer .smartplayer-bigplay svg path,\n        #smartplayer#smartplayer#smartplayer .smartplayer-controller svg path {\n            fill: ",e+=n(r.foreground_color),e+=";\n        }\n\n        #smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time,\n        #smartplayer#smartplayer#smartplayer .smartplayer-controller .smartplayer-icons .smartplayer-time span {\n            color: ",e+=n(r.foreground_color),e+=";\n        }\n    </style>\n"),e+="\n\n",r.displays.big_play&&(e+="\n<style>\n#smartplayer#smartplayer#smartplayer .smartplayer-bigplay {\n    background-color: ",e+=n(r.theme?r.theme:"rgba(0, 0, 0, 0.6)"),e+=';\n}\n</style>\n<button class="smartplayer-bigplay" aria-label="play">\n',e+=i.play,e+="\n</button>\n"),e+='\n<div class="smartplayer-menu">\n    ',s(r.contextmenu,(function(t,r){e+='\n      <div class="smartplayer-menu-item" data-option-id="',e+=n(c(t.id)),e+='">\n        <a',t.link&&(e+=' target="_blank"'),e+=' href="',e+=n(t.link||"javascript:void(0);"),e+=n(c(t.utm_content)),e+='">',e+=n(c(t.text)),e+="</a>\n      </div>\n    "})),e+='\n</div>\n<div class="smartplayer-notice"></div>\n<button class="smartplayer-mobile-play" aria-label="play">\n    ',e+=i.play,e+="\n</button>\n\n",r.callAction&&r.callAction.length>0&&(e+="\n<style>",s(r.callAction,(function(t,r){e+="\n",!t.colors||null!=t.type&&"inner_button"!=t.type||(e+="#smartplayer#smartplayer#smartplayer .smartplayer-call-action.",e+=n(t.id),e+="  a.smartplayer-call-action--link {background-color: ",e+=n(t.colors.background),e+=";color:",e+=n(t.colors.text),e+=";}\n#smartplayer#smartplayer#smartplayer .smartplayer-call-action.",e+=n(t.id),e+="  a.smartplayer-call-action--link:hover {background-color: ",e+=n(t.colors.background_hover),e+=";color:",e+=n(t.colors.text_hover),e+=";}"),e+="\n"})),e+="</style>\n",s(r.callAction,(function(t,r){e+="\n  ",null!=t.type&&"inner_button"!=t.type||(e+='\n    <div class="smartplayer-call-action smartplayer-hide smartplayer-call-action__',e+=n(t.position),e+=" ",e+=n(t.id),e+='" id="',e+=n(t.id),e+='">\n        <a href="',e+=n(t.link),e+='" target="',e+=n(t.open_in_new_tab?"_blank":"_parent"),e+='" class="smartplayer-call-action--link" title="',e+=n(t.btnText),e+='">\n            ',e+=n(t.btnText),e+="\n        </a>\n    </div>\n  "),e+="\n"})),e+="\n"),e+='\n\n<div class="smartplayer-offline-content">\n  <div class="smartplayer-offline-content__box">\n    <span class="smartplayer-offline-content__icon">',e+=i.warning,e+='</span><span class="smartplayer-offline-content__text">Identificamos um problema de conexão!</span>\n  </div>\n</div>\n\n',r.fake_bar&&(e+='\n<div class="smartplayer-fake-bar"></div>\n<style>\n#smartplayer#smartplayer#smartplayer .smartplayer-fake-bar {\n  background-color: ',e+=n(u.vbar.color),e+=";\n  height: ",e+=n(r.fake_bar_options&&r.fake_bar_options.height?r.fake_bar_options.height:10),e+="px;\n}\n</style>\n"),e+="\n\n",r.resume&&(e+='\n<div class="smartplayer-resume" style="display:none;">\n    <style>\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume {\n        background-color: ',e+=n(r.resume_options&&r.resume_options.background_color?r.resume_options.background_color:"rgba(0, 0, 0, 0.6)"),e+=";\n    }\n\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__actions {\n        text-align: center;\n    }\n\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__title,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__actions > div,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__actions > div span {\n        color: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color:"#FFFFFF"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon {\n        border-color: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color:"#FFFFFF"),e+=";\n    }\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg,\n    #smartplayer#smartplayer#smartplayer .smartplayer-resume__icon svg * {\n        fill: ",e+=n(r.resume_options&&r.resume_options.foreground_color?r.resume_options.foreground_color+" !important":"#FFFFFF !important"),e+=';\n    }\n    </style>\n    <div class="smartplayer-resume__content">\n      <div class="smartplayer-resume__title">\n        ',e+=n(r.resume_options&&r.resume_options.title?r.resume_options.title:"Você já começou a assistir isso"),e+='\n      </div>\n      <div class="smartplayer-resume__actions">\n        <div class="smartplayer-resume__play">\n          <span class="smartplayer-resume__icon">',e+=i.play,e+='</span>\n          <span class="smartplayer-resume__text">',e+=n(r.resume_options&&r.resume_options.play?r.resume_options.play:"Continuar assistindo"),e+='</span>\n        </div>\n        <div class="smartplayer-resume__rewind">\n          <span class="smartplayer-resume__icon">',e+=i.synchronizeRewind,e+='</span>\n          <span class="smartplayer-resume__text">',e+=n(r.resume_options&&r.resume_options.replay?r.resume_options.replay:"Assistir do início"),e+="</span>\n        </div>\n      </div>\n    </div>\n</div>\n"),e+="\n"}},function(t,e,r){"use strict";(function(t){var e=r(1),a=r(4),n=r(5),i=r(6),s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();"function"!=typeof s.Promise?s.Promise=e.a:(s.Promise.prototype.finally||(s.Promise.prototype.finally=a.a),s.Promise.allSettled||(s.Promise.allSettled=n.a),s.Promise.any||(s.Promise.any=i.a))}).call(this,r(2))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var a,n,i,s,o,l=1,c={},u=!1,d=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){f(t.data)},a=function(t){i.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(n=d.documentElement,a=function(t){var e=d.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):a=function(t){setTimeout(f,0,t)}:(s="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&f(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),a=function(e){t.postMessage(s+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var n={callback:t,args:e};return c[l]=n,a(l),l++},h.clearImmediate=p}function p(t){delete c[t]}function f(t){if(u)setTimeout(f,0,t);else{var e=c[t];if(e){u=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{p(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(2),r(10))},function(t,e,r){"use strict";(function(e){var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},a=Object.create(r),n=/["&'<>]/;a.$escape=function(t){return function(t){var e=""+t,r=n.exec(e);if(!r)return t;var a="",i=void 0,s=void 0,o=void 0;for(i=r.index,s=0;i<e.length;i++){switch(e.charCodeAt(i)){case 34:o="&#34;";break;case 38:o="&#38;";break;case 39:o="&#39;";break;case 60:o="&#60;";break;case 62:o="&#62;";break;default:continue}s!==i&&(a+=e.substring(s,i)),s=i+1,a+=o}return s!==i?a+e.substring(s,i):a}(function t(e){"string"!=typeof e&&(e=null==e?"":"function"==typeof e?t(e.call(e)):JSON.stringify(e));return e}(t))},a.$each=function(t,e){if(Array.isArray(t))for(var r=0,a=t.length;r<a;r++)e(t[r],r);else for(var n in t)e(t[n],n)},t.exports=a}).call(this,r(2))},function(t,e,r){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(){var r={767:function(t){function e(t){if(t)return function(t){for(var r in e.prototype)t[r]=e.prototype[r];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,a=this._callbacks["$"+t];if(!a)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<a.length;n++)if((r=a[n])===e||r.fn===e){a.splice(n,1);break}return 0===a.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(r){a=0;for(var n=(r=r.slice(0)).length;a<n;++a)r[a].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},148:function(t){t.exports=function(){var t={};return{defaults:function(e,r){t=r},get:function(e,r){var a=e();return void 0!==a?a:t[r]}}}},812:function(t){var e="expire_mixin";t.exports=function(){var t=this.createStore(this.storage,null,this._namespacePrefix+e);return{set:function(r,a,n,i){return this.hasNamespace(e)||t.set(a,i),r()},get:function(t,a){return this.hasNamespace(e)||r.call(this,a),t()},remove:function(r,a){return this.hasNamespace(e)||t.remove(a),r()},getExpiration:function(e,r){return t.get(r)},removeExpiredKeys:function(t){var e=[];this.each((function(t,r){e.push(r)}));for(var a=0;a<e.length;a++)r.call(this,e[a])}};function r(e){t.get(e,Number.MAX_VALUE)<=(new Date).getTime()&&(this.raw.remove(e),t.remove(e))}}},195:function(t,e,r){var a=r(78),n=a.slice,i=a.pluck,s=a.each,o=a.bind,l=a.create,c=a.isList,u=a.isFunction,d=a.isObject;t.exports={createStore:p};var h={version:"2.0.12",enabled:!1,get:function(t,e){var r=this.storage.read(this._namespacePrefix+t);return this._deserialize(r,e)},set:function(t,e){return void 0===e?this.remove(t):(this.storage.write(this._namespacePrefix+t,this._serialize(e)),e)},remove:function(t){this.storage.remove(this._namespacePrefix+t)},each:function(t){var e=this;this.storage.each((function(r,a){t.call(e,e._deserialize(r),(a||"").replace(e._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},createStore:function(){return p.apply(this,arguments)},addPlugin:function(t){this._addPlugin(t)},namespace:function(t){return p(this.storage,this.plugins,t)}};function p(t,e,r){r||(r=""),t&&!c(t)&&(t=[t]),e&&!c(e)&&(e=[e]);var a=r?"__storejs_"+r+"_":"",p=r?new RegExp("^"+a):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var f=l({_namespacePrefix:a,_namespaceRegexp:p,_testStorage:function(t){try{var e="__storejs__test__";t.write(e,e);var r=t.read(e)===e;return t.remove(e),r}catch(t){return!1}},_assignPluginFnProp:function(t,e){var r=this[e];this[e]=function(){var e=n(arguments,0),a=this,i=[function(){if(r)return s(arguments,(function(t,r){e[r]=t})),r.apply(a,e)}].concat(e);return t.apply(a,i)}},_serialize:function(t){return JSON.stringify(t)},_deserialize:function(t,e){if(!t)return e;var r="";try{r=JSON.parse(t)}catch(e){r=t}return void 0!==r?r:e},_addStorage:function(t){this.enabled||this._testStorage(t)&&(this.storage=t,this.enabled=!0)},_addPlugin:function(t){var e=this;if(c(t))s(t,(function(t){e._addPlugin(t)}));else if(!i(this.plugins,(function(e){return t===e}))){if(this.plugins.push(t),!u(t))throw new Error("Plugins must be function values that return objects");var r=t.call(this);if(!d(r))throw new Error("Plugins must return an object of function properties");s(r,(function(r,a){if(!u(r))throw new Error("Bad plugin property: "+a+" from plugin "+t.name+". Plugins should only return functions.");e._assignPluginFnProp(r,a)}))}},addStorage:function(t){!function(){var t="undefined"==typeof console?null:console;t&&(t.warn?t.warn:t.log).apply(t,arguments)}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(t)}},h,{plugins:[]});return f.raw={},s(f,(function(t,e){u(t)&&(f.raw[e]=o(f,t))})),s(t,(function(t){f._addStorage(t)})),s(e,(function(t){f._addPlugin(t)})),f}},78:function(t,e,r){var a=Object.assign?Object.assign:function(t,e,r,a){for(var n=1;n<arguments.length;n++)l(Object(arguments[n]),(function(e,r){t[r]=e}));return t},n=function(){if(Object.create)return function(t,e,r,n){var i=o(arguments,1);return a.apply(this,[Object.create(t)].concat(i))};var t=function(){};return function(e,r,n,i){var s=o(arguments,1);return t.prototype=e,a.apply(this,[new t].concat(s))}}(),i=String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},s="undefined"!=typeof window?window:r.g;function o(t,e){return Array.prototype.slice.call(t,e||0)}function l(t,e){c(t,(function(t,r){return e(t,r),!1}))}function c(t,e){if(u(t)){for(var r=0;r<t.length;r++)if(e(t[r],r))return t[r]}else for(var a in t)if(t.hasOwnProperty(a)&&e(t[a],a))return t[a]}function u(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}t.exports={assign:a,create:n,trim:i,bind:function(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}},slice:o,each:l,map:function(t,e){var r=u(t)?[]:{};return c(t,(function(t,a){return r[a]=e(t,a),!1})),r},pluck:c,isList:u,isFunction:function(t){return t&&"[object Function]"==={}.toString.call(t)},isObject:function(t){return t&&"[object Object]"==={}.toString.call(t)},Global:s}},580:function(t,e,r){var a=r(78),n=a.Global,i=a.trim;t.exports={name:"cookieStorage",read:function(t){if(!t||!c(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(s.cookie.replace(new RegExp(e),"$1"))},write:function(t,e){t&&(s.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")},each:o,remove:l,clearAll:function(){o((function(t,e){l(e)}))}};var s=n.document;function o(t){for(var e=s.cookie.split(/; ?/g),r=e.length-1;r>=0;r--)if(i(e[r])){var a=e[r].split("="),n=unescape(a[0]);t(unescape(a[1]),n)}}function l(t){t&&c(t)&&(s.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function c(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(s.cookie)}},627:function(t,e,r){var a=r(78).Global;function n(){return a.localStorage}function i(t){return n().getItem(t)}t.exports={name:"localStorage",read:i,write:function(t,e){return n().setItem(t,e)},each:function(t){for(var e=n().length-1;e>=0;e--){var r=n().key(e);t(i(r),r)}},remove:function(t){return n().removeItem(t)},clearAll:function(){return n().clear()}}},728:function(t){t.exports={name:"memoryStorage",read:function(t){return e[t]},write:function(t,r){e[t]=r},each:function(t){for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},remove:function(t){delete e[t]},clearAll:function(t){e={}}};var e={}}},a={};function n(t){var e=a[t];if(void 0!==e)return e.exports;var i=a[t]={exports:{}};return r[t](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==("undefined"==typeof globalThis?"undefined":e(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==("undefined"==typeof window?"undefined":e(window)))return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(function(){"use strict";n.r(i);var r={};n.r(r),n.d(r,{createStorage:function(){return Dt}});var a={accountId:"",dryRun:!1,debug:!1,fetch:{base:"https://a.vturb.net/",fetch:"x",beacon:"y",gif:"g"},queue:{capacity:5e3,interval:5},retry:{limit:3,initialDelay:100,retryOnResponseStatuses:[400,404,408,500,502,503,504],fallbackToBeacon:!0},unique:!0,cache:{namespace:"cacheHermes",storage:void 0,hashingMethod:"md5",maxAge:36e5}},s=function(){var t,e,r;if("undefined"==typeof window||!window.screen)return{};for(var a=["height","width","colorDepth","pixelDepth","availHeight","availWidth"],n={},i=0;i<a.length;i++)n[a[i]]=null!==(t=window.screen[a[i]])&&void 0!==t?t:void 0;return n.orientation={angle:null!==(r=null===(e=window.screen.orientation)||void 0===e?void 0:e.angle)&&void 0!==r?r:0,type:window.innerWidth>window.innerHeight?"landscape":"portrait"},n},o=function(){var t,e,r,a,n;if("undefined"==typeof document)return{};var i=document.body||{},s=document.documentElement||{},o={height:null!==(t=window.innerHeight)&&void 0!==t?t:null===(e=document.documentElement)||void 0===e?void 0:e.offsetHeight,width:null!==(r=window.innerWidth)&&void 0!==r?r:null===(a=document.documentElement)||void 0===a?void 0:a.offsetWidth,scrollHeight:null!==(n=Math.max(i.scrollHeight,i.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight))&&void 0!==n?n:void 0};return window.screen&&(o.ratio={height:window.screen.availHeight?parseFloat((window.innerHeight/window.screen.availHeight).toFixed(2)):null,width:window.screen.availWidth?parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2)):null}),o};function l(){var t,e;return document&&"function"==typeof document.querySelector&&(e=document.querySelector('meta[name="description"]')),null!==(t=null==e?void 0:e.content)&&void 0!==t?t:""}var c=function(){return(c=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function u(t,e,r,a){return new(r||(r=Promise))((function(n,i){function s(t){try{l(a.next(t))}catch(t){i(t)}}function o(t){try{l(a.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}l((a=a.apply(t,e||[])).next())}))}function d(t,e){var r,a,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function h(t,e,r){if(r||2===arguments.length)for(var a,n=0,i=e.length;n<i;n++)!a&&n in e||(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))}Object.create,Object.create;var p="3.4.1";function f(t,e){return new Promise((function(r){return setTimeout(r,t,e)}))}function m(t){return!!t&&"function"==typeof t.then}function y(t,e){try{var r=t();m(r)?r.then((function(t){return e(!0,t)}),(function(t){return e(!1,t)})):e(!0,r)}catch(t){e(!1,t)}}function v(t,e,r){return void 0===r&&(r=16),u(this,void 0,void 0,(function(){var a,n,i;return d(this,(function(s){switch(s.label){case 0:a=Date.now(),n=0,s.label=1;case 1:return n<t.length?(e(t[n],n),(i=Date.now())>=a+r?(a=i,[4,f(0)]):[3,3]):[3,4];case 2:s.sent(),s.label=3;case 3:return++n,[3,1];case 4:return[2]}}))}))}function g(t){t.then(void 0,(function(){}))}function b(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]+e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]+e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]+e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]+e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function w(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var r=[0,0,0,0];return r[3]+=t[3]*e[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=t[2]*e[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=t[3]*e[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=t[1]*e[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[2]*e[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=t[3]*e[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function k(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])}function T(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]}function x(t,e){return[t[0]^e[0],t[1]^e[1]]}function E(t){return t=x(t,[0,t[0]>>>1]),t=x(t=w(t,[4283543511,3981806797]),[0,t[0]>>>1]),x(t=w(t,[3301882366,444984403]),[0,t[0]>>>1])}function S(t){return parseInt(t)}function _(t){return parseFloat(t)}function L(t,e){return"number"==typeof t&&isNaN(t)?e:t}function A(t){return t.reduce((function(t,e){return t+(e?1:0)}),0)}function C(t,e){if(void 0===e&&(e=1),Math.abs(e)>=1)return Math.round(t/e)*e;var r=1/e;return Math.round(t*r)/r}function R(t){return t&&"object"==e(t)&&"message"in t?t:{message:t}}function I(t){return"function"!=typeof t}function D(t,e,r){var a=Object.keys(t).filter((function(t){return!function(t,e){for(var r=0,a=t.length;r<a;++r)if(t[r]===e)return!0;return!1}(r,t)})),n=Array(a.length);return v(a,(function(r,a){n[a]=function(t,e){var r=new Promise((function(r){var a=Date.now();y(t.bind(null,e),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Date.now()-a;if(!t[0])return r((function(){return{error:R(t[1]),duration:n}}));var i=t[1];if(I(i))return r((function(){return{value:i,duration:n}}));r((function(){return new Promise((function(t){var e=Date.now();y(i,(function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var i=n+Date.now()-e;if(!r[0])return t({error:R(r[1]),duration:i});t({value:r[1],duration:i})}))}))}))}))}));return g(r),function(){return r.then((function(t){return t()}))}}(t[r],e)})),function(){return u(this,void 0,void 0,(function(){var t,e,r,i,s,o;return d(this,(function(l){switch(l.label){case 0:for(t={},e=0,r=a;e<r.length;e++)i=r[e],t[i]=void 0;s=Array(a.length),o=function(){var e;return d(this,(function(r){switch(r.label){case 0:return e=!0,[4,v(a,(function(r,a){if(!s[a])if(n[a]){var i=n[a]().then((function(e){return t[r]=e}));g(i),s[a]=i}else e=!1}))];case 1:return r.sent(),e?[2,"break"]:[4,f(1)];case 2:return r.sent(),[2]}}))},l.label=1;case 1:return[5,o()];case 2:if("break"===l.sent())return[3,4];l.label=3;case 3:return[3,1];case 4:return[4,Promise.all(s)];case 5:return l.sent(),[2,t]}}))}))}}function O(){var t=window,e=navigator;return A(["MSCSSMatrix"in t,"msSetImmediate"in t,"msIndexedDB"in t,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function P(){var t=window,e=navigator;return A(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,0===e.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in t,"BatteryManager"in t,"webkitMediaStream"in t,"webkitSpeechGrammar"in t])>=5}function M(){var t=window,e=navigator;return A(["ApplePayError"in t,"CSSPrimitiveValue"in t,"Counter"in t,0===e.vendor.indexOf("Apple"),"getStorageUpdates"in e,"WebKitMediaKeys"in t])>=4}function F(){var t=window;return A(["safari"in t,!("DeviceMotionEvent"in t),!("ongestureend"in t),!("standalone"in navigator)])>=3}function B(){var t=document;return(t.exitFullscreen||t.msExitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen).call(t)}function N(){var t=P(),e=function(){var t,e,r=window;return A(["buildID"in navigator,"MozAppearance"in(null!==(e=null===(t=document.documentElement)||void 0===t?void 0:t.style)&&void 0!==e?e:{}),"onmozfullscreenchange"in r,"mozInnerScreenX"in r,"CSSMozDocumentRule"in r,"CanvasCaptureMediaStream"in r])>=4}();if(!t&&!e)return!1;var r=window;return A(["onorientationchange"in r,"orientation"in r,t&&!("SharedWorker"in r),e&&/android/i.test(navigator.appVersion)])>=2}function U(t){var e=new Error(t);return e.name=t,e}function j(t,e,r){var a,n,i;return void 0===r&&(r=50),u(this,void 0,void 0,(function(){var s,o;return d(this,(function(l){switch(l.label){case 0:s=document,l.label=1;case 1:return s.body?[3,3]:[4,f(r)];case 2:return l.sent(),[3,1];case 3:o=s.createElement("iframe"),l.label=4;case 4:return l.trys.push([4,,10,11]),[4,new Promise((function(t,r){var a=!1,n=function(){a=!0,t()};o.onload=n,o.onerror=function(t){a=!0,r(t)};var i=o.style;i.setProperty("display","block","important"),i.position="absolute",i.top="0",i.left="0",i.visibility="hidden",e&&"srcdoc"in o?o.srcdoc=e:o.src="about:blank",s.body.appendChild(o);!function t(){var e,r;a||("complete"===(null===(r=null===(e=o.contentWindow)||void 0===e?void 0:e.document)||void 0===r?void 0:r.readyState)?n():setTimeout(t,10))}()}))];case 5:l.sent(),l.label=6;case 6:return(null===(n=null===(a=o.contentWindow)||void 0===a?void 0:a.document)||void 0===n?void 0:n.body)?[3,8]:[4,f(r)];case 7:return l.sent(),[3,6];case 8:return[4,t(o,o.contentWindow)];case 9:return[2,l.sent()];case 10:return null===(i=o.parentNode)||void 0===i||i.removeChild(o),[7];case 11:return[2]}}))}))}function V(t){for(var e=function(t){for(var e,r,a="Unexpected syntax '".concat(t,"'"),n=/^\s*([a-z-]*)(.*)$/i.exec(t),i=n[1]||void 0,s={},o=/([.:#][\w-]+|\[.+?\])/gi,l=function(t,e){s[t]=s[t]||[],s[t].push(e)};;){var c=o.exec(n[2]);if(!c)break;var u=c[0];switch(u[0]){case".":l("class",u.slice(1));break;case"#":l("id",u.slice(1));break;case"[":var d=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(u);if(!d)throw new Error(a);l(d[1],null!==(r=null!==(e=d[4])&&void 0!==e?e:d[5])&&void 0!==r?r:"");break;default:throw new Error(a)}}return[i,s]}(t),r=e[0],a=e[1],n=document.createElement(null!=r?r:"div"),i=0,s=Object.keys(a);i<s.length;i++){var o=s[i],l=a[o].join(" ");"style"===o?H(n.style,l):n.setAttribute(o,l)}return n}function H(t,e){for(var r=0,a=e.split(";");r<a.length;r++){var n=a[r],i=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(n);if(i){var s=i[1],o=i[2],l=i[4];t.setProperty(s,o,l||"")}}}var G=["monospace","sans-serif","serif"],z=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function Y(t){return t.toDataURL()}var q,W;function K(){var t=screen;return[L(_(t.availTop),null),L(_(t.width)-_(t.availWidth)-L(_(t.availLeft),0),null),L(_(t.height)-_(t.availHeight)-L(_(t.availTop),0),null),L(_(t.availLeft),null)]}function X(t){for(var e=0;e<4;++e)if(t[e])return!1;return!0}function Z(t){var e;return u(this,void 0,void 0,(function(){var r,a,n,i,s,o,l;return d(this,(function(c){switch(c.label){case 0:for(r=document,a=r.createElement("div"),n=new Array(t.length),i={},J(a),l=0;l<t.length;++l)s=V(t[l]),J(o=r.createElement("div")),o.appendChild(s),a.appendChild(o),n[l]=s;c.label=1;case 1:return r.body?[3,3]:[4,f(50)];case 2:return c.sent(),[3,1];case 3:r.body.appendChild(a);try{for(l=0;l<t.length;++l)n[l].offsetParent||(i[t[l]]=!0)}finally{null===(e=a.parentNode)||void 0===e||e.removeChild(a)}return[2,i]}}))}))}function J(t){t.style.setProperty("display","block","important")}function Q(t){return matchMedia("(inverted-colors: ".concat(t,")")).matches}function $(t){return matchMedia("(forced-colors: ".concat(t,")")).matches}function tt(t){return matchMedia("(prefers-contrast: ".concat(t,")")).matches}function et(t){return matchMedia("(prefers-reduced-motion: ".concat(t,")")).matches}function rt(t){return matchMedia("(dynamic-range: ".concat(t,")")).matches}var at=Math,nt=function(){return 0},it={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]},st={fonts:function(){return j((function(t,e){var r=e.document,a=r.body;a.style.fontSize="48px";var n=r.createElement("div"),i={},s={},o=function(t){var e=r.createElement("span"),a=e.style;return a.position="absolute",a.top="0",a.left="0",a.fontFamily=t,e.textContent="mmMwWLliI0O&1",n.appendChild(e),e},l=G.map(o),c=function(){for(var t={},e=function(e){t[e]=G.map((function(t){return function(t,e){return o("'".concat(t,"',").concat(e))}(e,t)}))},r=0,a=z;r<a.length;r++)e(a[r]);return t}();a.appendChild(n);for(var u=0;u<G.length;u++)i[G[u]]=l[u].offsetWidth,s[G[u]]=l[u].offsetHeight;return z.filter((function(t){return e=c[t],G.some((function(t,r){return e[r].offsetWidth!==i[t]||e[r].offsetHeight!==s[t]}));var e}))}))},domBlockers:function(t){var e=(void 0===t?{}:t).debug;return u(this,void 0,void 0,(function(){var t,r,a,n,i;return d(this,(function(s){switch(s.label){case 0:return M()||N()?(o=atob,t={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",o("YVt0aXRsZT0iN25hZ2EgcG9rZXIiIGld"),'[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",o("Lmlvc0Fkc2lvc0Fkcy1sYXlvdXQ="),".quangcao",o("W2hyZWZePSJodHRwczovL3I4OC52bi8iXQ=="),o("W2hyZWZePSJodHRwczovL3piZXQudm4vIl0=")],adBlockFinland:[".mainostila",o("LnNwb25zb3JpdA=="),".ylamainos",o("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",o("I2FkMl9pbmxpbmU=")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",o("LmhlYWRlci1ibG9ja2VkLWFk"),o("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:[".BetterJsPopOverlay",o("I2FkXzMwMFgyNTA="),o("I2Jhbm5lcmZsb2F0MjI="),o("I2FkLWJhbm5lcg=="),o("I2NhbXBhaWduLWJhbm5lcg==")],adGuardChinese:[o("LlppX2FkX2FfSA=="),o("YVtocmVmKj0iL29kMDA1LmNvbSJd"),o("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),".qq_nr_lad","#widget-quan"],adGuardFrench:[o("I2Jsb2NrLXZpZXdzLWFkcy1zaWRlYmFyLWJsb2NrLWJsb2Nr"),"#pavePub",o("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv"],adGuardGerman:[o("LmJhbm5lcml0ZW13ZXJidW5nX2hlYWRfMQ=="),o("LmJveHN0YXJ0d2VyYnVuZw=="),o("LndlcmJ1bmcz"),o("YVtocmVmXj0iaHR0cDovL3d3dy5laXMuZGUvaW5kZXgucGh0bWw/cmVmaWQ9Il0="),o("YVtocmVmXj0iaHR0cHM6Ly93d3cudGlwaWNvLmNvbS8/YWZmaWxpYXRlSWQ9Il0=")],adGuardJapanese:["#kauli_yad_1",o("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),o("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),o("LmFkZ29vZ2xl"),o("LmFkX3JlZ3VsYXIz")],adGuardMobile:[o("YW1wLWF1dG8tYWRz"),o("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",o("I2FkX2ludmlld19hcmVh")],adGuardRussian:[o("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),o("LnJlY2xhbWE="),'div[id^="smi2adblock"]',o("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),o("I2FkX3NxdWFyZQ==")],adGuardSocial:[o("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),o("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",o("W2hyZWZePSJodHRwOi8vYWRzLmdsaXNwYS5jb20vIl0=")],adGuardTrackingProtection:["#qoo-counter",o("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),o("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),o("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",o("I3Jla2xhbWk="),o("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),o("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),o("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[o("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers",o("I25ld0Fk")],easyList:[o("I0FEX0NPTlRST0xfMjg="),o("LnNlY29uZC1wb3N0LWFkcy13cmFwcGVy"),".universalboxADVBOX03",o("LmFkdmVydGlzZW1lbnQtNzI4eDkw"),o("LnNxdWFyZV9hZHM=")],easyListChina:[o("YVtocmVmKj0iLndlbnNpeHVldGFuZy5jb20vIl0="),o("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),o("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box"],easyListCookie:["#AdaCompliance.app-notice",".text-center.rgpd",".panel--cookie",".js-cookies-andromeda",".elxtr-consent"],easyListCzechSlovak:["#onlajny-stickers",o("I3Jla2xhbW5pLWJveA=="),o("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",o("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[o("I2FkdmVydGVudGll"),o("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",o("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:[o("I0FkX1dpbjJkYXk="),o("I3dlcmJ1bmdzYm94MzAw"),o("YVtocmVmXj0iaHR0cDovL3d3dy5yb3RsaWNodGthcnRlaS5jb20vP3NjPSJd"),o("I3dlcmJ1bmdfd2lkZXNreXNjcmFwZXJfc2NyZWVu"),o("YVtocmVmXj0iaHR0cDovL2xhbmRpbmcucGFya3BsYXR6a2FydGVpLmNvbS8/YWc9Il0=")],easyListItaly:[o("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",o("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[o("LnJla2xhbW9zX3RhcnBhcw=="),o("LnJla2xhbW9zX251b3JvZG9z"),o("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),o("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),o("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[o("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:[o("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),o("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",o("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[o("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),o("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),o("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",o("LmFkX19tYWlu"),o("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:[o("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[o("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),o("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[o("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),o("I2xpdmVyZUFkV3JhcHBlcg=="),o("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),o("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[o("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",o("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),o("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),o("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[o("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),o("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),o("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",o("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),o("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),o("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),o("ZGl2I3NrYXBpZWNfYWQ=")],ro:[o("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),'a[href^="/magazin/"]',o("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),o("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),o("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd")],ruAd:[o("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),o("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),o("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",o("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),o("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",o("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},r=Object.keys(t),[4,Z((i=[]).concat.apply(i,r.map((function(e){return t[e]}))))]):[2,void 0];case 1:return a=s.sent(),e&&function(t,e){for(var r="DOM blockers debug:\n```",a=0,n=Object.keys(t);a<n.length;a++){var i=n[a];r+="\n".concat(i,":");for(var s=0,o=t[i];s<o.length;s++){var l=o[s];r+="".concat(e[l]?"🚫":"➡️"," ").concat(l)}}console.log("".concat(r,"\n```"))}(t,a),(n=r.filter((function(e){var r=t[e];return A(r.map((function(t){return a[t]})))>.6*r.length}))).sort(),[2,n]}var o}))}))},fontPreferences:function(){return function(t,e){return void 0===e&&(e=4e3),j((function(t,r){var a=r.document,n=a.body,i=n.style;i.width="".concat(e,"px"),i.webkitTextSizeAdjust=i.textSizeAdjust="none",P()?n.style.zoom="".concat(1/r.devicePixelRatio):M()&&(n.style.zoom="reset");var s=a.createElement("div");return s.textContent=h([],Array(e/20<<0),!0).map((function(){return"word"})).join(" "),n.appendChild(s),function(t,e){for(var r={},a={},n=0,i=Object.keys(it);n<i.length;n++){var s=i[n],o=it[s],l=o[0],c=void 0===l?{}:l,u=o[1],d=void 0===u?"mmMwWLliI0fiflO&1":u,h=t.createElement("span");h.textContent=d,h.style.whiteSpace="nowrap";for(var p=0,f=Object.keys(c);p<f.length;p++){var m=f[p],y=c[m];void 0!==y&&(h.style[m]=y)}r[s]=h,e.appendChild(t.createElement("br")),e.appendChild(h)}for(var v=0,g=Object.keys(it);v<g.length;v++)a[s=g[v]]=r[s].getBoundingClientRect().width;return a}(a,n)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}()},audio:function(){var t=window,e=t.OfflineAudioContext||t.webkitOfflineAudioContext;if(!e)return-2;if(M()&&!F()&&!function(){var t=window;return A(["DOMRectList"in t,"RTCPeerConnectionIceEvent"in t,"SVGGeometryElement"in t,"ontransitioncancel"in t])>=3}())return-1;var r=new e(1,5e3,44100),a=r.createOscillator();a.type="triangle",a.frequency.value=1e4;var n=r.createDynamicsCompressor();n.threshold.value=-50,n.knee.value=40,n.ratio.value=12,n.attack.value=0,n.release.value=.25,a.connect(n),n.connect(r.destination),a.start(0);var i=function(t){var e=function(){};return[new Promise((function(r,a){var n=!1,i=0,s=0;t.oncomplete=function(t){return r(t.renderedBuffer)};var o=function(){setTimeout((function(){return a(U("timeout"))}),Math.min(500,s+5e3-Date.now()))};(function e(){try{var r=t.startRendering();switch(m(r)&&g(r),t.state){case"running":s=Date.now(),n&&o();break;case"suspended":document.hidden||i++,n&&i>=3?a(U("suspended")):setTimeout(e,500)}}catch(t){a(t)}})(),e=function(){n||(n=!0,s>0&&o())}})),e]}(r),s=i[0],o=i[1],l=s.then((function(t){return function(t){for(var e=0,r=0;r<t.length;++r)e+=Math.abs(t[r]);return e}(t.getChannelData(0).subarray(4500))}),(function(t){if("timeout"===t.name||"suspended"===t.name)return-3;throw t}));return g(l),function(){return o(),l}},screenFrame:function(){var t=this,e=function(){var t=this;return function(){if(void 0===W){!function t(){var e=K();X(e)?W=setTimeout(t,2500):(q=e,W=void 0)}()}}(),function(){return u(t,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return X(t=K())?q?[2,h([],q,!0)]:(r=document).fullscreenElement||r.msFullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement?[4,B()]:[3,2]:[3,2];case 1:e.sent(),t=K(),e.label=2;case 2:return X(t)||(q=t),[2,t]}var r}))}))}}();return function(){return u(t,void 0,void 0,(function(){var t,r;return d(this,(function(a){switch(a.label){case 0:return[4,e()];case 1:return t=a.sent(),[2,[(r=function(t){return null===t?null:C(t,10)})(t[0]),r(t[1]),r(t[2]),r(t[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var t,e=navigator,r=[],a=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;if(void 0!==a&&r.push([a]),Array.isArray(e.languages))P()&&A([!("MediaSettingsRange"in(t=window)),"RTCEncodedAudioFrame"in t,""+t.Intl=="[object Intl]",""+t.Reflect=="[object Reflect]"])>=3||r.push(e.languages);else if("string"==typeof e.languages){var n=e.languages;n&&r.push(n.split(","))}return r},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return L(_(navigator.deviceMemory),void 0)},screenResolution:function(){var t=screen,e=function(t){return L(S(t),null)},r=[e(t.width),e(t.height)];return r.sort().reverse(),r},hardwareConcurrency:function(){return L(S(navigator.hardwareConcurrency),void 0)},timezone:function(){var t,e=null===(t=window.Intl)||void 0===t?void 0:t.DateTimeFormat;if(e){var r=(new e).resolvedOptions().timeZone;if(r)return r}var a,n=(a=(new Date).getFullYear(),-Math.max(_(new Date(a,0,1).getTimezoneOffset()),_(new Date(a,6,1).getTimezoneOffset())));return"UTC".concat(n>=0?"+":"").concat(Math.abs(n))},sessionStorage:function(){try{return!!window.sessionStorage}catch(t){return!0}},localStorage:function(){try{return!!window.localStorage}catch(t){return!0}},indexedDB:function(){var t,e;if(!(O()||(t=window,e=navigator,A(["msWriteProfilerMark"in t,"MSStream"in t,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!O())))try{return!!window.indexedDB}catch(t){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var t=navigator.platform;return"MacIntel"===t&&M()&&!F()?function(){if("iPad"===navigator.platform)return!0;var t=screen,e=t.width/t.height;return A(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}()?"iPad":"iPhone":t},plugins:function(){var t=navigator.plugins;if(t){for(var e=[],r=0;r<t.length;++r){var a=t[r];if(a){for(var n=[],i=0;i<a.length;++i){var s=a[i];n.push({type:s.type,suffixes:s.suffixes})}e.push({name:a.name,description:a.description,mimeTypes:n})}}return e}},canvas:function(){var t,e,r=!1,a=function(){var t=document.createElement("canvas");return t.width=1,t.height=1,[t,t.getContext("2d")]}(),n=a[0],i=a[1];if(function(t,e){return!(!e||!t.toDataURL)}(n,i)){r=function(t){return t.rect(0,0,10,10),t.rect(2,2,6,6),!t.isPointInPath(5,5,"evenodd")}(i),function(t,e){t.width=240,t.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';var r="Cwm fjordbank gly ".concat(String.fromCharCode(55357,56835));e.fillText(r,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(r,4,45)}(n,i);var s=Y(n);s!==Y(n)?t=e="unstable":(e=s,function(t,e){t.width=122,t.height=110,e.globalCompositeOperation="multiply";for(var r=0,a=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];r<a.length;r++){var n=a[r],i=n[0],s=n[1],o=n[2];e.fillStyle=i,e.beginPath(),e.arc(s,o,40,0,2*Math.PI,!0),e.closePath(),e.fill()}e.fillStyle="#f9c",e.arc(60,60,60,0,2*Math.PI,!0),e.arc(60,60,20,0,2*Math.PI,!0),e.fill("evenodd")}(n,i),t=Y(n))}else t=e="";return{winding:r,geometry:t,text:e}},touchSupport:function(){var t,e=navigator,r=0;void 0!==e.maxTouchPoints?r=S(e.maxTouchPoints):void 0!==e.msMaxTouchPoints&&(r=e.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(e){t=!1}return{maxTouchPoints:r,touchEvent:t,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var t=[],r=0,a=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];r<a.length;r++){var n=a[r],i=window[n];i&&"object"==e(i)&&t.push(n)}return t.sort()},cookiesEnabled:function(){var t=document;try{t.cookie="cookietest=1; SameSite=Strict;";var e=-1!==t.cookie.indexOf("cookietest=");return t.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(t){return!1}},colorGamut:function(){for(var t=0,e=["rec2020","p3","srgb"];t<e.length;t++){var r=e[t];if(matchMedia("(color-gamut: ".concat(r,")")).matches)return r}},invertedColors:function(){return!!Q("inverted")||!Q("none")&&void 0},forcedColors:function(){return!!$("active")||!$("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var t=0;t<=100;++t)if(matchMedia("(max-monochrome: ".concat(t,")")).matches)return t;throw new Error("Too high value")}},contrast:function(){return tt("no-preference")?0:tt("high")||tt("more")?1:tt("low")||tt("less")?-1:tt("forced")?10:void 0},reducedMotion:function(){return!!et("reduce")||!et("no-preference")&&void 0},hdr:function(){return!!rt("high")||!rt("standard")&&void 0},math:function(){var t,e=at.acos||nt,r=at.acosh||nt,a=at.asin||nt,n=at.asinh||nt,i=at.atanh||nt,s=at.atan||nt,o=at.sin||nt,l=at.sinh||nt,c=at.cos||nt,u=at.cosh||nt,d=at.tan||nt,h=at.tanh||nt,p=at.exp||nt,f=at.expm1||nt,m=at.log1p||nt;return{acos:e(.12312423423423424),acosh:r(1e308),acoshPf:(t=1e154,at.log(t+at.sqrt(t*t-1))),asin:a(.12312423423423424),asinh:n(1),asinhPf:at.log(1+at.sqrt(2)),atanh:i(.5),atanhPf:at.log(3)/2,atan:s(.5),sin:o(-1e300),sinh:l(1),sinhPf:at.exp(1)-1/at.exp(1)/2,cos:c(10.000000000123),cosh:u(1),coshPf:(at.exp(1)+1/at.exp(1))/2,tan:d(-1e300),tanh:h(1),tanhPf:(at.exp(2)-1)/(at.exp(2)+1),exp:p(1),expm1:f(1),expm1Pf:at.exp(1)-1,log1p:m(10),log1pPf:at.log(11),powPI:at.pow(at.PI,-100)}},videoCard:function(){var t,e=document.createElement("canvas"),r=null!==(t=e.getContext("webgl"))&&void 0!==t?t:e.getContext("experimental-webgl");if(r&&"getExtension"in r){var a=r.getExtension("WEBGL_debug_renderer_info");if(a)return{vendor:(r.getParameter(a.UNMASKED_VENDOR_WEBGL)||"").toString(),renderer:(r.getParameter(a.UNMASKED_RENDERER_WEBGL)||"").toString()}}},pdfViewerEnabled:function(){return navigator.pdfViewerEnabled},architecture:function(){var t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}};function ot(t){var e=function(t){if(N())return.4;if(M())return F()?.5:.3;var e=t.platform.value||"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}(t),r=function(t){return C(.99+.01*t,1e-4)}(e);return{score:e,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,"".concat(r))}}function lt(t){return JSON.stringify(t,(function(t,e){return e instanceof Error?c({name:(r=e).name,message:r.message,stack:null===(a=r.stack)||void 0===a?void 0:a.split("\n")},r):e;var r,a}),2)}function ct(t){return function(t,e){e=e||0;var r,a=(t=t||"").length%16,n=t.length-a,i=[0,e],s=[0,e],o=[0,0],l=[0,0],c=[2277735313,289559509],u=[1291169091,658871167];for(r=0;r<n;r+=16)o=[255&t.charCodeAt(r+4)|(255&t.charCodeAt(r+5))<<8|(255&t.charCodeAt(r+6))<<16|(255&t.charCodeAt(r+7))<<24,255&t.charCodeAt(r)|(255&t.charCodeAt(r+1))<<8|(255&t.charCodeAt(r+2))<<16|(255&t.charCodeAt(r+3))<<24],l=[255&t.charCodeAt(r+12)|(255&t.charCodeAt(r+13))<<8|(255&t.charCodeAt(r+14))<<16|(255&t.charCodeAt(r+15))<<24,255&t.charCodeAt(r+8)|(255&t.charCodeAt(r+9))<<8|(255&t.charCodeAt(r+10))<<16|(255&t.charCodeAt(r+11))<<24],o=k(o=w(o,c),31),i=b(i=k(i=x(i,o=w(o,u)),27),s),i=b(w(i,[0,5]),[0,1390208809]),l=k(l=w(l,u),33),s=b(s=k(s=x(s,l=w(l,c)),31),i),s=b(w(s,[0,5]),[0,944331445]);switch(o=[0,0],l=[0,0],a){case 15:l=x(l,T([0,t.charCodeAt(r+14)],48));case 14:l=x(l,T([0,t.charCodeAt(r+13)],40));case 13:l=x(l,T([0,t.charCodeAt(r+12)],32));case 12:l=x(l,T([0,t.charCodeAt(r+11)],24));case 11:l=x(l,T([0,t.charCodeAt(r+10)],16));case 10:l=x(l,T([0,t.charCodeAt(r+9)],8));case 9:l=w(l=x(l,[0,t.charCodeAt(r+8)]),u),s=x(s,l=w(l=k(l,33),c));case 8:o=x(o,T([0,t.charCodeAt(r+7)],56));case 7:o=x(o,T([0,t.charCodeAt(r+6)],48));case 6:o=x(o,T([0,t.charCodeAt(r+5)],40));case 5:o=x(o,T([0,t.charCodeAt(r+4)],32));case 4:o=x(o,T([0,t.charCodeAt(r+3)],24));case 3:o=x(o,T([0,t.charCodeAt(r+2)],16));case 2:o=x(o,T([0,t.charCodeAt(r+1)],8));case 1:o=w(o=x(o,[0,t.charCodeAt(r)]),c),i=x(i,o=w(o=k(o,31),u))}return i=b(i=x(i,[0,t.length]),s=x(s,[0,t.length])),s=b(s,i),i=b(i=E(i),s=E(s)),s=b(s,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)}(function(t){for(var e="",r=0,a=Object.keys(t).sort();r<a.length;r++){var n=a[r],i=t[n],s=i.error?"error":JSON.stringify(i.value);e+="".concat(e?"|":"").concat(n.replace(/([:|\\])/g,"\\$1"),":").concat(s)}return e}(t))}function ut(t){return void 0===t&&(t=50),function(t,e){void 0===e&&(e=1/0);var r=window.requestIdleCallback;return r?new Promise((function(t){return r.call(window,(function(){return t()}),{timeout:e})})):f(Math.min(t,e))}(t,2*t)}function dt(t,e){var r=Date.now();return{get:function(a){return u(this,void 0,void 0,(function(){var n,i,s;return d(this,(function(o){switch(o.label){case 0:return n=Date.now(),[4,t()];case 1:return i=o.sent(),s=function(t){var e;return{get visitorId(){return void 0===e&&(e=ct(this.components)),e},set visitorId(t){e=t},confidence:ot(t),components:t,version:p}}(i),(e||(null==a?void 0:a.debug))&&console.log("Copy the text below to get the debug data:```\nversion: ".concat(s.version,"\nuserAgent: ").concat(navigator.userAgent,"\ntimeBetweenLoadAndGet: ").concat(n-r,"\nvisitorId: ").concat(s.visitorId,"\ncomponents: ").concat(lt(i),"\n```")),[2,s]}}))}))}}}({load:function(t){var e=void 0===t?{}:t,r=e.delayFallback,a=e.debug,n=e.monitoring,i=void 0===n||n;return u(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:return i&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var t=new XMLHttpRequest;t.open("get","https://m1.openfpcdn.io/fingerprintjs/v".concat(p,"/npm-monitoring"),!0),t.send()}catch(t){console.error(t)}}(),[4,ut(r)];case 1:return t.sent(),[2,dt(D(st,{debug:a},[]),a)]}}))}))},hashComponents:ct,componentsToDebugString:lt}).load();function ht(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}var pt=ht,ft=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","src","sck"],mt=function(){return{cookies:void 0!==navigator.cookieEnabled&&navigator.cookieEnabled,codeName:navigator.appCodeName,description:l(),language:navigator.language,name:navigator.appName,online:navigator.onLine,platform:navigator.platform,useragent:navigator.userAgent,version:navigator.appVersion,doNotTrack:navigator.doNotTrack,screen:s(),window:o()}},yt=function(t){try{var e=new URLSearchParams(new URL(t).search),r={};return ft.forEach((function(t){e.has(t)&&(r[t]=e.get(t))})),r}catch(t){return{}}},vt=function(){function t(t){this.level=t}return t.prototype.debug=function(t){15&this.level&&console.debug(t)},t.prototype.info=function(t){7&this.level&&console.log(t)},t.prototype.warn=function(t){7&this.level&&console.warn(t)},t.prototype.error=function(t){1&this.level&&console.error(t)},t}(),gt=n(148),bt=n.n(gt),wt=n(812),kt=n.n(wt),Tt=n(195),xt=n.n(Tt),Et=n(580),St=n.n(Et),_t=n(627),Lt=n.n(_t),At=n(728),Ct=n.n(At),Rt=[Lt(),St(),Ct()],It=[bt(),kt()],Dt=function(t,e){var r=xt().createStore(Rt,It,t);return{get:function(t,e){r.removeExpiredKeys();var a=r.get(t,e);return null==a?null:a},set:function(t,a){return r.set(t,a,Date.now()+e),a}}};function Ot(t,e,r,a,n,i){return Nt(function(t,e){return t<<e|t>>>32-e}(Nt(Nt(e,t),Nt(a,i)),n),r)}function Pt(t,e,r,a,n,i,s){return Ot(e&r|~e&a,t,e,n,i,s)}function Mt(t,e,r,a,n,i,s){return Ot(e&a|r&~a,t,e,n,i,s)}function Ft(t,e,r,a,n,i,s){return Ot(e^r^a,t,e,n,i,s)}function Bt(t,e,r,a,n,i,s){return Ot(r^(e|~a),t,e,n,i,s)}function Nt(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}var Ut,jt=function(t){return function(t){for(var e,r="0123456789ABCDEF",a="",n=0;n<t.length;n++)e=t.charCodeAt(n),a+=r.charAt(e>>>4&15)+r.charAt(15&e);return a}(function(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}(function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var r=1732584193,a=-271733879,n=-1732584194,i=271733878,s=0;s<t.length;s+=16){var o=r,l=a,c=n,u=i;a=Bt(a=Bt(a=Bt(a=Bt(a=Ft(a=Ft(a=Ft(a=Ft(a=Mt(a=Mt(a=Mt(a=Mt(a=Pt(a=Pt(a=Pt(a=Pt(a,n=Pt(n,i=Pt(i,r=Pt(r,a,n,i,t[s+0],7,-680876936),a,n,t[s+1],12,-389564586),r,a,t[s+2],17,606105819),i,r,t[s+3],22,-1044525330),n=Pt(n,i=Pt(i,r=Pt(r,a,n,i,t[s+4],7,-176418897),a,n,t[s+5],12,1200080426),r,a,t[s+6],17,-1473231341),i,r,t[s+7],22,-45705983),n=Pt(n,i=Pt(i,r=Pt(r,a,n,i,t[s+8],7,1770035416),a,n,t[s+9],12,-1958414417),r,a,t[s+10],17,-42063),i,r,t[s+11],22,-1990404162),n=Pt(n,i=Pt(i,r=Pt(r,a,n,i,t[s+12],7,1804603682),a,n,t[s+13],12,-40341101),r,a,t[s+14],17,-1502002290),i,r,t[s+15],22,1236535329),n=Mt(n,i=Mt(i,r=Mt(r,a,n,i,t[s+1],5,-165796510),a,n,t[s+6],9,-1069501632),r,a,t[s+11],14,643717713),i,r,t[s+0],20,-373897302),n=Mt(n,i=Mt(i,r=Mt(r,a,n,i,t[s+5],5,-701558691),a,n,t[s+10],9,38016083),r,a,t[s+15],14,-660478335),i,r,t[s+4],20,-405537848),n=Mt(n,i=Mt(i,r=Mt(r,a,n,i,t[s+9],5,568446438),a,n,t[s+14],9,-1019803690),r,a,t[s+3],14,-187363961),i,r,t[s+8],20,1163531501),n=Mt(n,i=Mt(i,r=Mt(r,a,n,i,t[s+13],5,-1444681467),a,n,t[s+2],9,-51403784),r,a,t[s+7],14,1735328473),i,r,t[s+12],20,-1926607734),n=Ft(n,i=Ft(i,r=Ft(r,a,n,i,t[s+5],4,-378558),a,n,t[s+8],11,-2022574463),r,a,t[s+11],16,1839030562),i,r,t[s+14],23,-35309556),n=Ft(n,i=Ft(i,r=Ft(r,a,n,i,t[s+1],4,-1530992060),a,n,t[s+4],11,1272893353),r,a,t[s+7],16,-155497632),i,r,t[s+10],23,-1094730640),n=Ft(n,i=Ft(i,r=Ft(r,a,n,i,t[s+13],4,681279174),a,n,t[s+0],11,-358537222),r,a,t[s+3],16,-722521979),i,r,t[s+6],23,76029189),n=Ft(n,i=Ft(i,r=Ft(r,a,n,i,t[s+9],4,-640364487),a,n,t[s+12],11,-421815835),r,a,t[s+15],16,530742520),i,r,t[s+2],23,-995338651),n=Bt(n,i=Bt(i,r=Bt(r,a,n,i,t[s+0],6,-198630844),a,n,t[s+7],10,1126891415),r,a,t[s+14],15,-1416354905),i,r,t[s+5],21,-57434055),n=Bt(n,i=Bt(i,r=Bt(r,a,n,i,t[s+12],6,1700485571),a,n,t[s+3],10,-1894986606),r,a,t[s+10],15,-1051523),i,r,t[s+1],21,-2054922799),n=Bt(n,i=Bt(i,r=Bt(r,a,n,i,t[s+8],6,1873313359),a,n,t[s+15],10,-30611744),r,a,t[s+6],15,-1560198380),i,r,t[s+13],21,1309151649),n=Bt(n,i=Bt(i,r=Bt(r,a,n,i,t[s+4],6,-145523070),a,n,t[s+11],10,-1120210379),r,a,t[s+2],15,718787259),i,r,t[s+9],21,-343485551),r=Nt(r,o),a=Nt(a,l),n=Nt(n,c),i=Nt(i,u)}return Array(r,a,n,i)}(function(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}(t),8*t.length))).toLowerCase()},Vt=n(767),Ht=n.n(Vt),Gt=(Ut=function(t,e){return(Ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Ut(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),zt=function(){return(zt=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},Yt=function(t){function e(e){void 0===e&&(e={});var r=t.call(this)||this;return r.capacity=0,r.config=zt(zt({},a.queue),e),r.events={},r.interval=0,r.timer=null,r}return Gt(e,t),e.prototype.check=function(){return this.shouldFlushQueue()&&this.flush(),this},e.prototype.flush=function(){var t=Object.values(this.events);return t=this.filterTimedEvents(t),this.emit("flush",t),this.capacity=0,this.interval=0,this.events={},this},e.prototype.pause=function(){return this.timer&&(clearInterval(this.timer),this.timer=null),this},e.prototype.start=function(){var t=this;return this.pause(),this.timer=setInterval((function(){t.interval++,t.check()}),1e3),this},e.prototype.add=function(t){return this.capacity++,this.events[t.id]=t,this.emit("add",t),this},e.prototype.shouldFlushQueue=function(){return this.capacity>0&&this.interval>=this.config.interval||this.capacity>=this.config.capacity},e.prototype.filterTimedEvents=function(t){var e=null,r=[];try{return t.forEach((function(t){"timed"===t.event?(!e||t.data.time>e.data.time)&&(e=t):r.push(t)})),e&&r.push(e),r}catch(e){return console.error(e),t}},e}(Ht());!function(){function t(t){this.count=t||0}t.prototype.start=function(){var t=this;return this.pause(),this.interval=setInterval((function(){t.count++}),1e3),this},t.prototype.pause=function(){return clearInterval(this.interval),this},t.prototype.value=function(){return this.count},t.prototype.clear=function(){return this.count=0,this}}();var qt=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))},Wt=function(t){return new this((function(r,a){if(!t||void 0===t.length)return a(new TypeError(e(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return r([]);var i=n.length;function s(t,a){if(a&&("object"==e(a)||"function"==typeof a)){var o=a.then;if("function"==typeof o)return void o.call(a,(function(e){s(t,e)}),(function(e){n[t]={status:"rejected",reason:e},0==--i&&r(n)}))}n[t]={status:"fulfilled",value:a},0==--i&&r(n)}for(var o=0;o<n.length;o++)s(o,n[o])}))};function Kt(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}Kt.prototype=Error.prototype;var Xt=function(t){var e=this;return new e((function(r,a){if(!t||void 0===t.length)return a(new TypeError("Promise.any accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return a();for(var i=[],s=0;s<n.length;s++)try{e.resolve(n[s]).then(r).catch((function(t){i.push(t),i.length===n.length&&a(new Kt(i,"All promises were rejected"))}))}catch(t){a(t)}}))},Zt=setTimeout;function Jt(t){return Boolean(t&&void 0!==t.length)}function Qt(){}function $t(t){if(!(this instanceof $t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ie(t,this)}function te(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,$t._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var a;try{a=r(t._value)}catch(t){return void re(e.promise,t)}ee(e.promise,a)}else(1===t._state?ee:re)(e.promise,t._value)}))):t._deferreds.push(e)}function ee(t,r){try{if(r===t)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"==e(r)||"function"==typeof r)){var a=r.then;if(r instanceof $t)return t._state=3,t._value=r,void ae(t);if("function"==typeof a)return void ie((n=a,i=r,function(){n.apply(i,arguments)}),t)}t._state=1,t._value=r,ae(t)}catch(r){re(t,r)}var n,i}function re(t,e){t._state=2,t._value=e,ae(t)}function ae(t){2===t._state&&0===t._deferreds.length&&$t._immediateFn((function(){t._handled||$t._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)te(t,t._deferreds[e]);t._deferreds=null}function ne(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}function ie(t,e){var r=!1;try{t((function(t){r||(r=!0,ee(e,t))}),(function(t){r||(r=!0,re(e,t))}))}catch(t){if(r)return;r=!0,re(e,t)}}$t.prototype.catch=function(t){return this.then(null,t)},$t.prototype.then=function(t,e){var r=new this.constructor(Qt);return te(this,new ne(t,e,r)),r},$t.prototype.finally=qt,$t.all=function(t){return new $t((function(r,a){if(!Jt(t))return a(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return r([]);var i=n.length;function s(t,o){try{if(o&&("object"==e(o)||"function"==typeof o)){var l=o.then;if("function"==typeof l)return void l.call(o,(function(e){s(t,e)}),a)}n[t]=o,0==--i&&r(n)}catch(t){a(t)}}for(var o=0;o<n.length;o++)s(o,n[o])}))},$t.any=Xt,$t.allSettled=Wt,$t.resolve=function(t){return t&&"object"==e(t)&&t.constructor===$t?t:new $t((function(e){e(t)}))},$t.reject=function(t){return new $t((function(e,r){r(t)}))},$t.race=function(t){return new $t((function(e,r){if(!Jt(t))return r(new TypeError("Promise.race accepts an array"));for(var a=0,n=t.length;a<n;a++)$t.resolve(t[a]).then(e,r)}))},$t._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){Zt(t,0)},$t._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var se=$t,oe=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();"function"!=typeof oe.Promise?oe.Promise=se:(oe.Promise.prototype.finally||(oe.Promise.prototype.finally=qt),oe.Promise.allSettled||(oe.Promise.allSettled=Wt),oe.Promise.any||(oe.Promise.any=Xt));var le=function(){return(le=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},ce=[],ue=function(t,e){var r=t.cache.hashingMethod,a=JSON.stringify(e);return r&&"md5"===r.toLowerCase()?jt(a):a},de=function(t,e,r){var a;if(!t)return 0;if(r=r||t,t instanceof Array){for(a=0;a<t.length;a++)if(!1===e.call(r,t[a],a,t))return 0}else for(a in t)if(t.hasOwnProperty(a)&&!1===e.call(r,t[a],a,t))return 0;return 1},he=function(t,e){var r=le(le({},a),t);if(!1===r.unique)return!0;var n=r.cache,i=JSON.stringify(e),s={hash:ue(r,i),expiryTime:n.maxAge?Date.now()+n.maxAge:void 0};return n.storage?function(t,e){if(e){if(e.get(t.hash,!1))return Promise.resolve(!1);e.set(t.hash,!0)}return Promise.resolve(!0)}(s,n.storage):function(t){if(t.expiryTime){var e=Date.now();ce=ce.filter((function(t){return t.expiryTime>e}))}var r=ce.find((function(e){return t.hash===e.hash}));if(r){if(!(r.expiryTime&&r.expiryTime<Date.now()))return Promise.resolve(!1);ce=ce.filter((function(e){return t.hash!==e.hash}))}return ce.push(t),Promise.resolve(!0)}(s)},pe=function(t){function e(t){if(t)return this instanceof e?(this.selector=t,this):new e(t)}return void 0===t&&(t={}),t.domListeners=t.domListeners||{},e.prototype.on=function(e,r){var a,n=this;return 2!==arguments.length||"string"!=typeof e||"function"!=typeof r?this:(void 0===t.domListeners[e]&&(function(t,e){document.addEventListener?document.addEventListener(t,e,!1):(document.attachEvent=document.attachEvent||function(){console.error("Keen: Unable to attach event listener.")},document.attachEvent("on"+t,e))}(e,(a=e,function(e){var r,n;r=e||window.event,n=r.target||r.srcElement,"undefined"!==t.domListeners[a]&&de(t.domListeners[a],(function(t,e){!function(t,e){for(var r=(t.parentNode||document).querySelectorAll(e)||[],a=r.length;a--;)if(r[a]===t)return!0;return!1}(n,e)?"window"===e&&de(t,(function(t){t(r)})):de(t,(function(t){"click"===a&&"A"===n.nodeName?function(t,e,r){var a,n;if(void 0!==e.getAttribute?a=e.getAttribute("target"):e.target&&(a=e.target),"boolean"==typeof(n=r(t))&&!1===n||t.defaultPrevented||!1===t.returnValue)return t.preventDefault&&t.preventDefault(),t.returnValue=!1,!1;if("_blank"!==a&&"blank"!==a&&!t.metaKey&&!e.hasAttribute("download")&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1,e.href&&"#"!==e.href&&e.href!==window.location+"#"))if(void 0!==n){if(navigator&&navigator.sendBeacon)return void(window.location=e.href);n.then((function(){window.location=e.href})).catch((function(){window.location=e.href}))}else setTimeout((function(){window.location=e.href}),500)}(r,n,t):"submit"===a&&"FORM"===n.nodeName?function(t,e,r){var a=r(t);if("boolean"==typeof a&&!1===a||t.defaultPrevented||!1===t.returnValue)return t.preventDefault&&t.preventDefault(),t.returnValue=!1,!1;if(t.preventDefault&&t.preventDefault(),t.returnValue=!1,void 0!==a){if(navigator&&navigator.sendBeacon)return void e.submit();a.then((function(){e.submit()})).catch((function(){e.submit()}))}else setTimeout((function(){e.submit()}),500)}(r,n,t):t(r)}))}))})),t.domListeners[e]={}),t.domListeners[e][n.selector]=t.domListeners[e][n.selector]||[],t.domListeners[e][n.selector].push(r),n)},e.prototype.once=function(t,e){var r=this;function a(){return r.off(t,a),e.apply(r,arguments)}return a.fn=e,r.on(t,a),r},e.prototype.off=function(e,r){var a=this,n=[];if(2===arguments.length)de(t.domListeners[e][a.selector],(function(t){t!==r&&t.fn!==r&&n.push(t)})),t.domListeners[e][a.selector]=n;else if(1===arguments.length)try{delete t.domListeners[e][a.selector]}catch(r){t.domListeners[e][a.selector]=[]}else de(t.domListeners,(function(e,r){try{delete t.domListeners[r][a.selector]}catch(e){t.domListeners[r][a.selector]=function(){}}}));return a},e},fe="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==fe&&fe,me="URLSearchParams"in fe,ye="Symbol"in fe&&"iterator"in Symbol,ve="FileReader"in fe&&"Blob"in fe&&function(){try{return new Blob,!0}catch(t){return!1}}(),ge="FormData"in fe,be="ArrayBuffer"in fe;if(be)var we=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ke=ArrayBuffer.isView||function(t){return t&&we.indexOf(Object.prototype.toString.call(t))>-1};function Te(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function xe(t){return"string"!=typeof t&&(t=String(t)),t}function Ee(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return ye&&(e[Symbol.iterator]=function(){return e}),e}function Se(t){this.map={},t instanceof Se?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function _e(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function Le(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function Ae(t){var e=new FileReader,r=Le(e);return e.readAsArrayBuffer(t),r}function Ce(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Re(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:ve&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:ge&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:me&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():be&&ve&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=Ce(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):be&&(ArrayBuffer.prototype.isPrototypeOf(t)||ke(t))?this._bodyArrayBuffer=Ce(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):me&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ve&&(this.blob=function(){var t=_e(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_e(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(Ae)}),this.text=function(){var t,e,r,a=_e(this);if(a)return a;if(this._bodyBlob)return t=this._bodyBlob,r=Le(e=new FileReader),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),a=0;a<e.length;a++)r[a]=String.fromCharCode(e[a]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ge&&(this.formData=function(){return this.text().then(Oe)}),this.json=function(){return this.text().then(JSON.parse)},this}Se.prototype.append=function(t,e){t=Te(t),e=xe(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},Se.prototype.delete=function(t){delete this.map[Te(t)]},Se.prototype.get=function(t){return t=Te(t),this.has(t)?this.map[t]:null},Se.prototype.has=function(t){return this.map.hasOwnProperty(Te(t))},Se.prototype.set=function(t,e){this.map[Te(t)]=xe(e)},Se.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},Se.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),Ee(t)},Se.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),Ee(t)},Se.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),Ee(t)},ye&&(Se.prototype[Symbol.iterator]=Se.prototype.entries);var Ie=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function De(t,e){if(!(this instanceof De))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,a,n=(e=e||{}).body;if(t instanceof De){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Se(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new Se(e.headers)),this.method=(a=(r=e.method||this.method||"GET").toUpperCase(),Ie.indexOf(a)>-1?a:r),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var i=/([?&])_=[^&]*/;i.test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function Oe(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),a=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(a),decodeURIComponent(n))}})),e}function Pe(t,e){if(!(this instanceof Pe))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new Se(e.headers),this.url=e.url||"",this._initBody(t)}De.prototype.clone=function(){return new De(this,{body:this._bodyInit})},Re.call(De.prototype),Re.call(Pe.prototype),Pe.prototype.clone=function(){return new Pe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Se(this.headers),url:this.url})},Pe.error=function(){var t=new Pe(null,{status:0,statusText:""});return t.type="error",t};var Me=[301,302,303,307,308];Pe.redirect=function(t,e){if(-1===Me.indexOf(e))throw new RangeError("Invalid status code");return new Pe(null,{status:e,headers:{location:t}})};var Fe=fe.DOMException;try{new Fe}catch(r){(Fe=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack}).prototype=Object.create(Error.prototype),Fe.prototype.constructor=Fe}function Be(t,r){return new Promise((function(a,n){var i=new De(t,r);if(i.signal&&i.signal.aborted)return n(new Fe("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new Se,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var r=t.split(":"),a=r.shift().trim();if(a){var n=r.join(":").trim();e.append(a,n)}})),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var n="response"in s?s.response:s.responseText;setTimeout((function(){a(new Pe(n,r))}),0)},s.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){n(new Fe("Aborted","AbortError"))}),0)},s.open(i.method,function(t){try{return""===t&&fe.location.href?fe.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&(ve?s.responseType="blob":be&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!r||"object"!=e(r.headers)||r.headers instanceof Se?i.headers.forEach((function(t,e){s.setRequestHeader(e,t)})):Object.getOwnPropertyNames(r.headers).forEach((function(t){s.setRequestHeader(t,xe(r.headers[t]))})),i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",o)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}Be.polyfill=!0,fe.fetch||(fe.fetch=Be,fe.Headers=Se,fe.Request=De,fe.Response=Pe);var Ne="REQUEST_FALLBACK",Ue=function(){return(Ue=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function je(t,e,r){var n,i=Ue(Ue({},a.retry),r||{}),s=i.limit,o=i.initialDelay,l=i.retryOnResponseStatuses,c=i.fallbackToBeacon,u=0,d={"Content-Type":"application/json",Accept:"application/json"},h=JSON.stringify(e);if(l&&!(l instanceof Array))throw{name:"ArgumentError",message:"retryOn property expects an array"};"undefined"!=typeof AbortController&&(n=new AbortController);var p=new Promise((function(e,a){var i=function(r){c?navigator.sendBeacon("".concat(t.base).concat(t.beacon),h)?e(Ne):a(Ne):a(r)},p=function(s){fetch("".concat(t.base).concat(t.fetch),Ue(Ue({},r),{signal:n.signal,headers:d,body:h,method:"POST"})).then((function(t){-1===l.indexOf(t.status)?e(t):s>0?f():i(t)})).catch((function(t){if(t.code===DOMException.ABORT_ERR)return a("REQUEST_ABORTED");s>0?f():i(t)}))};function f(){u+=1,setTimeout((function(){p(s-u)}),2^u*o)}p(s-u)}));return p.abort=function(){n.abort()},p}var Ve=function(){return(Ve=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},He=function(t,e,r,a){return new(r||(r=Promise))((function(n,i){function s(t){try{l(a.next(t))}catch(t){i(t)}}function o(t){try{l(a.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,o)}l((a=a.apply(t,e||[])).next())}))},Ge=function(t,e){var r,a,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},ze=function(){function t(t){this.version="3.0.2",this.config=Ve(Ve({},a),t),this.browserProfile=mt(),this.queue=new Yt(this.config.queue),this.listeners=pe(),this.sessionStore=Dt("hermes-session",108e5),this.sessionId=this.loadSessionId(),this.deviceStore=Dt("hermes-device",31536e6),this.deviceId=this.loadDeviceId(),this.logger=new vt(this.config.debug?15:3),this.browserStore=Dt("browser-info",6048e5),this.queue_started=!1}return t.prototype.start=function(){return this.logger.debug("Starting Hermes v"+this.version),this.setupSystemMetadata(),this.configureEvents(),this.queue.start(),this},t.prototype.setup=function(t){this.uri=t.uri||window.location.href,this.saveUriWithTrafficParams(this.uri),t.uri=this.getUriWithTrafficParams(this.uri),this.customMetadata=t},t.prototype.useStore=function(t){return this.config.cache.storage=Dt(t,this.config.cache.maxAge),this},t.prototype.event=function(t,e,r){return He(this,void 0,void 0,(function(){var a,n;return Ge(this,(function(i){switch(i.label){case 0:return(a={id:null,createdAt:null,event:t,accountId:this.config.accountId,device:this.deviceId,sessionId:this.sessionId,metadata:Ve(Ve({},this.metadata),this.customMetadata),data:e||{}}).id=ue(this.config,a),[4,he(this.config,a)];case 1:return n=i.sent(),a.createdAt=Date.now(),n&&(this.config.dryRun?this.logger.debug("[dryRun] ".concat(JSON.stringify(a))):this.queue.add(a)),r&&this.queue.flush(),[2,this]}}))}))},t.prototype.configureEvents=function(){var t=this;this.queue_started||(this.queue.on("flush",this.flush.bind(this)),this.queue_started=!0),window.addEventListener("beforeunload",(function(){t.logger.debug("beforeunload"),t.queue.flush()}))},t.prototype.saveUriWithTrafficParams=function(t){t&&function(t){try{var e=new URLSearchParams(new URL(t).search),r=!1;return ft.forEach((function(t){e.has(t)&&(r=!0)})),r}catch(t){return!1}}(t)&&this.browserStore.set("uri_with_traffic_params",t)},t.prototype.getUriWithTrafficParams=function(t){return this.browserStore.get("uri_with_traffic_params",t)},t.prototype.flush=function(t){return He(this,void 0,void 0,(function(){var e,r=this;return Ge(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),this.logger.info("Flushing ".concat(t.length," events")),[4,je(this.config.fetch,t,this.config.retry)];case 1:return a.sent(),[3,3];case 2:return e=a.sent(),this.logger.error(e),t.forEach((function(t){r.queue.add(t)})),[3,3];case 3:return[2]}}))}))},t.prototype.setupSystemMetadata=function(){var t=this.getUriWithTrafficParams(this.uri);this.metadata={event_version:this.version,traffic_origin_params:yt(t),uri:t}},t.prototype.loadSessionId=function(){try{var t=this.sessionStore.get("hermes_session_id",pt());return this.sessionStore.set("hermes_session_id",t),t}catch(t){return this.logger.error(t),pt()}},t.prototype.loadDeviceId=function(){try{var t=this.deviceStore.get("hermes_device_id",pt());return this.deviceStore.set("hermes_device_id",t),t}catch(t){return this.logger.error(t),pt()}},t}();window.Hermes=ze})(),i}()}).call(this,r(9).setImmediate)},function(t,e,r){t.exports=r(53)},function(t,e,r){"use strict";var a=r(0),n=r(11),i=r(54),s=r(17);function o(t){var e=new i(t),r=n(i.prototype.request,e);return a.extend(r,i.prototype,e),a.extend(r,e),r}var l=o(r(14));l.Axios=i,l.create=function(t){return o(s(l.defaults,t))},l.Cancel=r(18),l.CancelToken=r(67),l.isCancel=r(13),l.all=function(t){return Promise.all(t)},l.spread=r(68),t.exports=l,t.exports.default=l},function(t,e,r){"use strict";var a=r(0),n=r(12),i=r(55),s=r(56),o=r(17);function l(t){this.defaults=t,this.interceptors={request:new i,response:new i}}l.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=o(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},l.prototype.getUri=function(t){return t=o(this.defaults,t),n(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},a.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,r){return this.request(o(r||{},{method:t,url:e,data:(r||{}).data}))}})),a.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,r,a){return this.request(o(a||{},{method:t,url:e,data:r}))}})),t.exports=l},function(t,e,r){"use strict";var a=r(0);function n(){this.handlers=[]}n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){a.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=n},function(t,e,r){"use strict";var a=r(0),n=r(57),i=r(13),s=r(14);function o(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return o(t),t.headers=t.headers||{},t.data=n(t.data,t.headers,t.transformRequest),t.headers=a.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),a.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return o(t),e.data=n(e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(o(t),e&&e.response&&(e.response.data=n(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e,r){return a.forEach(r,(function(r){t=r(t,e)})),t}},function(t,e,r){"use strict";var a=r(0);t.exports=function(t,e){a.forEach(t,(function(r,a){a!==e&&a.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[a])}))}},function(t,e,r){"use strict";var a=r(16);t.exports=function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(a("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}},function(t,e,r){"use strict";t.exports=function(t,e,r,a,n){return t.config=e,r&&(t.code=r),t.request=a,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,r){"use strict";var a=r(0);t.exports=a.isStandardBrowserEnv()?{write:function(t,e,r,n,i,s){var o=[];o.push(t+"="+encodeURIComponent(e)),a.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),a.isString(n)&&o.push("path="+n),a.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";var a=r(63),n=r(64);t.exports=function(t,e){return t&&!a(e)?n(t,e):e}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var a=r(0),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,s={};return t?(a.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=a.trim(t.substr(0,i)).toLowerCase(),r=a.trim(t.substr(i+1)),e){if(s[e]&&n.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([r]):s[e]?s[e]+", "+r:r}})),s):s}},function(t,e,r){"use strict";var a=r(0);t.exports=a.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var a=t;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=a.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";var a=r(18);function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new a(t),e(r.reason))}))}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t;return{token:new n((function(e){t=e})),cancel:t}},t.exports=n},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";r.r(e);r(48);var a=r(19),n=r.n(a),i=r(8),s={insert:"head",singleton:!1},o=(n()(i.a,s),i.a.locals,r(1)),l=r(21),c=r.n(l);function u(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var d=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.action=e.options.playback_options?e.options.playback_options.action_after_finish:null,this.loopCount=0,this.loop=this.loop.bind(this),this.action&&this.action.properties)return"loop"===this.action.type?this.player.on("ended",this.loop):void 0}var e,r,a;return e=t,(r=[{key:"tempHideBezel",value:function(){var t=this;this.player.bezel.parent.style.opacity="0",setTimeout((function(){t.player.bezel.parent.style.opacity="1"}),1e3)}},{key:"inLoop",get:function(){return this.action&&"loop"===this.action.type&&this.loopCount<5}},{key:"loop",value:function(){if(this.loopCount>=5)return this.player.off("timeupdate",this.loop);this.loopCount++,this.player.video.currentTime=this.action.properties.start,this.tempHideBezel(),this.player.play()}}])&&u(e.prototype,r),a&&u(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}r(51);var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.events=[],this.timeControlDelay=5,this.setupHermesV2(),this.handleEvents()}var e,r,a;return e=t,(r=[{key:"setupHermesV2",value:function(){var t=this;this.hermesV2=new window.Hermes({dryRun:this.player.options.preview,debug:this.player.options.preview,fetch:{base:"https://vt-h-1.b-cdn.net",fetch:"/x",beacon:"/y"},accountId:this.player.options.accountId,unique:!1,queue:{interval:20},retry:{fallbackToBeacon:!1}}),this.hermesV2.setup({product:"vturb",media_id:this.player.options.videoId,player_id:this.player.options.id,media_type:"video",domain:this.retrieveDomain(),path:location.pathname,player_version:"1.35.1",uri:window.location.href}),this.hermesV2.useStore("smartplayer"),this.hermesV2.queue.on("flush",(function(e){e.forEach((function(e){t.events.push(e)}))})),this.hermesV2.start(),this.playedV2=!1,this.lastTimeV2=-10,this.eventsV2()}},{key:"event",value:function(){var t;(t=this.hermesV2).event.apply(t,arguments)}},{key:"eventsV2",value:function(){var t=this;this.player.on("premount",(function(){t.hermesV2.event("pageview",null,!0)})),this.player.on("play",(function(){setTimeout((function(){t.playedV2||t.player.smartAutoPlay||(t.playedV2=!0,r(),t.hermesV2.event("played",null,!0))}),100)}));var e,r=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t.player.smartAutoPlay&&!t.player.inResume){var r=Math.round(t.player.video.currentTime);if((r-=r%t.timeControlDelay)<t.lastTimeV2+t.timeControlDelay)return;t.lastTimeV2=r,t.hermesV2.event("timed",{time:r},e)}};window.addEventListener("beforeunload",(function(){return t.playedV2&&r(!0),null})),this.player.on("timeupdate",(function(){return r()})),this.player.on("pause",(function(){clearTimeout(e),e=setTimeout((function(){var e=Math.round(t.player.video.currentTime);t.hermesV2.event("paused",{time:e},!0)}),1e3)})),this.player.on("ended",(function(){t.hermesV2.event("finished")})),window.addEventListener("click",(function e(r){var a=r.target;a=t.findClickableParent(a),t.shouldHandleClickEvent(a)&&t.handleClickEvent(a,e)}))}},{key:"closestElement",value:function(t,e){for(;t;){if(t.matches(e))return t;t=t.parentElement}return null}},{key:"getClosestFunction",value:function(){return Element.prototype.closest?function(t,e){return t.closest(e)}:this.closestElement.bind(this)}},{key:"shouldHandleClickEvent",value:function(t){if(!t)return!1;var e=this.getClosestFunction(),r=e(t,".smartplayer-click-event")||e(t,'[id^="smartplayer-click-event"]'),a=t.classList.contains("ignore-click-event");return r&&!a}},{key:"findClickableParent",value:function(t){for(;t;){if(["A","BUTTON","INPUT"].includes(t.tagName))return t;t=t.parentElement}return null}},{key:"handleClickEvent",value:function(t,e){if("A"===t.tagName){var r=t.getAttribute("href"),a=window.location.href.split("#")[0],n=r.split("#")[0];!r||n===a||r.startsWith("#")||r.startsWith("javascript:")||this.handleRegisterClickEvent(e)}else if("BUTTON"===t.tagName)this.handleRegisterClickEvent(e);else if("INPUT"===t.tagName&&"submit"===t.type){var i=t.form;i&&i.action&&this.handleRegisterClickEvent(e)}}},{key:"handleRegisterClickEvent",value:function(t){var e=Math.round(this.player.video.currentTime);this.hermesV2.event("clicked",{time:e},!0),window.removeEventListener("click",t)}},{key:"handleEvents",value:function(){var t=this;window.addEventListener("message",(function(e){var r=e.data,a=e.data.data;"smartplayer"===r.type&&r.id===t.player.options.id&&"restart-hermes"===r.event&&(t.hermesV2.setup({product:"vturb",media_id:t.player.options.videoId,player_id:t.player.options.id,media_type:"video",domain:a.domain,path:a.pathname,player_version:"1.35.1",uri:a.uri}),t.hermesV2.start(),t.hermesV2.event("iframe-pageview",null,!0))})),this.player.events.on("mounted",(function(){window.parent.postMessage({type:"smartplayer",event:"getOriginalUriParams",id:t.player.options.id},"*")}))}},{key:"retrieveDomain",value:function(){var t=window.location.host;if(window.location!==window.parent.location)try{var e=document.referrer.match(/[http|https]:\/\/(.+?)(\/|&|$)/);t=e?e[1]:window.parent.location.host}catch(t){console.log("Can't get domain from parent",t)}return t}}])&&h(e.prototype,r),a&&h(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var m=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.options.playback_options&&null!==this.player.options.playback_options.scroll_to_action_in&&this.player.on("timeupdate",(function(){return r.scroller()}))}var e,r,a;return e=t,(r=[{key:"findScrollerElement",value:function(){var t=document.querySelector(".".concat("smartplayer-scroll-event"));return t||document.querySelector(".".concat("smartplayer-call-action"))}},{key:"scrollToElement",value:function(){var t=this;this.player.fullScreen.cancelAll(),setTimeout((function(){var e=t.findScrollerElement();if(e){var r=e.getBoundingClientRect();window.scrollTo({top:r.top+window.scrollY-window.innerHeight/2,left:r.left+window.scrollX,behavior:"smooth"})}}),700)}},{key:"scroller",value:function(){var t=Math.round(this.player.video.currentTime);this.player.smartAutoPlay||this.lastTime===t||(this.lastTime=t,t===Math.round(this.player.options.playback_options.scroll_to_action_in)&&this.scrollToElement())}}])&&f(e.prototype,r),a&&f(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={},this.elements.volume=e.volumeBar,this.elements.played=e.playedBar,this.elements.loaded=e.loadedBar}var e,r,a;return e=t,(r=[{key:"set",value:function(t,e,r){e=Math.max(e,0),e=Math.min(e,1),this.elements[t]&&(this.elements[t].style[r]=100*e+"%")}},{key:"get",value:function(t){return this.elements[t]?parseFloat(this.elements[t].style.width)/100:0}}])&&y(e.prototype,r),a&&y(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var b=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.parent=e.parentElement,this.container.addEventListener("animationend",(function(){r.container.classList.remove("smartplayer-bezel-transition")}))}var e,r,a;return e=t,(r=[{key:"switch",value:function(t){this.container.innerHTML=t,this.container.classList.add("smartplayer-bezel-transition")}}])&&g(e.prototype,r),a&&g(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),w=r(22),k=r.n(w),T="URLSearchParams"in window?window.URLSearchParams:k.a;function x(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function S(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var _=/^(((http|https|ftp):\/\/)|\/)/,L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=new T}var e,r,a;return e=t,(r=[{key:"getHtmlLinks",value:function(t){var e=Array.from(document.getElementsByTagName("a"));this.links=e.filter((function(e){return e.classList.contains(t)}))}},{key:"setHtmlLinks",value:function(){var t,e=x(this.links);try{for(e.s();!(t=e.n()).done;){var r=t.value;this.updateSearchOfElement(r)}}catch(t){e.e(t)}finally{e.f()}}},{key:"updateSearchOfElement",value:function(t){var e=this;if(t.hasAttribute("href")&&t.getAttribute("href").match(_)){var r=new T(t.search);this.params.forEach((function(t,a){r.set(a,""!=r.getAll(a)?r.getAll(a):e.params.getAll(a))})),t.search=r.toString()}}},{key:"parseURL",value:function(){var t=this;new T(location.search).forEach((function(e,r){t.params.set(r,e)}))}},{key:"transferUtmTo",value:function(t){try{this.parseURL(),this.getHtmlLinks(t),this.setHtmlLinks()}catch(t){console.log(t)}}}])&&S(e.prototype,r),a&&S(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var R=/mobile/i.test(window.navigator.userAgent),I=r(70).v4,D=0,O={secondToTime:function(t){if(0===(t=t||0)||t===1/0||"NaN"===t.toString())return"00:00";var e=Math.floor(t/3600),r=Math.floor((t-3600*e)/60),a=Math.floor(t-3600*e-60*r);return(e>0?[e,r,a]:[r,a]).map((function(t){return t<10?"0"+t:""+t})).join(":")},getElementViewLeft:function(t){var e=t.offsetLeft,r=t.offsetParent,a=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==r&&r!==t;)e+=r.offsetLeft,r=r.offsetParent;else for(;null!==r;)e+=r.offsetLeft,r=r.offsetParent;return e-a},getBoundingClientRectViewLeft:function(t){var e=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0);if(t.getBoundingClientRect){if("number"!=typeof this.getBoundingClientRectViewLeft.offset){var r=document.createElement("div");r.style.cssText="position:absolute;top:0;left:0;",document.body.appendChild(r),this.getBoundingClientRectViewLeft.offset=-r.getBoundingClientRect().top-e,document.body.removeChild(r),r=null}var a=t.getBoundingClientRect(),n=this.getBoundingClientRectViewLeft.offset;return a.left+n}return this.getElementViewLeft(t)},getScrollPosition:function(){return{left:window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}},setScrollPosition:function(t){var e=t.left,r=void 0===e?0:e,a=t.top,n=void 0===a?0:a;this.isFirefox?(document.documentElement.scrollLeft=r,document.documentElement.scrollTop=n):window.scrollTo(r,n)},isMobile:R,isFirefox:/firefox/i.test(window.navigator.userAgent),isChrome:/chrome/i.test(window.navigator.userAgent),storage:{set:function(t,e){localStorage.setItem(t,e)},get:function(t){return localStorage.getItem(t)}},nameMap:{dragStart:R?"touchstart":"mousedown",dragMove:R?"touchmove":"mousemove",dragEnd:R?"touchend":"mouseup"},uniqID:function(){return"uid_".concat(Math.floor(Math.random()*Date.now()),"_").concat(++D)},color2Number:function(t){return"#"===t[0]&&(t=t.substr(1)),3===t.length&&(t="".concat(t[0]).concat(t[0]).concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2])),parseInt(t,16)+0&16777215},number2Color:function(t){return"#"+("00000"+t.toString(16)).slice(-6)},number2Type:function(t){switch(t){case 0:return"right";case 1:return"top";case 2:return"bottom";default:return"right"}},checkLocalStorage:function(){try{if(localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test"))return localStorage.removeItem("feature_test"),!0}catch(t){return!1}return!1},cookieSet:function(t,e,r){t=["".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))],r&&("expiry"in r&&("number"==typeof r.expiry&&(r.expiry=new Date(1e3*r.expiry+ +new Date)),t.push("expires=".concat(r.expiry.toGMTString()))),"domain"in r&&t.push("domain=".concat(r.domain)),"path"in r&&t.push("path=".concat(r.path)),"secure"in r&&r.secure&&t.push("secure")),document.cookie=t.join("; ")},cookieGet:function(t,e){for(var r=[],a=document.cookie.split(/; */),n=0;n<a.length;n++){var i=a[n].split("=");i[0]==encodeURIComponent(t)&&r.push(decodeURIComponent(i[1].replace(/\+/g,"%20")))}return e?r:r[0]},cookieRemove:function(t,e){e||(e={}),e.expiry=-86400,this.set(t,"",e)},insertAfter:function(t,e){t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)},currentSession:function(t){if(t.options.session_id)return t.options.session_id;var e;try{var r=localStorage.getItem("vturb.session"),a=JSON.parse(r);e=a.expires>=Date.now()?a.uuid:I()}catch(t){e=I()}try{localStorage.setItem("vturb.session",JSON.stringify({uuid:e,expires:Date.now()+432e5}))}catch(t){console.log("vturb cannot set data in localstorage")}return t.options.session_id=e,e},removeSmartPlay:function(t){t.smartAutoPlay=!1,t.container.classList.remove("smartplayer-smart-auto-play"),t.container.classList.remove("smartplayer-show-smart-auto-play"),t.template.smartPlay.remove(),t.seek(0),t.volume(100),t.events.trigger("smartplay_play"),t.events.trigger("play"),document.getElementById("smartplay-poster").style.display="none",t.video.paused&&Promise.resolve(t.video.play()).catch((function(){setTimeout((function(){t.video.play()}),100)}))},canUseScale:function(){try{return CSS.supports("scale: 0.5")}catch(t){return console.error(t),!1}},chooseRandomEntry:function(t,e,r){var a,n=t.reduce((function(t,e){return t+e.weight}),0),i=Math.random()*n,s=A(t);try{for(s.s();!(a=s.n()).done;){var o=a.value;if((i-=o.weight)<=0)return e?o[e]:o}}catch(t){s.e(t)}finally{s.f()}return r},isNil:function(t){return null==t}};function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function M(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){F(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function F(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function B(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var N=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,(e.options.callAction||[]).length>0&&(this.onSeek=this.onSeek.bind(this),this.onDestroy=this.onDestroy.bind(this),this.callActions=e.options.callAction.map((function(t){var e=null;e=t.type&&"inner_button"!==t.type?r.insertButtonBelow(t):document.getElementById(t.id),r.addBaseClasses(e),t.type&&"inner_button"===t.type&&r.addBaseStyles(e,t);var a=e.querySelector(".smartplayer-call-action--link");return M(M({},t),{},{el:e,elLink:a,showed:!1})})),this.setEvents()),this.transferUtm()}var e,r,a;return e=t,(r=[{key:"addBaseStyles",value:function(t,e){if(e&&t&&e.size&&this.player.container.clientWidth){var r=t.getElementsByTagName("a")[0];if(r){var a=this.player.container.clientWidth<=768;r.classList.add("inner"),r.classList.add(e.size),a&&r.classList.add("mobile")}}}},{key:"insertButtonBelow",value:function(t){var e=document.createElement("div");switch(e.id=t.id,e.classList.add("smartplayer-call-action","smartplayer-hide","smartplayer-call-action__".concat(t.position),"".concat(t.id)),t.type){case"below_button":var r=document.createElement("a");r.href=t.link||"#",r.title=t.btnText,r.target=t.open_in_new_tab?"_blank":"_parent",r.innerText=t.btnText,r.classList.add("smartplayer-call-action--link");var a="18px";"md"==t.size&&(a="22px"),"lg"==t.size&&(a="26px");var n=document.createElement("style"),i=".smartplayer-call-action.smartplayer-hide {display: none}.smartplayer-call-action.".concat(t.id," {text-align: center;padding: 40px 10px;}.smartplayer-call-action.").concat(t.id," a.smartplayer-call-action--link {background-color: ").concat(t.colors.background,";color: ").concat(t.colors.text,";padding: 1em 3em;display: inline-block;border-radius: 0.4em;font-size: ").concat(a,";line-height: 1;font-weight: 600;box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);text-decoration: none;}.smartplayer-call-action.").concat(t.id," a.smartplayer-call-action--link:hover {background-color: ").concat(t.colors.background_hover,";color: ").concat(t.colors.text_hover,";text-decoration: none;}");n.innerText=i,e.appendChild(n),e.appendChild(r);break;case"custom_html":var s=document.createRange().createContextualFragment(t.custom_html||""),o=document.createElement("style");o.innerText=".smartplayer-call-action.smartplayer-hide {display: none}",e.appendChild(o),e.appendChild(s)}return O.insertAfter(this.player.container,e),e}},{key:"checkCallAction",value:function(t,e){var r=this.player.video.duration+1<t.range.finish,a=this.player.actionAfterFinish.inLoop&&this.player.actionAfterFinish.loopCount>0;if(r&&a)return t.el.classList.remove("smartplayer-hide");!t.showed&&t.range.start<e&&t.range.finish>e?(t.showed=!0,t.el&&t.el.classList.remove("smartplayer-hide")):t.showed&&(t.range.start>e||t.range.finish<e)&&(t.showed=!1,t.el&&t.el.classList.add("smartplayer-hide"))}},{key:"setEvents",value:function(){this.player.on("timeupdate",this.onSeek)}},{key:"onSeek",value:function(){var t=this,e=this.player.video.currentTime;this.player.smartAutoPlay||this.player.inResume||this.callActions.forEach((function(r){new o.a((function(){t.checkCallAction(r,e)}))}))}},{key:"onDestroy",value:function(){}},{key:"addBaseClasses",value:function(t){try{var e=t.getElementsByTagName("a")[0];this.addClassToActionLink(e,"smartplayer-call-action-transfer-utm"),this.addClassToActionLink(e,"smartplayer-click-event")}catch(t){console.log(t)}}},{key:"transferUtm",value:function(){try{(new L).transferUtmTo("smartplayer-call-action-transfer-utm")}catch(t){console.error(t)}}},{key:"addClassToActionLink",value:function(t,e){t&&!t.classList.contains(e)&&t.classList.add(e)}}])&&B(e.prototype,r),a&&B(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var j=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.shown=!1,this.contextMenuOptions=this.player.options.contextmenu||[],Array.prototype.slice.call(this.player.template.menuItem).forEach((function(t,e){var a=t.querySelector("a"),n=t.getAttribute("data-option-id");a&&a.addEventListener("click",(function(){n&&r.player.analytics.hermesV2.event("vturb_analytic_menu_click",{option_id:n},!0)})),r.player.options.contextmenu[e]&&r.player.options.contextmenu[e].click&&t.addEventListener("click",(function(){r.player.options.contextmenu[e].click(r.player),r.hide()}))})),this.player.container.addEventListener("contextmenu",(function(t){var e=t||window.event;e.preventDefault();var a=r.player.container.getBoundingClientRect();r.show(e.clientX-a.left,e.clientY-a.top)})),this.player.template.mask.addEventListener("click",(function(){r.hide()}))}var e,r,a;return e=t,(r=[{key:"show",value:function(t,e){if(this.player.options.contextmenu.length&&!O.isMobile){this.player.template.menu.classList.add("smartplayer-menu-show");var r=this.player.container.getBoundingClientRect();t+this.player.template.menu.offsetWidth>=r.width?(this.player.template.menu.style.right=r.width-t+"px",this.player.template.menu.style.left="initial"):(this.player.template.menu.style.left=t+"px",this.player.template.menu.style.right="initial"),e+this.player.template.menu.offsetHeight>=r.height?(this.player.template.menu.style.bottom=r.height-e+"px",this.player.template.menu.style.top="initial"):(this.player.template.menu.style.top=e+"px",this.player.template.menu.style.bottom="initial"),this.player.template.mask.classList.add("smartplayer-mask-show"),this.shown=!0,this.player.events.trigger("contextmenu_show");var a=this.player.options.contextmenu[this.player.options.contextmenu.length-1];a&&a.id&&this.player.analytics.hermesV2.event("vturb_analytic_menu_view",{option_id:this.player.tran(a.id)},!0)}}},{key:"hide",value:function(){this.player.template.mask.classList.remove("smartplayer-mask-show"),this.player.template.menu.classList.remove("smartplayer-menu-show"),this.shown=!1,this.player.events.trigger("contextmenu_hide")}}])&&U(e.prototype,r),a&&U(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}(),V=r(23),H=r.n(V),G=r(24),z=r.n(G),Y=r(25),q=r.n(Y),W=r(26),K=r.n(W),X=r(27),Z=r.n(X),J=r(28),Q=r.n(J),$=r(29),tt=r.n($),et=r(30),rt=r.n(et),at=r(31),nt=r.n(at),it=r(32),st=r.n(it),ot=r(33),lt=r.n(ot),ct=r(34),ut=r.n(ct),dt=r(35),ht=r.n(dt),pt=r(36),ft=r.n(pt),mt=r(37),yt=r.n(mt),vt=r(38),gt=r.n(vt),bt=r(39),wt=r.n(bt),kt=r(40),Tt=r.n(kt),xt=r(41),Et=r.n(xt),St=r(42),_t=r.n(St),Lt=r(43),At=r.n(Lt),Ct=r(44),Rt=r.n(Ct),It=r(45),Dt=r.n(It),Ot=r(46),Pt=r.n(Ot),Mt={play:st.a,pause:nt.a,seekRewind:ht.a,seekForward:ut.a,volumeUp:Rt.a,volumeDown:_t.a,volumeOff:At.a,full:Q.a,fullWeb:Z.a,setting:yt.a,right:lt.a,comment:K.a,commentOff:q.a,send:ft.a,pallette:rt.a,camera:z.a,subtitleActive:gt.a,subtitleDisabled:wt.a,loading:tt.a,airplay:H.a,synchronizeRewind:Et.a,synchronizeForward:Tt.a,warning:Pt.a,vturb:Dt.a};function Ft(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Bt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.barWidth=e.barWidth,this.container.style.backgroundImage="url('".concat(e.url,"')"),this.events=e.events}var e,r,a;return e=t,(r=[{key:"resize",value:function(t,e,r){this.container.style.width="".concat(t,"px"),this.container.style.height="".concat(e,"px"),this.container.style.top="".concat(2-e,"px"),this.barWidth=r}},{key:"show",value:function(){this.container.style.display="block",this.events&&this.events.trigger("thumbnails_show")}},{key:"move",value:function(t){this.container.style.backgroundPosition="-".concat(160*(Math.ceil(t/this.barWidth*100)-1),"px 0"),this.container.style.left="".concat(Math.min(Math.max(t-this.container.offsetWidth/2,-10),this.barWidth-150),"px")}},{key:"hide",value:function(){this.container.style.display="none",this.events&&this.events.trigger("thumbnails_hide")}}])&&Ft(e.prototype,r),a&&Ft(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Ut=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.autoHideTimer=0,this.player.container.addEventListener("mousemove",(function(){r.setAutoHide()})),this.player.container.addEventListener("click",(function(t){if(r.setAutoHide(),r.player.wasPlayed){if(O.isMobile){if(t.composedPath().includes(r.player.template.controller))return;if(t.composedPath().includes(r.player.template.smartPlay))return;r.player.toggle()}}else r.player.play()})),this.player.container.addEventListener("dblclick",(function(t){t.composedPath().includes(r.player.template.controller)||r.player.fullScreen.toggle("web")})),O.isMobile&&this.player.container.addEventListener("touchstart",(function(t){if(t.touches)switch(t.touches.length){case 2:if(t.composedPath().includes(r.player.template.controller))return;r.player.fullScreen.toggle("web")}})),this.player.on("play",(function(){r.setAutoHide()})),this.player.on("pause",(function(){r.setAutoHide()})),this.initPlayButton(),this.initSeekButton(),this.initThumbnails(),this.initPlayedBar(),this.initFullButton(),this.initQualityButton(),this.initScreenshotButton(),this.initSubtitleButton(),this.initHighlights(),this.initAirplayButton(),this.initVolumeButton()}var e,r,a;return e=t,(r=[{key:"initPlayButton",value:function(){var t=this;this.player.template.playButton&&this.player.template.playButton.addEventListener("click",(function(){t.player.toggle()})),this.player.template.bigplay&&this.player.template.bigplay.addEventListener("click",(function(){O.isMobile||t.player.toggle()})),this.player.template.mobilePlayButton&&this.player.template.mobilePlayButton.addEventListener("click",(function(){t.player.toggle()})),O.isMobile?(this.player.template.videoWrap&&this.player.template.videoWrap.addEventListener("click",(function(){t.toggle()})),this.player.template.controllerMask&&this.player.template.controllerMask.addEventListener("click",(function(){t.toggle()}))):(this.player.template.videoWrap&&this.player.template.videoWrap.addEventListener("click",(function(){t.player.toggle()})),this.player.template.controllerMask&&this.player.template.controllerMask.addEventListener("click",(function(){t.player.toggle()})))}},{key:"initSeekButton",value:function(){var t=this;this.player.options.displays.backward&&this.player.template.seekButtonRewind.addEventListener("click",(function(){t.player.seek(t.player.video.currentTime-t.player.options.seekTime),t.player.bezel.switch(Mt.synchronizeRewind)})),this.player.options.displays.forward&&this.player.template.seekButtonForward.addEventListener("click",(function(){t.player.seek(t.player.video.currentTime+t.player.options.seekTime),t.player.bezel.switch(Mt.synchronizeForward)}))}},{key:"initHighlights",value:function(){var t=this;this.player.on("durationchange",(function(){if(1!==t.player.video.duration&&t.player.video.duration!==1/0&&t.player.options.highlight){var e=document.querySelectorAll(".smartplayer-highlight");[].slice.call(e,0).forEach((function(e){t.player.template.playedBarWrap.removeChild(e)}));for(var r=0;r<t.player.options.highlight.length;r++)if(t.player.options.highlight[r].text&&t.player.options.highlight[r].time){var a=document.createElement("div");a.classList.add("smartplayer-highlight"),a.style.left=t.player.options.highlight[r].time/t.player.video.duration*100+"%",a.innerHTML='<span class="smartplayer-highlight-text">'+t.player.options.highlight[r].text+"</span>",t.player.template.playedBarWrap.insertBefore(a,t.player.template.playedBarTime)}}}))}},{key:"initThumbnails",value:function(){var t=this;this.player.options.video.thumbnails&&(this.thumbnails=new Bt({container:this.player.template.barPreview,barWidth:this.player.template.barWrap.offsetWidth,url:this.player.options.video.thumbnails,events:this.player.events}),this.player.on("loadedmetadata",(function(){t.thumbnails.resize(160,t.player.video.videoHeight/t.player.video.videoWidth*160,t.player.template.barWrap.offsetWidth)})))}},{key:"initPlayedBar",value:function(){var t=this;if(this.player.options.displays.seekbar){var e=function(e){var r=((e.clientX||e.changedTouches[0].clientX)-O.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),t.player.bar.set("played",r,"width"),t.player.template.ptime.innerHTML=O.secondToTime(r*t.player.video.duration)},r=function r(a){document.removeEventListener(O.nameMap.dragEnd,r),document.removeEventListener(O.nameMap.dragMove,e);var n=((a.clientX||a.changedTouches[0].clientX)-O.getBoundingClientRectViewLeft(t.player.template.playedBarWrap))/t.player.template.playedBarWrap.clientWidth;n=Math.max(n,0),n=Math.min(n,1),t.player.bar.set("played",n,"width"),t.player.seek(t.player.bar.get("played")*t.player.video.duration),t.player.timer.enable("progress")};this.player.template.playedBarWrap.addEventListener(O.nameMap.dragStart,(function(){t.player.timer.disable("progress"),document.addEventListener(O.nameMap.dragMove,e),document.addEventListener(O.nameMap.dragEnd,r)})),this.player.template.playedBarWrap.addEventListener(O.nameMap.dragMove,(function(e){if(t.player.video.duration){var r=t.player.template.playedBarWrap.getBoundingClientRect().left,a=(e.clientX||e.changedTouches[0].clientX)-r;if(a<0||a>t.player.template.playedBarWrap.offsetWidth)return;var n=t.player.video.duration*(a/t.player.template.playedBarWrap.offsetWidth);O.isMobile&&t.thumbnails&&t.thumbnails.show(),t.thumbnails&&t.thumbnails.move(a),t.player.options.displays.seekbar_time&&(t.player.template.playedBarTime.style.left="".concat(a-(n>=3600?25:20),"px"),t.player.template.playedBarTime.innerText=O.secondToTime(n),t.player.template.playedBarTime.classList.remove("smartplayer-hidden"))}})),this.player.template.playedBarWrap.addEventListener(O.nameMap.dragEnd,(function(){O.isMobile&&t.thumbnails&&t.thumbnails.hide()})),O.isMobile||(this.player.template.playedBarWrap.addEventListener("mouseenter",(function(){t.player.video&&t.player.video.duration&&(t.thumbnails&&t.thumbnails.show(),t.player.options.displays.seekbar_time&&t.player.template.playedBarTime.classList.remove("smartplayer-hidden"))})),this.player.template.playedBarWrap.addEventListener("mouseleave",(function(){t.player.video&&t.player.video.duration&&(t.thumbnails&&t.thumbnails.hide(),t.player.options.displays.seekbar_time&&t.player.template.playedBarTime.classList.add("smartplayer-hidden"))})))}}},{key:"initFullButton",value:function(){var t=this;this.player.template.browserFullButton&&this.player.template.browserFullButton.addEventListener("click",(function(){t.player.fullScreen.toggle("browser")})),this.player.template.webFullButton&&this.player.template.webFullButton.addEventListener("click",(function(){t.player.fullScreen.toggle("web")}))}},{key:"initVolumeButton",value:function(){var t=this;if(this.player.options.displays.volume){if(this.player.template.volumeBarWrapWrap){var e=function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-O.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(a)},r=function r(){document.removeEventListener(O.nameMap.dragEnd,r),document.removeEventListener(O.nameMap.dragMove,e),t.player.template.volumeButton.classList.remove("smartplayer-volume-active")};this.player.template.volumeBarWrapWrap.addEventListener("click",(function(e){var r=e||window.event,a=((r.clientX||r.changedTouches[0].clientX)-O.getBoundingClientRectViewLeft(t.player.template.volumeBarWrap)-5.5)/35;t.player.volume(a)})),this.player.template.volumeBarWrapWrap.addEventListener(O.nameMap.dragStart,(function(){document.addEventListener(O.nameMap.dragMove,e),document.addEventListener(O.nameMap.dragEnd,r),t.player.template.volumeButton.classList.add("smartplayer-volume-active")}))}this.player.template.volumeButtonIcon.addEventListener("click",(function(){t.player.video.muted?(t.player.video.muted=!1,t.player.switchVolumeIcon(),t.player.bar.set("volume",t.player.volume(),"width")):(t.player.video.muted=!0,t.player.template.volumeIcon.innerHTML=Mt.volumeOff,t.player.bar.set("volume",0,"width"))}))}}},{key:"initQualityButton",value:function(){var t=this;this.player.options.video.quality&&this.player.template.qualityList.addEventListener("click",(function(e){e.target.classList.contains("smartplayer-quality-item")&&t.player.switchQuality(e.target.dataset.index)}))}},{key:"initScreenshotButton",value:function(){var t=this;this.player.options.screenshot&&this.player.template.camareButton.addEventListener("click",(function(){var e,r=document.createElement("canvas");r.width=t.player.video.videoWidth,r.height=t.player.video.videoHeight,r.getContext("2d").drawImage(t.player.video,0,0,r.width,r.height),r.toBlob((function(t){e=URL.createObjectURL(t);var r=document.createElement("a");r.href=e,r.download="smartplayer.png",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)})),t.player.events.trigger("screenshot",e)}))}},{key:"initAirplayButton",value:function(){this.player.options.airplay&&(window.WebKitPlaybackTargetAvailabilityEvent?this.player.video.addEventListener("webkitplaybacktargetavailabilitychanged",function(t){switch(t.availability){case"available":this.template.airplayButton.disable=!1;break;default:this.template.airplayButton.disable=!0}this.template.airplayButton.addEventListener("click",function(){this.video.webkitShowPlaybackTargetPicker()}.bind(this))}.bind(this.player)):this.player.template.airplayButton.style.display="none")}},{key:"initSubtitleButton",value:function(){var t=this;this.player.options.subtitle_active&&this.player.options.subtitle&&this.player.options.displays.subtitle_control&&(this.player.events.on("subtitle_show",(function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Hide subtitle"),t.player.template.subtitleButtonInner.style.opacity="",t.player.template.subtitleButtonInner.innerHTML=Mt.subtitleActive})),this.player.events.on("subtitle_hide",(function(){t.player.template.subtitleButton.dataset.balloon=t.player.tran("Show subtitle"),t.player.template.subtitleButtonInner.style.opacity="0.4",t.player.template.subtitleButtonInner.innerHTML=Mt.subtitleDisabled})),this.player.template.subtitleButton.addEventListener("click",(function(){t.player.subtitle.toggle()})))}},{key:"setAutoHide",value:function(){var t=this;this.show(),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout((function(){t.player.video&&t.player.video.played.length&&!t.player.paused&&!t.disableAutoHide&&t.hide()}),3e3)}},{key:"show",value:function(){!this.player.smartAutoPlay&&this.player.wasPlayed&&this.player.container.classList.remove("smartplayer-hide-controller")}},{key:"hide",value:function(){this.player.container.classList.add("smartplayer-hide-controller"),this.player.setting.hide(),this.player.comment&&this.player.comment.hide()}},{key:"isShow",value:function(){return!this.player.container.classList.contains("smartplayer-hide-controller")}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show()}},{key:"destroy",value:function(){clearTimeout(this.autoHideTimer)}}])&&Nt(e.prototype,r),a&&Nt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Vt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,a;return e=t,a=[{key:"setItem",value:function(t,e){try{localStorage.setItem(t,e)}catch(t){console.log("LocalStorage unavailable ".concat(t))}}},{key:"getItem",value:function(t){try{return localStorage.getItem(t)}catch(t){console.log("LocalStorage unavailable ".concat(t))}}},{key:"removeItem",value:function(t){try{localStorage.removeItem(t)}catch(t){console.log("LocalStorage unavailable ".concat(t))}}},{key:"keys",value:function(){try{return Object.keys(localStorage)}catch(t){return console.log("LocalStorage unavailable ".concat(t)),[]}}},{key:"cleanupOldSessions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var a=t.keys(),n=a.filter((function(t){return t.startsWith(e)&&t!==r}));n.forEach((function(e){return t.removeItem(e)}))}catch(t){console.error("Error cleaning up turbo storage:",t)}}}],(r=null)&&jt(e.prototype,r),a&&jt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ht(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Gt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.hasLocalstorage=O.checkLocalStorage(),this.id=e.options.id,e.options.resume&&this.get()&&(this.inResume=!0,this.player.options.autoplay=!1)}var e,r,a;return e=t,(r=[{key:"start",value:function(){this.player.options.resume&&(this.setEvents(),this.get()&&(this.inResume=!0,this.player.options.autoplay=!1,this.show()))}},{key:"show",value:function(){var t=this;this.player.pause(),this.el=this.player.template.resume,this.play=this.el.querySelector(".smartplayer-resume__play"),this.rewind=this.el.querySelector(".smartplayer-resume__rewind"),this.player.container.classList.add("smartplayer-in-resume"),this.player.inResume=!0,this.el.style.display="block",this.el.addEventListener("click",this.onBackdropClick,!1),this.play.addEventListener("click",this.onPlay.bind(this),!0),this.rewind.addEventListener("click",this.onRewind.bind(this),!0),this.player.video.load(),this.player.seek(this.get()),this.player.on("loadeddata",(function(){t.player.video.currentTime<=.01&&t.player.seek(t.get())}))}},{key:"onBackdropClick",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"onPlay",value:function(){this.resume()}},{key:"onRewind",value:function(){this.player.seek(0),this.resume()}},{key:"resume",value:function(){this.player.play(),this.player.container.classList.remove("smartplayer-in-resume"),this.el.style.display="none",this.player.inResume=!1}},{key:"onSeek",value:function(){if(!this.player.smartAutoPlay){var t=this.player.video.currentTime;t>5&&this.set(t)}}},{key:"setEvents",value:function(){this.onSeek=this.onSeek.bind(this),this.player.on("timeupdate",this.onSeek)}},{key:"get",value:function(){return this.hasLocalstorage?window.localStorage.getItem(this.id):O.cookieGet(this.id)}},{key:"set",value:function(t){return this.hasLocalstorage?window.localStorage.setItem(this.id,t):O.cookieSet(this.id,t)}}])&&Ht(e.prototype,r),a&&Ht(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Yt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.resume=new Gt(e),this.sessionKey="".concat(this.player.analytics.hermesV2.sessionId,"_").concat(this.player.analytics.hermesV2.customMetadata.player_id),this.lastTimed=this.getLastTimed(),this.player.options.conversion_params&&this.player.options.conversion_params.length>0&&(this.setEvents(),this.sendMessageToParent(),this.player.on("timeupdate",(function(){r.player.smartAutoPlay||0===Math.floor(r.player.video.currentTime%5)&&(r.lastTimed=r.getLastTimed(),r.sendMessageToParent())})),this.player.on("ended",(function(){r.player.smartAutoPlay||(r.lastTimed=Math.floor(r.player.video.duration),r.storageLastTimed(r.lastTimed),r.sendMessageToParent())})))}var e,r,a;return e=t,(r=[{key:"getLastTimed",value:function(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 5*Math.floor(t/5)}(this.player.video.currentTime||Number(this.resume.get())||0);try{var e=Vt.getItem("lastTimed_".concat(this.sessionKey));if(!e||!Number(e))return this.storageLastTimed(t),t;var r=Number(e),a=r>=t;return a||this.storageLastTimed(t),a?r:t}catch(e){return console.warn("Skipping getLastTimed due to error:",e),t}}},{key:"storageLastTimed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Vt.setItem("lastTimed_".concat(this.sessionKey),t)}},{key:"postMessageBase",value:function(){window.parent.postMessage({id:this.player.options.id,type:"smartplayer",event:"updateTimedConversionTracker",data:{key:this.getKey(),conversionParams:this.player.options.conversion_params}},"*")}},{key:"sendMessageToParent",value:function(){this.postMessageBase()}},{key:"setEvents",value:function(){var t=this,e=function(e){var r=t.findClickableParent(e.target);r&&!t.shouldIgnoreElement(r)&&("A"===r.tagName?t.handleLinkElement(r):"BUTTON"!==r.tagName&&"INPUT"!==r.tagName||"submit"!==r.type||t.handleFormElement(r))};["mousedown","touchstart","mouseover"].forEach((function(t){window.addEventListener(t,e)}))}},{key:"findClickableParent",value:function(t){for(;t;){if(["A","BUTTON","INPUT"].includes(t.tagName)){if("A"===t.tagName&&t.hasAttribute("href"))return t;if(("BUTTON"===t.tagName||"INPUT"===t.tagName)&&"submit"===t.type&&t.form)return t}t=t.parentElement}return null}},{key:"shouldIgnoreElement",value:function(t){return null!==this.closest(t,".smartplayer-ignore-click-event")}},{key:"handleLinkElement",value:function(t){var e=t.getAttribute("href");if(e)try{var r=window.location.href.split("#")[0];e.split("#")[0]===r||e.startsWith("#")||e.startsWith("javascript:")||(t.href=this.injectIntoURL(e))}catch(e){console.warn("Skipping link element due to error:",e,t)}}},{key:"handleFormElement",value:function(t){var e=this,r=t.form;if(r&&r.action)try{"post"===r.method.toLowerCase()?this.player.options.conversion_params.forEach((function(t){return e.injectKeyIntoInput(t,r)})):r.action=this.injectIntoURL(r.action)}catch(t){console.warn("Skipping form element due to error:",t,r)}}},{key:"injectKeyIntoInput",value:function(t,e){try{var r=['input[name="'.concat(t,'"]'),'input[id="'.concat(t,'"]'),'input[name="form_fields['.concat(t,']"]'),'input[id="form-field-'.concat(t,'"]')].find((function(t){return e.querySelector(t)})),a=e.querySelector(r)||document.createElement("input");a.value=this.getKey(),r||(a.type="hidden",a.id=t,a.name=t,a.style.display="none",e.appendChild(a))}catch(t){console.warn("Skipping form element due to error:",t,e)}}},{key:"injectIntoURL",value:function(t){var e=this;try{var r=new URL(t,window.location.href);try{["cmc_redir"].forEach((function(t){try{if(r.searchParams.has(t)){var a=r.searchParams.get(t);(a.includes("%2F")||a.includes("%3A"))&&(a=decodeURIComponent(a)),new URL(a),r.searchParams.set(t,encodeURIComponent(e.injectIntoURL(a)))}}catch(t){}}))}catch(t){}return this.player.options.conversion_params.forEach((function(t){r.searchParams.set(t,e.getKey())})),r.toString()}catch(e){return console.warn("Invalid URL: ".concat(t),e),t}}},{key:"getKey",value:function(){var t="",e="",r="";return this.player.options.turbo&&(t="_t-".concat(10*this.player.turbo.chosenSpeed)),this.player.options.headline&&this.player.options.headline_number&&(e="_h-".concat(this.player.options.headline_number)),this.player.options.smart_autoplay_selected&&(r="_s-".concat(this.player.options.smart_autoplay_selected.number)),"v3_".concat(this.sessionKey,"_").concat(this.lastTimed).concat(t).concat(e).concat(r)}},{key:"closest",value:function(t,e){return"closest"in t?t.closest(e):this.closestElement(t,e)}},{key:"closestElement",value:function(t,e){for(;t;){if(t.matches(e))return t;t=t.parentElement}return null}}])&&zt(e.prototype,r),a&&zt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Wt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={},this.videoEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","fragmentbuffered","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["screenshot","thumbnails_show","thumbnails_hide","contextmenu_show","contextmenu_hide","notice_show","notice_hide","quality_start","quality_end","destroy","resize","fullscreen","fullscreen_cancel","webfullscreen","webfullscreen_cancel","subtitle_show","subtitle_hide","subtitle_change","startLoading","finishLoading","offline","online","smartplay_play","mounted","premount"]}var e,r,a;return e=t,(r=[{key:"on",value:function(t,e){this.type(t)&&"function"==typeof e&&(this.events[t]||(this.events[t]=[]),this.events[t].push(e))}},{key:"off",value:function(t,e){if(this.type(t)&&"function"==typeof e&&this.events[t]){var r=this.events[t].indexOf(e);r>-1&&this.events[t].splice(r,1)}}},{key:"trigger",value:function(t,e){if(this.events[t]&&this.events[t].length)for(var r=0;r<this.events[t].length;r++)this.events[t][r](e)}},{key:"type",value:function(t){return-1!==this.playerEvents.indexOf(t)?"player":-1!==this.videoEvents.indexOf(t)?"video":(console.error("Unknown event name: ".concat(t)),null)}}])&&qt(e.prototype,r),a&&qt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Xt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.options=e.options,this.alphaAutoTest=this.options.fake_bar_options.alpha_auto_test,this.fakeBarTestAlphas=this.options.fake_bar_options.fake_bar_test_alphas,this.alpha=this.options.fake_bar_options.alpha,this.chosenAlpha=2,this.analyticsSent=!1,this.version=this.getVersion(),this.localStorage=Vt,this.sessionId="",e&&e.analytics&&e.analytics.hermesV2&&e.analytics.hermesV2.session_id?this.sessionId=e.analytics.hermesV2.session_id:this.sessionId=O.currentSession(e),this.storageKey="fakebar_alpha_".concat(this.options.id,"_").concat(this.sessionId),this.localStorage.cleanupOldSessions("fakebar_".concat(this.options.id,"_"),this.storageKey),this.setAlpha(),this.alphaAutoTest&&this.hermesV2()}var e,r,a;return e=t,(r=[{key:"chooseRandomEntry",value:function(t){var e=t[Math.floor(Math.random()*t.length)].alpha,r=JSON.stringify({alpha:e});return this.localStorage.setItem(this.storageKey,r),e}},{key:"alphaExists",value:function(t,e){return!!e&&e.some((function(e){return e.alpha===t}))}},{key:"loadAlpha",value:function(t){try{var e=this.localStorage.getItem(this.storageKey);if(!e)return this.chooseRandomEntry(t);var r=JSON.parse(e);return r&&!O.isNil(r.alpha)&&this.alphaExists(r.alpha,t)?r.alpha:this.chooseRandomEntry(t)}catch(e){return this.chooseRandomEntry(t)}}},{key:"setAlpha",value:function(){2===this.version?this.version2Alpha():this.chosenAlpha=2}},{key:"calcWidth",value:function(t){return 100*Math.pow(1-(t-=1)*t,1/this.chosenAlpha)}},{key:"set",value:function(t,e){if(!this.player.smartAutoPlay){var r=t/e;this.player.template.fakeBar.style.width="".concat(this.calcWidth(r),"%")}}},{key:"hermesV2",value:function(){var t=this;this.player.on("play",(function(){t.shouldSendData()&&(t.player.analytics.hermesV2.event("fakebar",{alpha:t.chosenAlpha}),t.analyticsSent=!0)}))}},{key:"shouldSendData",value:function(){return this.player&&this.player.analytics&&this.player.analytics.hermesV2&&!this.player.options.preview&&!this.analyticsSent}},{key:"getVersion",value:function(){return O.isNil(this.alphaAutoTest)||this.alphaAutoTest&&O.isNil(this.fakeBarTestAlphas)?1:2}},{key:"version2Alpha",value:function(){if(this.alphaAutoTest){var t=this.fakeBarTestAlphas||[];this.player.options.fake_bar&&t.length>0&&(this.chosenAlpha=this.loadAlpha(t))}else this.chosenAlpha=this.alpha?this.alpha:2}}])&&Kt(e.prototype,r),a&&Kt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zt(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Jt=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.isIframe=!!document.querySelector('meta[name="vturb-iframe"]'),this.lastScrollPosition={left:0,top:0},this.player.events.on("webfullscreen",(function(){r.player.resize()})),this.player.events.on("webfullscreen_cancel",(function(){r.player.resize(),O.setScrollPosition(r.lastScrollPosition)}));var a=function(){r.player.resize(),r.isFullScreen("browser")?r.player.events.trigger("fullscreen"):(O.setScrollPosition(r.lastScrollPosition),r.player.events.trigger("fullscreen_cancel"),r.returnPosition())},n=function(){var t=document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t&&t!==r.player.container||(r.player.resize(),t?r.player.events.trigger("fullscreen"):(O.setScrollPosition(r.lastScrollPosition),r.player.events.trigger("fullscreen_cancel"),r.returnPosition()))};/Firefox/.test(navigator.userAgent)?(document.addEventListener("mozfullscreenchange",n),document.addEventListener("fullscreenchange",n)):(this.player.container.addEventListener("fullscreenchange",a),this.player.container.addEventListener("webkitfullscreenchange",a),document.addEventListener("msfullscreenchange",n),document.addEventListener("MSFullscreenChange",n))}var e,r,a;return e=t,(r=[{key:"isFullScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";switch(t){case"browser":return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;case"web":return this.player.container.classList.contains("smartplayer-fulled")}}},{key:"canDoFullscreenOnContent",value:function(){return this.player.container.requestFullscreen||this.player.container.mozRequestFullScreen||this.player.container.webkitRequestFullscreen||this.player.container.msRequestFullscreen}},{key:"requestFullscreenBrowser",value:function(){this.player.container.requestFullscreen?this.player.container.requestFullscreen():this.player.container.mozRequestFullScreen?this.player.container.mozRequestFullScreen():this.player.container.webkitRequestFullscreen?this.player.container.webkitRequestFullscreen():this.player.container.msRequestFullscreen?this.player.container.msRequestFullscreen():this.player.video.webkitEnterFullscreen?this.player.video.webkitEnterFullscreen():this.player.video.webkitEnterFullScreen&&this.player.video.webkitEnterFullScreen()}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";if("web"==t&&this.canDoFullscreenOnContent()&&(t="browser"),this.player.options.displays.fullscreen){var e="browser"===t?"web":"browser",r=this.isFullScreen(e);switch(r||(this.lastScrollPosition=O.getScrollPosition()),this.nextSibling=this.player.container.nextElementSibling,this.parentElement=this.player.container.parentElement,document.body.appendChild(this.player.container),t){case"browser":this.requestFullscreenBrowser();break;case"web":this.isIframe&&this.requestFullscreenBrowser(),this.player.container.classList.add("smartplayer-fulled"),document.body.classList.add("smartplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen")}r&&this.cancel(e)}}},{key:"returnPosition",value:function(){this.parentElement&&(this.nextSibling?this.parentElement.insertBefore(this.player.container,this.nextSibling):this.parentElement.appendChild(this.player.container),this.parentElement=null)}},{key:"cancel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";switch(this.returnPosition(),t){case"browser":document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.msCancelFullScreen?document.msCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();break;case"web":this.player.container.classList.remove("smartplayer-fulled"),document.body.classList.remove("smartplayer-web-fullscreen-fix"),this.player.events.trigger("webfullscreen_cancel")}}},{key:"cancelAll",value:function(){this.isFullScreen("browser")&&this.cancel("browser"),this.isFullScreen("web")&&this.cancel("web")}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"browser";this.isFullScreen("browser")?this.cancel("browser"):this.isFullScreen("web")?this.cancel("web"):this.request(t)}}])&&Zt(e.prototype,r),a&&Zt(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function $t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function te(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ee=function(){function t(e){var r,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.localStorage=Vt,this.timeOutDelay=100,this.player.options.headline_number=this.chooseHeadline(this.player.options.headlines),this.headline_data=this.getHeadlineData();var n=(null==e||null===(r=e.analytics)||void 0===r||null===(a=r.hermesV2)||void 0===a?void 0:a.session_id)||O.currentSession(e);this.storageKey="headlines_".concat(this.player.options.id),"none"!==this.headline_data.name&&(this.headline=this.insertHeadline(this.player.options)),this.options={player_id:this.player.options.id,session_id:n,headline_number:this.player.options.headline_number},this.player.options.preview||(this.startMonitoring(),this.events())}var e,r,a;return e=t,a=[{key:"filterHeadlines",value:function(t){return t.filter((function(t){return t.active}))}},{key:"shouldLoadHeadline",value:function(e){return!!e.headline&&!!e.headlines&&!!t.filterHeadlines(e.headlines).length}},{key:"mountHTMLStyleTag",value:function(t){var e=document.createElement("style");return e.textContent="".concat(t.typography.embed_link?"@import url(".concat(t.typography.embed_link,");"):"","#").concat(t.id," {font-size: 18px;@media (max-width: 768px) {font-size: 14px;}}#").concat(t.id," * {margin: 0;padding: 0;}").concat(t.custom_css,""),e}}],(r=[{key:"startMonitoring",value:function(){this.localStorage.getItem(this.storageKey)||this.localStorage.setItem(this.storageKey,JSON.stringify({viewed:0,clicked:0}))}},{key:"getHeadlinesStorage",value:function(){return this.localStorage.getItem(this.storageKey)?JSON.parse(this.localStorage.getItem(this.storageKey)):{viewed:0,clicked:0,number:null}}},{key:"storeHeadlineViewData",value:function(t){t.viewed=1,this.localStorage.setItem(this.storageKey,JSON.stringify(t))}},{key:"storeHeadlineClickData",value:function(t){t.clicked=1,this.localStorage.setItem(this.storageKey,JSON.stringify(t))}},{key:"storeHeadlineNumberData",value:function(t){var e=this.getHeadlinesStorage();e.number=t,this.localStorage.setItem(this.storageKey,JSON.stringify(e))}},{key:"events",value:function(){this.hermesV2("headlineview",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qt(Object(r),!0).forEach((function(e){$t(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({clicked:0},this.options))}},{key:"chooseHeadline",value:function(e){var r=this.getHeadlinesStorage(),a=t.filterHeadlines(e);if(void 0!==r.number&&a.find((function(t){return t.number===r.number})))return r.number;var n=O.chooseRandomEntry(a,"number",0);return this.storeHeadlineNumberData(n),n}},{key:"addIframeEvents",value:function(t){var e=this;t&&(this.player.events.on("mounted",(function(){window.parent.postMessage({type:"smartplayer",event:"buildHeadlines",headline:e.headline_data,id:e.player.options.id},"*")})),window.addEventListener("message",(function(r){var a=r.data;"smartplayer"===a.type&&a.id===e.player.options.id&&"clearHeadlines"===a.event&&t.remove()})))}},{key:"insertHeadline",value:function(e){if(!(e.headline_number<=0)){var r=document.createElement("div");this.addIframeEvents(r),this.setHeadlineElInitialAttributes(r);var a=this.headline_data&&"html"===this.headline_data.kind?"html":"image";if("image"===a){var n=document.createElement("img");this.setImageAttributes(n),this.addImageEvents(r,n),r.appendChild(n)}if("html"===a){var i=document.createElement("div");i.innerHTML=this.headline_data.custom_html,this.headline_data.layout&&(i.style.width="".concat(this.headline_data.layout.width,"%"),i.style.margin="".concat(this.headline_data.layout.margin.values.map((function(t){return"".concat(t,"px")})).join(" "))),this.headline_data.typography&&(i.style.fontFamily="".concat(this.headline_data.typography.family),i.style.fontSize="".concat(this.headline_data.typography.size/18,"em"),i.style.letterSpacing="".concat(this.headline_data.typography.letter_spacing,"px"),i.style.lineHeight="".concat(this.headline_data.typography.line_height,"%")),i.style.textAlign="left",r.appendChild(i),r.appendChild(t.mountHTMLStyleTag(this.headline_data)),r.style.margin="0 auto",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.width="fit-content"}return e.container.parentElement.insertBefore(r,e.container),r}}},{key:"setHeadlineElAttributes",value:function(t){t.setAttribute("style","text-align:center;margin-bottom:30px;width: 100%;")}},{key:"setHeadlineElInitialAttributes",value:function(t){t.setAttribute("style","text-align:center;margin-bottom:30px;"),t.id=this.headline_data.id,t.classList.add("smartplayer-headline")}},{key:"addImageEvents",value:function(t,e){var r=this;e.addEventListener("load",(function(){r.setHeadlineElAttributes(t)}))}},{key:"setImageAttributes",value:function(t){if(this.headline_data.is_responsive&&O.isMobile)t.setAttribute("src",this.headline_data.url_mobile);else{var e=this.headline_data.url_desktop||this.headline_data.url_mobile;t.setAttribute("src",e)}t.setAttribute("style","background-color: transparent;max-width: 100%;"),t.id="vturb-headline-image"}},{key:"getHeadlineData",value:function(){var t,e=this;return(t=this.player.options.headlines.find((function(t){return t.number===e.player.options.headline_number})))||(t=this.player.options.headlines[0]),t}},{key:"hermesV2",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.player&&this.player.analytics&&this.player.analytics.hermesV2&&this.player.analytics.hermesV2.event(t,e,!0)}}])&&te(e.prototype,r),a&&te(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(r),!0).forEach((function(e){se(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function se(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oe=ie({},window.innerWidth<600?{maxBufferSize:5e6,maxBufferLength:16,maxMaxBufferLength:16,startLevel:0}:{maxBufferSize:1e7,maxBufferLength:32,maxMaxBufferLength:32,startLevel:0});var le=function(){function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";re(this,t),this.hls=null,this.video=e,this.player=r,this.options=ie(ie({},oe),a),this.resolutions=[],this.video_src="string"==typeof n&&n.trim()?n:this.player.options.video.url,this.optionsSmartAutoPlay=ie(ie({},this.options),{},{maxBufferLength:8,maxMaxBufferLength:8}),window.Hls&&window.Hls.isSupported()?this.init():this.video.src=this.video_src}var e,r,a;return e=t,(r=[{key:"init",value:function(){var t=this;"smartplay"===this.player.options.autoplay?(this.hls=new window.Hls(this.optionsSmartAutoPlay),this.player.on("smartplay_play",(function(){t.hls.config.maxBufferLength=t.options.maxBufferLength,t.hls.config.maxMaxBufferLength=t.options.maxMaxBufferLength}))):this.hls=new window.Hls(this.options),this.player.plugins.hls=this.hls,this.player.on("online",(function(){t.hls.startLoad()})),this.player.on("destroy",(function(){t.hls.destroy(),delete t.player.plugins.hls})),this.hls.on(window.Hls.Events.MANIFEST_PARSED,(function(e,r){var a=r.levels;O.isMobile?(t.resolutions=a,t.hls.autoLevelCapping=t.getLevelfromVideoWidth()):t.hls.autoLevelCapping=-1})),this.hls.on(window.Hls.Events.FRAG_BUFFERED,(function(){setTimeout((function(){t.player.events.trigger("fragmentbuffered")}),25)})),this.hls.loadSource(this.video_src),this.hls.attachMedia(this.video)}},{key:"getLevelfromVideoWidth",value:function(){var t=this.player.container.getBoundingClientRect().width;return this.resolutions.map((function(e,r){var a=e.width,n=parseFloat(t)/parseFloat(a);return[e,n>=1?n-1:-1*(n-1),r,a,t,n]})).sort((function(t,e){return t[1]-e[1]}))[0][2]}}])&&ae(e.prototype,r),a&&ae(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ce(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ue,de,he,pe=(ue=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.options.hotkey&&document.addEventListener("keydown",(function(t){if(e.focus){var r=document.activeElement.tagName.toUpperCase(),a=document.activeElement.getAttribute("contenteditable");if("INPUT"!==r&&"TEXTAREA"!==r&&""!==a&&"true"!==a){var n=t||window.event;switch(n.keyCode){case 32:case 37:case 39:case 38:case 40:n.preventDefault()}}}})),document.addEventListener("keydown",(function(t){switch((t||window.event).keyCode){case 27:e.fullScreen.isFullScreen("web")&&e.fullScreen.cancel("web")}}))},de&&ce(ue.prototype,de),he&&ce(ue,he),Object.defineProperty(ue,"prototype",{writable:!1}),ue);var fe={en:{menu_v_1:"menu_v_1_en",powered_by_vturb:"Powered by VTurb",utmc_powered_by_vturb:"utmc_powered_by_vturb",license_error_401:"Unable to display video!",license_error_403:"Video temporarily unavailable\ncheck your panel",license_error_406:"This domain is not on the allowed domains list! Update the domain settings in the panel.",license_error_451:"This domain has been blocked indefinitely. Contact support to learn more."},"pt-br":{menu_v_1:"menu_v_1_pt-br",powered_by_vturb:"Feito com VTurb",utmc_powered_by_vturb:"feito_com_vturb",license_error_401:"Não foi possível exibir o vídeo!",license_error_403:"Vídeo temporariamente indisponível\nverifique seu painel",license_error_406:"Este domínio não está na lista de domínios permitidos! Atualize as configurações de domínios no painel.",license_error_451:"Esse domínio foi bloqueado por tempo indeterminado. Contate o suporte para saber mais."},es:{menu_v_1:"menu_v_1_es",powered_by_vturb:"Powered by VTurb",utmc_powered_by_vturb:"powered_by_vturb_es",license_error_401:"¡No se pudo mostrar el video!",license_error_403:"Video temporalmente no disponible\nverifica tu panel",license_error_406:"¡Este dominio no está en la lista de dominios permitidos! Actualiza la configuración de dominios en el panel.",license_error_451:"Este dominio ha sido bloqueado indefinidamente. Contacta al soporte para obtener más información."},"zh-cn":{Top:"顶部",Bottom:"底部",Rolling:"滚动","About author":"关于作者","SmartPlayer feedback":"播放器意见反馈","About SmartPlayer":"关于 SmartPlayer 播放器",Loop:"洗脑循环",Speed:"速度",Normal:"正常","Video load failed":"视频加载失败","Switching to":"正在切换至","Switched to":"已经切换至",quality:"画质",FF:"快进",REW:"快退",Setting:"设置","Full screen":"全屏","Web full screen":"页面全屏",Send:"发送",Screenshot:"截图",AirPlay:"无线投屏",s:"秒","Show subtitle":"显示字幕","Hide subtitle":"隐藏字幕",Volume:"音量",Live:"直播","Video info":"视频统计信息",license_error_401:"无法显示视频！",license_error_403:"视频暂时不可用\n请检查您的控制面板",license_error_406:"此域名不在允许的域名列表中！请在控制面板中更新域名设置。",license_error_451:"此域名已被无限期封禁。请联系技术支持了解更多信息。"},"zh-tw":{Top:"頂部",Bottom:"底部",Rolling:"滾動","About author":"關於作者","SmartPlayer feedback":"播放器意見回饋","About SmartPlayer":"關於 SmartPlayer 播放器",Loop:"循環播放",Speed:"速度",Normal:"正常","Video load failed":"影片載入失敗","Switching to":"正在切換至","Switched to":"已經切換至",quality:"畫質",FF:"快進",REW:"快退",Setting:"設定","Full screen":"全螢幕","Web full screen":"頁面全螢幕",Send:"發送",Screenshot:"截圖",AirPlay:"無線投屏",s:"秒","Show subtitle":"顯示字幕","Hide subtitle":"隱藏字幕",Volume:"音量",Live:"直播","Video info":"影片統計訊息",license_error_401:"無法顯示影片！",license_error_403:"影片暫時不可用\n請檢查您的控制面板",license_error_406:"此網域不在允許的網域清單中！請在控制面板中更新網域設定。",license_error_451:"此網域已被無限期封鎖。請聯絡技術支援了解更多資訊。"}},me=function(t){var e=this;this.lang=t||"undefined"!=typeof navigator&&(navigator.language||navigator.userLanguage)||"en",this.tran=function(t){var r=function(t){return/^pt(-\w{,2})?/.test(t)?"pt-br":/^es(-\w{,2})?/.test(t)?"es":/^zh-ch/.test(t)?"zh-ch":/^zh-tw/.test(t)?"zh-tw":"en"}(e.lang);return fe[r]&&fe[r][t]?fe[r][t]:t}};function ye(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ve=function(t,e,r){return e&&ye(t.prototype,e),r&&ye(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.player.options.video.pic_finish&&(this.player.on("ended",(function(){r.player.actionAfterFinish.inLoop||r.player.container.classList.add("smartplayer-finished")})),this.player.on("play",(function(){r.player.container.classList.contains("smartplayer-finished")&&r.player.container.classList.remove("smartplayer-finished")}))),this.player.template.imageController&&this.player.template.imageController.addEventListener("click",(function(){O.isMobile||r.player.toggle()})),this.player.options.video.pic){var a=new Image;a.onload=function(){return r.player.template.imageStart.classList.remove("smartplayer-opacity-0")},a.src=this.player.options.video.pic}}));function ge(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var be=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.template.infoPanel,this.template=e.template,this.video=e.video,this.player=e,this.template.infoPanelClose.addEventListener("click",(function(){r.hide()}))}return function(t,e,r){e&&ge(t.prototype,e),r&&ge(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"show",value:function(){this.beginTime=Date.now(),this.update(),this.player.timer.enable("info"),this.player.timer.enable("fps"),this.container.classList.remove("smartplayer-info-panel-hide")}},{key:"hide",value:function(){this.player.timer.disable("info"),this.player.timer.disable("fps"),this.container.classList.add("smartplayer-info-panel-hide")}},{key:"triggle",value:function(){this.container.classList.contains("smartplayer-info-panel-hide")?this.show():this.hide()}},{key:"update",value:function(){this.template.infoVersion.innerHTML="v".concat("1.35.1"," ").concat(GIT_HASH),this.template.infoType.innerHTML=this.player.type,this.template.infoUrl.innerHTML=this.player.options.video.url,this.template.infoResolution.innerHTML="".concat(this.player.video.videoWidth," x ").concat(this.player.video.videoHeight),this.template.infoDuration.innerHTML=this.player.video.duration}},{key:"fps",value:function(t){this.template.infoFPS.innerHTML="".concat(t.toFixed(1))}}]),t}();function we(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ke=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.isOffline=!1,this.timeoutPromise=null,this.init()}return function(t,e,r){e&&we(t.prototype,e),r&&we(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"init",value:function(){var t=this;window.addEventListener("offline",(function(){t.isOffline=!0})),window.addEventListener("online",(function(){t.setOnline(),t.isOffline=!1})),this.player.on("startLoading",(function(){t.isOffline&&t.setOffline()}))}},{key:"setOffline",value:function(){var t=this;this.timeoutPromise&&clearTimeout(this.timeoutPromise),this.timeoutPromise=setTimeout((function(){t.player.container.classList.add("smartplayer-offline"),t.player.events.trigger("offline")}),5e3)}},{key:"setOnline",value:function(){this.timeoutPromise&&clearTimeout(this.timeoutPromise),this.player.container.classList.remove("smartplayer-offline"),this.player.events.trigger("online")}}]),t}();function Te(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var xe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.facebookContinousProgressRange=5,this.pixels=e.options.pixels||[],this.pixels.length&&this.setEvents(),this.initGooglePixel()}return function(t,e,r){e&&Te(t.prototype,e),r&&Te(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"setEvents",value:function(){var t=this;this.pixels.forEach((function(e){e.caller=function(){return!(t.player.smartAutoPlay||t.player.inResume)&&t.checkPixel(e)},t.player.on("timeupdate",e.caller)}))}},{key:"checkPixel",value:function(t){var e=this.player.video.currentTime;"facebook"==t.type&&this.facebookContinousProgress(t,e);var r="facebook"===t.type&&!t.dispatch;if(!t.called&&!r)switch(t.dispatch_type){case"time":t.dispatch_in==parseInt(e)&&(t.called=!0,this.exec(t));break;case"percent":t.dispatch_in==this.currentVideoPercent()&&(t.called=!0,this.exec(t));break;default:console.error("Type is not defined!")}}},{key:"exec",value:function(t){try{switch(t.type){case"facebook":return this.execFacebook(t);case"google":return this.execGoogle(t);case"custom":return this.execCustom(t);default:console.error("Type is not defined!")}}catch(t){console.error(t)}}},{key:"execFacebook",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window.fbq&&"function"==typeof window.fbq||this.initFbPixel(),window.fbq("trackSingleCustom",t.pixel_id,e||t.pixel_value)}},{key:"initFbPixel",value:function(){var t,e,r,a,n,i;t=window,e=document,r="script",t.fbq||(a=t.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},t._fbq||(t._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],(n=e.createElement(r)).async=!0,n.src="https://connect.facebook.net/en_US/fbevents.js",(i=e.getElementsByTagName(r)[0]).parentNode.insertBefore(n,i)),this.pixels.forEach((function(t){"facebook"===t.type&&window.fbq("init",t.pixel_id)})),window.fbq("track","PageView")}},{key:"initGooglePixel",value:function(){var t=window.gtag&&"function"==typeof window.gtag,e=window.dataLayer&&"function"==typeof window.dataLayer.push;t||e||(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),this.pixels.forEach((function(t){"google"===t.type&&(window.dataLayer.find((function(e){return e&&e.config&&e.config.send_to===t.pixel_id}))||(window.gtag("config",t.pixel_id),document.head.innerHTML+='<script async src="https://www.googletagmanager.com/gtag/js?id='.concat(t.pixel_id,'"><\/script>')))})))}},{key:"execGoogle",value:function(t){if(this.player.off("timeupdate",t.caller),window.gtag&&"function"==typeof window.gtag)return window.gtag("event","conversion",{send_to:"".concat(t.pixel_id,"/").concat(t.pixel_value)});!function(){window.dataLayer.push(arguments)}("event","conversion",{send_to:"".concat(t.pixel_id,"/").concat(t.pixel_value)})}},{key:"execCustom",value:function(t){if(this.player.off("timeupdate",t.caller),t.custom_html){var e=document.createRange().createContextualFragment(t.custom_html);document.body.appendChild(e)}}},{key:"facebookContinousProgress",value:function(t){var e=this.currentVideoPercent();e%this.facebookContinousProgressRange!=0||t["percent".concat(e)]||(t["percent".concat(e)]=!0,this.execFacebook(t,"View".concat(e,"%")))}},{key:"currentVideoPercent",value:function(){return parseInt(this.player.video.currentTime/this.player.video.duration*100)}}]),t}();function Ee(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Se=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.options.displays.settings&&(this.player=e,this.player.template.mask.addEventListener("click",(function(){r.hide()})),this.player.template.settingButton.addEventListener("click",(function(){r.show()})),this.loop=this.player.options.loop,this.player.template.loopToggle.checked=this.loop,this.player.template.loop.addEventListener("click",(function(){r.player.template.loopToggle.checked=!r.player.template.loopToggle.checked,r.player.template.loopToggle.checked?r.loop=!0:r.loop=!1,r.hide()})))}return function(t,e,r){e&&Ee(t.prototype,e),r&&Ee(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"hide",value:function(){var t=this;this.player&&(this.player.template.settingBox&&this.player.template.settingBox.classList.remove("smartplayer-setting-box-open"),this.player.template.mask.classList.remove("smartplayer-mask-show"),setTimeout((function(){t.player.template.settingBox&&t.player.template.settingBox.classList.remove("smartplayer-setting-box-narrow")}),300),this.player.controller.disableAutoHide=!1)}},{key:"show",value:function(){this.player.template.settingBox&&this.player.template.settingBox.classList.add("smartplayer-setting-box-open"),this.player.template.mask.classList.add("smartplayer-mask-show"),this.player.controller.disableAutoHide=!0}}]),t}();function _e(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Le=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.els=this.getElementsToScale(r)}return function(t,e,r){e&&_e(t.prototype,e),r&&_e(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"getElementsToScale",value:function(t){return this.player.container.getElementsByClassName(t)}},{key:"scaleElement",value:function(t,e){t.style.scale=e}},{key:"scale",value:function(){var t=this.player.container.clientWidth/this.player.options.video.width;this.scaleBy(t)}},{key:"scaleBy",value:function(t){var e=this;Array.prototype.forEach.call(this.els,(function(r){e.scaleElement(r,t)}))}}]),t}();function Ae(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Ce=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.els=this.getElementsToScale(r)}return function(t,e,r){e&&Ae(t.prototype,e),r&&Ae(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"getElementsToScale",value:function(t){var e=this.player.container.getElementsByClassName(t);return Array.prototype.map.call(e,(function(t){return{initX:parseInt(t.style.left,10),initY:parseInt(t.style.top,10),initW:parseInt(t.style.width),initH:parseInt(t.style.height),initFS:parseInt(t.style["font-size"]),initBR:parseInt(t.style["border-radius"]),initBW:parseInt(t.style["border-width"]),domEel:t}}))}},{key:"scaleElement",value:function(t,e){t.domEel.style.width="".concat(t.initW*e,"px"),t.domEel.style.height="".concat(t.initH*e,"px"),t.domEel.style["font-size"]="".concat(t.initFS*e,"px"),t.domEel.style["border-radius"]="".concat(t.initBR*e,"px"),t.domEel.style["border-width"]="".concat(t.initBW*e,"px"),this.repositionElement(t)}},{key:"repositionElement",value:function(t){var e=this.player.container.clientWidth/this.player.options.video.width;t.domEel.style.top="".concat(t.initY*e,"px"),t.domEel.style.left="".concat(t.initX*e,"px")}},{key:"scale",value:function(){var t=this;this.els.forEach((function(e){var r=t.player.container.clientWidth/t.player.options.video.width;t.scaleElement(e,r)}))}},{key:"scaleBy",value:function(t){this.els.forEach((function(e){e.domEel.style.width="".concat(parseInt(e.domEel.style.width)*t,"px"),e.domEel.style.height="".concat(parseInt(e.domEel.style.height)*t,"px"),e.domEel.style["font-size"]="".concat(parseInt(e.domEel.style["font-size"])*t,"px"),e.domEel.style["border-radius"]="".concat(parseInt(e.domEel.style["border-radius"])*t,"px"),e.domEel.style["border-width"]="".concat(parseInt(e.domEel.style["border-width"])*t,"px"),e.domEel.style.top="".concat(parseInt(e.domEel.style.top)-parseInt(e.domEel.style.height)*(t-1)/2,"px"),e.domEel.style.left="".concat(parseInt(e.domEel.style.left)-parseInt(e.domEel.style.width)*(t-1)/2,"px")}))}}]),t}();function Re(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ie(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function De(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Oe=function(){function t(e,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.width=this.player.options.video.width,this.height=this.player.options.video.height,this.limitValue=a,this.els=this.player.container.getElementsByClassName(r)}return function(t,e,r){e&&De(t.prototype,e),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"calculateScaleFactor",value:function(){var t=this,e=[];return Array.prototype.forEach.call(this.els,(function(r){var a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(r),!0).forEach((function(e){Ie(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},t.getBorderDistances(r)),n=t.getMaxAllowedHorizontalScale(r,a),i=t.getMaxAllowedVerticalScale(r,a);a.maxAllowedScale=Math.min(n,i),e.push(a)})),this.getMaxAllowedScaleFactor(e)}},{key:"getBorderDistances",value:function(t){var e={};return e.left=parseInt(t.style.left,10),e.top=parseInt(t.style.top,10),e.right=this.width-parseInt(t.style.left,10)-parseInt(t.style.width,10),e.bottom=this.height-parseInt(t.style.top,10)-parseInt(t.style.height,10),e}},{key:"getMaxAllowedHorizontalScale",value:function(t,e){return Math.min(e.left,e.right)/parseInt(t.style.width,10)*2}},{key:"getMaxAllowedVerticalScale",value:function(t,e){return Math.min(e.top,e.bottom)/parseInt(t.style.height,10)*2}},{key:"getMaxAllowedScaleFactor",value:function(t){var e=Math.min.apply(t,t.map((function(t){return t.maxAllowedScale})))+1;return e<1&&(e=1),e<this.limitValue&&(this.limitValue=e),this.limitValue}},{key:"getScaleFactor",value:function(){return this.calculateScaleFactor()}}]),t}();function Pe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Me(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(r),!0).forEach((function(e){Fe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Be(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.onSeek=this.onSeek.bind(this),this.click=this.click.bind(this),this.miniHooksContainer=this.player.template.miniHooksContainer,this.imagePreloadTime=60,this.fadeTime=800,this.hooks=this.getHooks(),this.useScale=O.canUseScale(),this.setEvents(),this.setScaler(),this.fadeTimeout=null}return function(t,e,r){e&&Be(t.prototype,e),r&&Be(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"setScaler",value:function(){this.useScale?(this.scaler=new Le(this.player,"smartplayer-elements-container"),this.autoplayScaler=new Le(this.player,"smartplayer-autoplay-element")):(this.scaler=new Ce(this.player,"smartplayer-smart-element"),this.autoplayScaler=new Ce(this.player,"smartplayer-autoplay-element"),this.miniHooksScaler=new Ce(this.player,"smartplayer-mini-hooks-container")),this.scale()}},{key:"scale",value:function(){this.scaler.scale(),this.useScale||this.miniHooksScaler.scale(),O.isMobile&&"mobile"!==this.player.options.device_type&&this.setMobileAutoplaySize()}},{key:"click",value:function(){this.player.smartAutoPlay?O.removeSmartPlay(this.player):this.player.toggle()}},{key:"setEvents",value:function(){var t=this;window.addEventListener("resize",(function(){t.scale()})),this.player.video.addEventListener("resize",(function(){t.scale()})),this.player.on("canplay",(function(){t.scale()})),this.miniHooksContainer&&this.miniHooksContainer.addEventListener("click",this.click),this.player.options.mini_hooks&&this.player.on("timeupdate",this.onSeek),new ResizeObserver((function(){return t.scale()})).observe(this.player.container)}},{key:"onSeek",value:function(){var t=this,e=this.player.video.currentTime;this.player.smartAutoPlay||this.player.inResume||this.hooks.forEach((function(r){new Promise((function(){t.checkHook(r,e)}))}))}},{key:"checkHook",value:function(t,e){var r=this;this.shouldLoadImage(t,e)?this.loadImage(t):!t.showed&&t.range&&t.range.start<e&&t.range.finish>e?this.showHook(t):t.showed&&t.range&&(t.range.start>e||t.range.finish<e)&&(this.fadeHook(t),this.fadeTimeout=setTimeout((function(){return r.hideHook(t)}),this.fadeTime))}},{key:"showHook",value:function(t){clearTimeout(this.fadeTimeout),t.showed=!0,t.el&&(t.el.style.display="block",t.el.classList.remove("smartplayer-fade-mini-hook-".concat(t.id)),t.el.classList.add("smartplayer-show-mini-hook-".concat(t.id)))}},{key:"loadImage",value:function(t){t.el&&(t.el.src=t.properties.src,t.el.alt=t.properties.alt)}},{key:"fadeHook",value:function(t){t.showed=!1,t.el&&(t.el.classList.remove("smartplayer-show-mini-hook-".concat(t.id)),t.el.classList.add("smartplayer-fade-mini-hook-".concat(t.id)))}},{key:"hideHook",value:function(t){t.el.style.display="none"}},{key:"getHooks",value:function(){return this.player.options.mini_hooks&&this.player.options.mini_hooks_elements?this.player.options.mini_hooks_elements.filter((function(t){return t.active})).map((function(t){var e=document.getElementById(t.id);return Me(Me({},t),{},{el:e,showed:!1})})):[]}},{key:"shouldLoadImage",value:function(t,e){return!t.showed&&t.range&&t.range.start-this.imagePreloadTime<e&&"image"===t.type&&t.el&&!t.el.src}},{key:"setMobileAutoplaySize",value:function(){var t=new Oe(this.player,"smartplayer-autoplay-element",1.3).getScaleFactor();this.autoplayScaler.scaleBy(t)}}]),t}();function Ue(t){return function(t){if(Array.isArray(t))return je(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return je(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function Ve(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var He=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.initializeProperties(),this.handleSpeedCodeDetection()}return function(t,e,r){e&&Ve(t.prototype,e),r&&Ve(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"initializeProperties",value:function(){this.result={},this.preloadAndDnsPrefetchLinks=this._getPreloadAndDnsPrefetchLinks(),this.accountId=this.player.options.accountId,this.playerId=this.player.options.id,this.videoId=this.player.options.videoId,this.isIframe=!!document.querySelector('meta[name="vturb-iframe"]')}},{key:"_getPreloadAndDnsPrefetchLinks",value:function(){var t=Array.from(document.head.getElementsByTagName("link")),e=t.filter((function(t){return"preload"===t.rel})),r=t.filter((function(t){return"dns-prefetch"===t.rel}));return[].concat(Ue(e),Ue(r))}},{key:"handleSpeedCodeDetection",value:function(){this.isIframe?this._setupIframeHandling():this._handleDirectSpeedCodeDetection()}},{key:"_setupIframeHandling",value:function(){this._listenToParentMessages(),this._triggerParentMessage()}},{key:"_handleDirectSpeedCodeDetection",value:function(){this._detectSpeedCode(),this.result.iframe=0,this.sendPlayerSpeedCodeInfo()}},{key:"_detectSpeedCode",value:function(){this._checkSpeedCodePresence(),this._checkAbTestStatus(),this._verifySpeedCodeCorrectness()}},{key:"_checkSpeedCodePresence",value:function(){var t=["https://scripts.converteai.net","https://images.converteai.net","https://cdn.converteai.net","https://api.vturb.com"],e=this.preloadAndDnsPrefetchLinks.some((function(e){var r=e.href||"";return t.some((function(t){return r.includes(t)}))}));this.result.present=e?1:0}},{key:"_checkAbTestStatus",value:function(){var t=this.preloadAndDnsPrefetchLinks.some((function(t){return t.href.includes("ab-test")}));this.result.initializer=t?"ab-test":"player"}},{key:"_verifySpeedCodeCorrectness",value:function(){1===this.result.present&&"ab-test"===this.result.initializer?this._verifyAbTestSpeedCode():1===this.result.present&&"player"===this.result.initializer?this._verifyPlayerSpeedCode():this.result.correct=0}},{key:"_verifyAbTestSpeedCode",value:function(){var t=["https://scripts.converteai.net/".concat(this.accountId,"/ab-test"),"https://scripts.converteai.net/lib/js/smartplayer/v1/smartplayer.min.js","https://cdn.converteai.net","https://scripts.converteai.net","https://images.converteai.net","https://api.vturb.com.br"];this.result.correct=this._areAllLinksPresent(t)?1:0}},{key:"_verifyPlayerSpeedCode",value:function(){var t=["https://scripts.converteai.net/".concat(this.accountId,"/players/").concat(this.playerId,"/player.js"),"https://scripts.converteai.net/lib/js/smartplayer/v1/smartplayer.min.js","https://images.converteai.net/".concat(this.accountId,"/players/").concat(this.playerId,"/thumbnail.jpg"),"https://cdn.converteai.net/".concat(this.accountId,"/").concat(this.videoId,"/main.m3u8"),"https://cdn.converteai.net","https://scripts.converteai.net","https://images.converteai.net","https://api.vturb.com.br"];this.result.correct=this._areAllLinksPresent(t)?1:0}},{key:"_areAllLinksPresent",value:function(t){var e=this;return t.every((function(t){return e.preloadAndDnsPrefetchLinks.some((function(e){return(e.href||"").includes(t)}))}))}},{key:"_triggerParentMessage",value:function(){var t=this;this.player.events.on("mounted",(function(){window.parent.postMessage({id:t.player.options.id,type:"smartplayer",event:"speedCodeDetection",data:{accountId:t.accountId,playerId:t.playerId,videoId:t.videoId}},"*")}))}},{key:"_listenToParentMessages",value:function(){var t=this;window.addEventListener("message",(function(e){var r=e.data;"smartplayer"===r.type&&r.id===t.player.options.id&&"sendSpeedCodeInfo"===r.event&&r.result&&t._sendAnalytics("speed_code",r.result)}))}},{key:"sendPlayerSpeedCodeInfo",value:function(){this._sendAnalytics("speed_code",this.result)}},{key:"_sendAnalytics",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.player&&this.player.analytics&&this.player.analytics.hermesV2&&this.player.analytics.hermesV2.event(t,e,!0)}}]),t}();function Ge(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ze=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.forceAutoPlayTimeout=null,this.player=e,this.player.smartAutoPlay=!0,this.times=0,this.smartplay_options=e.options.smartplay_options,this.smartplay_options.start_at=this.smartplay_options.start_at||0,this.smartplay_options.end_at=this.smartplay_options.end_at||0,this.frame_duration=.075,this.hasLoopByDefault=!!this.player.video.getAttribute("loop"),this.hasCustomPreview=this.smartplay_options.custom_preview&&this.smartplay_options.custom_preview.video_url,this.isCustomPreviewVisible=!1,this.muted=this.muted.bind(this),this.removeSmartPlay=this.removeSmartPlay.bind(this),this.forceAutoPlay=this.forceAutoPlay.bind(this),this.customAutoPlayTimeEvent=this.customAutoPlayTimeEvent.bind(this),this.clearEvents=this.clearEvents.bind(this),this.init(),this.usedOpacity=!1,this.customPreview(),this.usedOpacity||(this.player.container.style.opacity=1),this.player.video.setAttribute("loop","loop"),this.player.template.smartPlay.addEventListener("click",this.removeSmartPlay),this.player.container.classList.add("smartplayer-show-smart-auto-play"),this.player.on("loadeddata",(function(){r.player.video.setAttribute("autoplay","autoplay")}))}return function(t,e,r){e&&Ge(t.prototype,e),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"isActive",get:function(){return this.player.smartAutoPlay}},{key:"startAutoPlayEvents",value:function(){if(!this.isActive)return this.clearEvents();this.customAutoPlayRange()}},{key:"clearEvents",value:function(){this.forceAutoPlayTimeout&&clearTimeout(this.forceAutoPlayTimeout),this.disableCustomPreview(),this.player.off("timeupdate",this.customAutoPlayTimeEvent),this.hasLoopByDefault||this.player.video.removeAttribute("loop"),this.player.video.muted&&this.player.volume(100)}},{key:"forceAutoPlay",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.player.video.paused&&this.isActive){var r=this.player.video.duration;isNaN(r)&&(r=30),e>=r&&(e=0),this.player.video.currentTime>.01&&this.player.template.imageStart.classList.add("smartplayer-opacity-0"),this.forceAutoPlayTimeout=setTimeout((function(){t.player.seek(e+t.frame_duration),t.forceAutoPlay(e+t.frame_duration)}),60)}}},{key:"muted",value:function(){var t=this,e=this.player.video.muted;this.player.video.muted="muted";return o.a.resolve(this.player.video.play()).then((function(){return t.startAutoPlayEvents()})).catch((function(){t.player.video.muted=e,t.times<5?setTimeout((function(){t.player.video.currentTime<=.01&&t.init()}),50):(t.startAutoPlayEvents(),t.forceAutoPlay(t.smartplay_options.start_at))}))}},{key:"removeSmartPlay",value:function(){this.clearEvents(),this.player.volume(0),O.removeSmartPlay(this.player)}},{key:"customAutoPlayTimeEvent",value:function(){this.isActive&&this.player.video.currentTime>=this.smartplay_options.end_at&&(this.forceAutoPlayTimeout?(clearTimeout(this.forceAutoPlayTimeout),this.forceAutoPlay(this.smartplay_options.start_at)):this.player.seek(this.smartplay_options.start_at))}},{key:"customAutoPlayRange",value:function(){this.isActive&&null!==this.smartplay_options.end_at&&0!==this.smartplay_options.end_at&&(this.player.seek(this.smartplay_options.start_at),this.player.on("timeupdate",this.customAutoPlayTimeEvent))}},{key:"disableCustomPreview",value:function(){this.hasCustomPreview&&this.isCustomPreviewVisible&&(this.isCustomPreviewVisible=!1,this.player.switchVideo(this.player.options.video.url))}},{key:"customPreview",value:function(){var t=this;this.isActive&&this.hasCustomPreview&&!this.isCustomPreviewVisible&&(this.usedOpacity=!0,this.isCustomPreviewVisible=!0,this.player.switchVideo(this.smartplay_options.custom_preview.video_url),this.player.events.on("fragmentbuffered",(function(){t.player.container.style.opacity=1})))}},{key:"init",value:function(){if(this.times+=1,this.player.options.preview)return this.muted();!0!==this.player.video.muted&&"muted"!==this.player.video.muted?o.a.resolve(this.player.video.play()).then(this.removeSmartPlay).catch(this.muted):this.player.video.play()}}]),t}();function Ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function qe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(r),!0).forEach((function(e){We(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function We(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ke(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Xe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.options=e.options,this.analytics=e.analytics,this.localStorage=Vt,this.sessionId="",e&&e.analytics&&e.analytics.hermesV2&&e.analytics.hermesV2.session_id?this.sessionId=e.analytics.hermesV2.session_id:this.sessionId=O.currentSession(e),this.storageKey="smartplay_".concat(this.options.id,"_").concat(this.sessionId),this.localStorage.cleanupOldSessions("smartplay_".concat(this.options.id,"_"),this.storageKey)}return function(t,e,r){e&&Ke(t.prototype,e),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"chooseRandomEntry",value:function(t){var e=O.chooseRandomEntry(t,"",void 0);if(!e)return 0;var r=JSON.stringify({autoplay_number:e.number});return this.localStorage.setItem(this.storageKey,r),e.number}},{key:"number_exists",value:function(t){return!!this.options.smart_autoplays&&this.options.smart_autoplays.some((function(e){return e.number===t}))}},{key:"load_autoplay_number",value:function(t){try{var e=this.localStorage.getItem(this.storageKey);if(!e)return this.chooseRandomEntry(t);var r=JSON.parse(e);return r&&!O.isNil(r.autoplay_number)&&this.number_exists(r.autoplay_number)?r.autoplay_number:this.chooseRandomEntry(t)}catch(e){return this.chooseRandomEntry(t)}}},{key:"mount",value:function(){if(this.options.smart_autoplays&&0!==this.options.smart_autoplays.length){var t=this.options.smart_autoplays.map((function(t){return qe(qe({},t),{},{weight:t.weight||100})})),e=this.load_autoplay_number(t);this.options.smart_autoplay_selected=t.find((function(t){return t.number===e})),this.options.smart_autoplay_selected&&(this.options.smart_autoplay_elements=this.options.smart_autoplay_selected.elements,this.options.smartplay_options=qe(qe({},this.options.smartplay_options||{}),{},{animation:this.options.smart_autoplay_selected.animation,start_at:this.options.smart_autoplay_selected.video_start_at,end_at:this.options.smart_autoplay_selected.video_end_at,custom_preview:this.options.smart_autoplay_selected.custom_player_preview}),this.analytics.hermesV2.event("smartautoplayview",{company_id:this.options.accountId,player_id:this.options.id,device_id:this.analytics.hermesV2.deviceId,session_id:this.analytics.hermesV2.sessionId,autoplay_number:this.options.smart_autoplay_selected.number}))}}}]),t}();function Ze(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var Je=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shouldLoadSpeedControl(e)&&(this.player=e,this.addEvents(),this.player.on("canplay",(function(){return r.calculatePosition()})))}return function(t,e,r){e&&Ze(t.prototype,e),r&&Ze(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"shouldLoadSpeedControl",value:function(t){return t.options.displays.speed_control&&t.template.speedControlBox&&t.template.speedControlButton}},{key:"addEvents",value:function(){var t=this;this.player.template.speedControlBox.addEventListener("mouseleave",(function(){t.hide()})),this.player.template.speedControlButton.addEventListener("click",(function(){t.toggle()})),document.addEventListener("click",(function(e){var r=t.player.template.speedControlBox,a=t.player.template.speedControlButton,n=r.classList.contains("smartplayer-speed-control-box-open"),i=r.contains(e.target)||a.contains(e.target);n&&!i&&t.hide()}));for(var e=function(e){t.player.template.speedControlItem[e].addEventListener("click",(function(){t.player.template.speedControlDisplay.innerHTML="".concat(t.player.template.speedControlItem[e].dataset.speed,"X"),t.player.speed(t.player.template.speedControlItem[e].dataset.speed)}))},r=0;r<this.player.template.speedControlItem.length;r++)e(r)}},{key:"toggle",value:function(){this.player.template.speedControlBox.classList.contains("smartplayer-speed-control-box-open")?this.hide():this.show()}},{key:"hide",value:function(){var t=this;this.player&&(this.player.template.speedControlBox&&this.player.template.speedControlBox.classList.remove("smartplayer-speed-control-box-open"),setTimeout((function(){t.player.template.speedControlBox&&t.player.template.speedControlBox.classList.remove("smartplayer-speed-control-box-speed")}),300))}},{key:"show",value:function(){this.player.template.speedControlBox&&this.player.template.speedControlBox.classList.add("smartplayer-speed-control-box-open")}},{key:"calculatePosition",value:function(){(parseInt(getComputedStyle(this.player.template.speedControlBox).left,10)||0)<-20&&(this.player.template.speedControlBox.classList.remove("smartplayer-speed-control-box-to-left"),this.player.template.speedControlBox.classList.add("smartplayer-speed-control-box-to-right"))}}]),t}();function Qe(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var $e=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.template.subtitle,this.video=e.video,this.options=e.options.subtitle,this.events=e.events,this.player=e,this.currentCue=null,this.calculatedFontSize=this.options.font_size,this.fixed=!1,e.options&&e.options.displays){this.fixed=["backward","forward","volume","volume_bar","time","fullscreen","seekbar","seekbar_time","speed_control","subtitle_control"].every((function(t){return!e.options.displays[t]}))}window.addEventListener("resize",this.calculateSizesByVideoWidth.bind(this)),this.calculateSizesByVideoWidth(),this.init()}return function(t,e,r){e&&Qe(t.prototype,e),r&&Qe(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"calculateSizesByVideoWidth",value:function(){var t=this.player.options.video.width,e=Number(this.video.clientWidth)/Number(t)||1;e=Math.min(1.2,Math.max(.6,e)),this.calculatedFontSize="calc(".concat(this.options.font_size," * ").concat(e,")"),this.currentCue&&this.buildCue(this.currentCue),this.styleContainer()}},{key:"buildCue",value:function(t){var e=this;if(t){this.currentCue=t,this.container.innerHTML="";var r=document.createElement("div");r.appendChild(t.getCueAsHTML());var a=r.innerHTML.split(/\r?\n/).map((function(t){return e.styleText(t)})).join("");this.container.innerHTML=a}else this.container.innerHTML=""}},{key:"init",value:function(){var t=this;if(this.video.crossOrigin="anonymous",this.track=document.createElement("track"),this.track.kind="metadata",this.track.src=this.options.url,this.track.default=!0,this.video.appendChild(this.track),this.styleContainer(),this.options.show_by_default&&!this.player.smartAutoPlay&&this.video.addEventListener("loadedmetadata",(function(){var e=t.video.textTracks[0];if(e){var r=e.cues[0];r&&(r.startTime>.5||(t.buildCue(r),t.show()))}})),this.video.textTracks&&this.video.textTracks[0]){var e=this.video.textTracks[0];e.oncuechange=function(){var r=e.activeCues[0];t.buildCue(r),t.events.trigger("subtitle_change")}}}},{key:"show",value:function(){this.container.classList.remove("smartplayer-subtitle-hide"),this.events.trigger("subtitle_show")}},{key:"hide",value:function(){this.container.classList.add("smartplayer-subtitle-hide"),this.events.trigger("subtitle_hide")}},{key:"toggle",value:function(){this.container.classList.contains("smartplayer-subtitle-hide")?this.show():this.hide()}},{key:"styleContainer",value:function(){this.container.style.position="absolute",this.container.style.left="50%",this.container.style.transform="translateX(-50%)",this.container.style.textAlign=this.options.text_align,this.container.style.justifyContent={center:"center",left:"flex-start",right:"flex-end"}[this.options.text_align]||"center",this.container.style.maxWidth=this.video.clientWidth<768?"85%":"75%",this.fixed&&this.container.classList.add("smartplayer-subtitle-fixed")}},{key:"styleText",value:function(t){return'<p style="font-size: '.concat(this.calculatedFontSize,"; color: ").concat(this.options.color,"; background-color: ").concat(this.options.background_color,';">').concat(t,"</p>")}}]),t}(),tr=r(47),er=r.n(tr),rr=function(t){return t.fake_bar_options?{color:t.fake_bar_options.vbar_color||t.theme||"transparent"}:{}},ar=function(t){if(!t.smartplay_options)return"";var e=t.smartplay_options.animation;if(!e)return"";var r,a,n=["smartplayer-autoplay-element-animated"];return"pulse"===e.animation&&(n.push("element-pulse-animation"),r=e.properties,a=4/(r.speed||3),document.body.style.setProperty("--autoplay-pulse-speed","".concat(a,"s"))),n.join(" ")},nr=function(t){return{vbar:rr(t),className:{auto_play_animation:ar(t)}}};function ir(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var sr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e.container,this.options=e.options,this.index=e.index,this.tran=e.tran,this.init()}return function(t,e,r){e&&ir(t.prototype,e),r&&ir(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"init",value:function(){var t=er()({options:this.options,index:this.index,tran:this.tran,icons:Mt,mobile:O.isMobile,styles:nr(this.options),accountId:this.options.accountId,videoId:this.options.videoId,video:{current:!0,pic:this.options.video.pic,pic_pause:this.options.video.pic_pause,pic_finish:this.options.video.pic_finish,pic_background:this.options.video.pic_background,screenshot:this.options.screenshot,airplay:this.options.airplay,preload:this.options.preload,url:this.options.video.url,subtitle:this.options.subtitle,autoplay:this.options.autoplay,volume:this.options.volume}}),e=document.createElement("div");e.classList.add("smartplayer-content"),e.innerHTML=t,this.container.appendChild(e),this.container.id="smartplayer",this.volumeBar=this.container.querySelector(".smartplayer-volume-bar-inner"),this.volumeBarWrap=this.container.querySelector(".smartplayer-volume-bar"),this.volumeBarWrapWrap=this.container.querySelector(".smartplayer-volume-bar-wrap"),this.volumeButton=this.container.querySelector(".smartplayer-volume"),this.volumeButtonIcon=this.container.querySelector(".smartplayer-volume-icon"),this.volumeIcon=this.container.querySelector(".smartplayer-volume-icon .smartplayer-icon-content"),this.seekButtonRewind=this.container.querySelector(".smartplayer-seek-rewind-icon .smartplayer-icon-content"),this.seekButtonForward=this.container.querySelector(".smartplayer-seek-forward-icon .smartplayer-icon-content"),this.playedBar=this.container.querySelector(".smartplayer-played"),this.loadedBar=this.container.querySelector(".smartplayer-loaded"),this.playedBarWrap=this.container.querySelector(".smartplayer-bar-wrap"),this.playedBarTime=this.container.querySelector(".smartplayer-bar-time"),this.video=this.container.querySelector(".smartplayer-video-current"),this.bezel=this.container.querySelector(".smartplayer-bezel-icon"),this.playButton=this.container.querySelector(".smartplayer-play-icon"),this.mobilePlayButton=this.container.querySelector(".smartplayer-mobile-play"),this.videoWrap=this.container.querySelector(".smartplayer-video-wrap"),this.controllerMask=this.container.querySelector(".smartplayer-controller-mask"),this.ptime=this.container.querySelector(".smartplayer-ptime"),this.settingButton=this.container.querySelector(".smartplayer-setting-icon"),this.settingBox=this.container.querySelector(".smartplayer-setting-box"),this.speedControlButton=this.container.querySelector(".smartplayer-speed-control-display"),this.speedControlItem=this.container.querySelectorAll(".smartplayer-speed-control-item"),this.speedControlBox=this.container.querySelector(".smartplayer-speed-control-box"),this.speedControlDisplay=this.container.querySelector(".smartplayer-speed-control-display-content"),this.mask=this.container.querySelector(".smartplayer-mask"),this.loop=this.container.querySelector(".smartplayer-setting-loop"),this.loopToggle=this.container.querySelector(".smartplayer-setting-loop .smartplayer-toggle-setting-input"),this.dtime=this.container.querySelector(".smartplayer-dtime"),this.controller=this.container.querySelector(".smartplayer-controller"),this.commentInput=this.container.querySelector(".smartplayer-comment-input"),this.commentButton=this.container.querySelector(".smartplayer-comment-icon"),this.commentSettingBox=this.container.querySelector(".smartplayer-comment-setting-box"),this.commentSettingButton=this.container.querySelector(".smartplayer-comment-setting-icon"),this.commentSettingFill=this.container.querySelector(".smartplayer-comment-setting-icon path"),this.commentSendButton=this.container.querySelector(".smartplayer-send-icon"),this.commentSendFill=this.container.querySelector(".smartplayer-send-icon path"),this.commentColorSettingBox=this.container.querySelector(".smartplayer-comment-setting-color"),this.browserFullButton=this.container.querySelector(".smartplayer-full-icon"),this.webFullButton=this.container.querySelector(".smartplayer-full-in-icon"),this.menu=this.container.querySelector(".smartplayer-menu"),this.menuItem=this.container.querySelectorAll(".smartplayer-menu-item"),this.qualityList=this.container.querySelector(".smartplayer-quality-list"),this.camareButton=this.container.querySelector(".smartplayer-camera-icon"),this.airplayButton=this.container.querySelector(".smartplayer-airplay-icon"),this.subtitleButton=this.container.querySelector(".smartplayer-subtitle-icon"),this.subtitleButtonInner=this.container.querySelector(".smartplayer-subtitle-icon .smartplayer-icon-content"),this.subtitle=this.container.querySelector(".smartplayer-subtitle"),this.qualityButton=this.container.querySelector(".smartplayer-quality-icon"),this.barPreview=this.container.querySelector(".smartplayer-bar-preview"),this.barWrap=this.container.querySelector(".smartplayer-bar-wrap"),this.infoPanel=this.container.querySelector(".smartplayer-info-panel"),this.infoPanelClose=this.container.querySelector(".smartplayer-info-panel-close"),this.infoVersion=this.container.querySelector(".smartplayer-info-panel-item-version .smartplayer-info-panel-item-data"),this.infoFPS=this.container.querySelector(".smartplayer-info-panel-item-fps .smartplayer-info-panel-item-data"),this.infoType=this.container.querySelector(".smartplayer-info-panel-item-type .smartplayer-info-panel-item-data"),this.infoUrl=this.container.querySelector(".smartplayer-info-panel-item-url .smartplayer-info-panel-item-data"),this.infoResolution=this.container.querySelector(".smartplayer-info-panel-item-resolution .smartplayer-info-panel-item-data"),this.infoDuration=this.container.querySelector(".smartplayer-info-panel-item-duration .smartplayer-info-panel-item-data"),this.smartPlay=this.container.querySelector(".smartplayer-smartplay"),this.miniHooksContainer=this.container.querySelector(".smartplayer-mini-hooks-container"),this.imageStart=this.container.querySelector(".smartplayer-image-start"),this.imageController=this.container.querySelector(".smartplayer-image-pause"),this.thumbnail=this.container.querySelector(".smartplayer-thumbnail"),this.bigplay=this.container.querySelector(".smartplayer-bigplay"),this.resume=this.container.querySelector(".smartplayer-resume"),this.fakeBar=this.container.querySelector(".smartplayer-fake-bar"),this.callActions=this.container.querySelectorAll(".smartplayer-call-action--link"),this.callActions.forEach((function(t){return t.addEventListener("touchend",(function(){return t.click()}))}))}}]),t}();function or(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var lr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.mounted=null,this.currentId=null,this.checkThumb=this.checkThumb.bind(this),this.thumbs=(e.options.thumbs||[]).sort((function(t,e){return t.start-e.start})),this.thumbs.length&&this.setEvents()}return function(t,e,r){e&&or(t.prototype,e),r&&or(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"setEvents",value:function(){var t=this;this.thumbs.forEach((function(e){t.player.on("timeupdate",(function(){return t.checkThumb(e)}))}))}},{key:"checkThumb",value:function(t){var e=this.player.video.currentTime,r=t.start<=e&&e<=t.finish;!this.mounted&&r?(this.currentId=t.id,this.mounted=!0,this.mount(t)):this.mounted&&t.id==this.currentId&&!r&&(this.mounted=!1,this.unmount())}},{key:"mount",value:function(t){if(this.player.template.thumbnail.innerHTML="",this.player.template.thumbnail.style.backgroundImage="url('".concat(t.image,"')"),t.has_button){var e=document.createElement("a");e.id=t.id,e.href=t.button_url,e.target=t.button_open_in_new_tab?"_blank":"_parent",e.innerHTML=t.button_name,e.classList.add("smartplayer-thumbnail--link"),e.classList.add("smartplayer-thumbnail--".concat(t.button_size)),e.classList.add("smartplayer-thumbnail--".concat(t.button_position)),this.addBaseClasses(e),this.player.template.thumbnail.appendChild(e),this.transferUtm()}this.player.template.thumbnail.classList.add("smartplayer-thumbnail--ready")}},{key:"unmount",value:function(){this.player.template.thumbnail.classList.remove("smartplayer-thumbnail--ready")}},{key:"addBaseClasses",value:function(t){try{this.addClassToActionThumb(t,"smartplayer-thumbsniper-transfer-utm"),this.addClassToActionThumb(t,"smartplayer-click-event")}catch(t){console.log(t)}}},{key:"transferUtm",value:function(){try{(new L).transferUtmTo("smartplayer-thumbsniper-transfer-utm")}catch(t){console.error(t)}}},{key:"addClassToActionThumb",value:function(t,e){t&&!t.classList.contains(e)&&t.classList.add(e)}}]),t}();function cr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var ur=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},this.types=["loading","info","fps"],this.init()}return function(t,e,r){e&&cr(t.prototype,e),r&&cr(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"init",value:function(){var t=this;this.types.map((function(e){return"fps"!==e&&t["init".concat(e,"Checker")](),e}))}},{key:"initloadingChecker",value:function(){var t=this,e=0,r=0,a=!1;this.loadingChecker=setInterval((function(){t.enableloadingChecker&&(r=t.player.video.currentTime,a||r!==e||t.player.video.paused||(t.player.container.classList.add("smartplayer-loading"),a=!0,t.player.events.trigger("startLoading")),a&&r>e&&!t.player.video.paused&&(t.player.container.classList.remove("smartplayer-loading"),a=!1,t.player.events.trigger("finishLoading")),e=r)}),100)}},{key:"initfpsChecker",value:function(){var t=this;window.requestAnimationFrame((function(){if(t.enablefpsChecker)if(t.initfpsChecker(),t.fpsStart){t.fpsIndex++;var e=new Date;e-t.fpsStart>1e3&&(t.player.infoPanel.fps(t.fpsIndex/(e-t.fpsStart)*1e3),t.fpsStart=new Date,t.fpsIndex=0)}else t.fpsStart=new Date,t.fpsIndex=0;else t.fpsStart=0,t.fpsIndex=0}))}},{key:"initinfoChecker",value:function(){var t=this;this.infoChecker=setInterval((function(){t.enableinfoChecker&&t.player.infoPanel.update()}),1e3)}},{key:"enable",value:function(t){this["enable".concat(t,"Checker")]=!0,"fps"===t&&this.initfpsChecker()}},{key:"disable",value:function(t){this["enable".concat(t,"Checker")]=!1}},{key:"destroy",value:function(){var t=this;this.types.map((function(e){return t["enable".concat(e,"Checker")]=!1,t["".concat(e,"Checker")]&&clearInterval(t["".concat(e,"Checker")]),e}))}}]),t}();function dr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var hr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.player=e,this.options=e.options,this.turbo_auto_test=this.options.turbo_auto_test,this.turbo_speed=this.options.turbo_speed,this.chosenSpeed=1,this.localStorage=Vt,this.sessionId="",e&&e.analytics&&e.analytics.hermesV2&&e.analytics.hermesV2.session_id?this.sessionId=e.analytics.hermesV2.session_id:this.sessionId=O.currentSession(e),this.storageKey="turbo_".concat(this.options.id,"_").concat(this.sessionId),this.localStorage.cleanupOldSessions("turbo_".concat(this.options.id,"_"),this.storageKey)}return function(t,e,r){e&&dr(t.prototype,e),r&&dr(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"chooseRandomEntry",value:function(t){var e=O.chooseRandomEntry(t,"speed",1),r=JSON.stringify({speed:e});return this.localStorage.setItem(this.storageKey,r),e}},{key:"speed_exists",value:function(t,e){return!!e&&e.some((function(e){return e.speed===t}))}},{key:"load_speed",value:function(t){try{var e=this.localStorage.getItem(this.storageKey);if(!e)return this.chooseRandomEntry(t);var r=JSON.parse(e);return r&&!O.isNil(r.speed)&&this.speed_exists(r.speed,t)?r.speed:this.chooseRandomEntry(t)}catch(e){return this.chooseRandomEntry(t)}}},{key:"filterSpeeds",value:function(){var t=[];return this.player.options.turbos&&this.player.options.turbos.length>0&&(t=this.player.options.turbos.filter((function(t){return t.active}))),t}},{key:"setSpeed",value:function(){if(this.turbo_auto_test){var t=this.filterSpeeds();this.player.options.turbo&&t.length>0&&(this.chosenSpeed=this.load_speed(t))}else this.chosenSpeed=this.turbo_speed?this.turbo_speed:1}},{key:"hermesV2",value:function(){this.shouldSendData()&&this.player.analytics.hermesV2.event("turbo",{speed:this.chosenSpeed})}},{key:"shouldSendData",value:function(){return this.player&&this.player.analytics&&this.player.analytics.hermesV2&&!this.player.options.preview&&this.player.options.turbo_auto_test}}]),t}();function pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function fr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pr(Object(r),!0).forEach((function(e){mr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var vr=0,gr={instances:[]},br=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mounted=!1;var r=e.smart_autoplay_elements&&e.smart_autoplay_elements.length>0,a=e.smart_autoplays&&e.smart_autoplays.length>0;this.options=function(t){var e=new URLSearchParams(window.location.search).get("lang"),r={id:location.host+location.pathname,container:t.element||document.getElementsByClassName("smartplay")[0],preview:!1,live:!1,autoplay:!0,theme:"#b7daff",loop:!1,lang:(navigator.language||navigator.browserLanguage).toLowerCase(),screenshot:!1,airplay:!1,hotkey:!0,preload:"metadata",volume:1,seekTime:10,playbackSpeed:[.5,.75,1,1.25,1.5,2],video:{},contextmenu:[],mutex:!0,pluginOptions:{hls:{},dash:{}},displays:{},callAction:[],pixels:[],thumbs:[],resume:!1,smartplay_options:{},fake_bar:!1,fake_bar_options:{vbar_color:null}},a={volume:!0,volumeIcon:!0,volumeBar:!0,seekButton:!0,logo:!0,controlBar:!0,play:!0,fakebar:!1};for(var n in void 0===t.fake_bar&&t.displays&&t.displays.fakebar&&(t.fake_bar=t.displays.fakebar),r)Object.prototype.hasOwnProperty.call(r,n)&&!Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=r[n]);for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&!Object.prototype.hasOwnProperty.call(t.displays,i)&&(t.displays[i]=a[i]);t.video&&(!t.video.type&&(t.video.type="m3u8"),r.video.width=t.video.width||1280,r.video.height=t.video.height||720),t.video&&!t.video.height&&(t.video.height=720),t.video&&!t.video.width&&(t.video.width=1280),t.subtitle_active&&t.subtitle&&(!t.subtitle.type&&(t.subtitle.type="webvtt"),!t.subtitle.font_size&&(t.subtitle.font_size="18px"),!t.subtitle.bottom&&(t.subtitle.bottom="40px"),!t.subtitle.color&&(t.subtitle.color="#fff"),!t.subtitle.background_color&&(t.subtitle.background_color="rgba(0, 0, 0, 0.7)"),!t.subtitle.text_align&&(t.subtitle.text_align="center"),!t.subtitle.url&&console.warn("Subtitle URL is not provided")),t.video.quality&&(t.video.url=t.video.quality[t.video.defaultQuality].url),e&&(t.lang=e.toLowerCase());var s=function(t){for(var e=t.reduce((function(t,e){return t+(e.weight||1)}),0),r=Math.random()*e,a=0,n=0;n<t.length;n++)if(r<=(a+=t[n].weight||1))return t[n];return t[0]}([{id:"menu_v_1",link:"https://vturb.com/?via=player&utm_source=player&utm_medium=powered_by_VTurb&utm_campaign=viral_player&utm_content=",text:"powered_by_vturb",weight:1,utm_content:"utmc_powered_by_vturb"}]);return t.contextmenu=t.contextmenu.concat([s]),"smartplay"!==t.autoplay||""!==t.smartplay&&t.smartplay||(t.smartplay="<style>#smartplayer#smartplayer#smartplayer .smartplay-wrapper {border-radius: 10px;background-color: ".concat(t.smartplay_options.background_color||"rgba(9, 0 , 46, 0.75)",";border: 2px solid ").concat(t.smartplay_options.foreground_color||"rgb(255, 255, 255)",";width: 80%;height: auto;top: 50%;left: 50%;padding: 0.5em;max-width: 400px;text-align: center;position: absolute;-webkit-transform: translate(-50%, -50%);-ms-transform: translate(-50%, -50%);transform: translate(-50%, -50%);}#smartplayer#smartplayer#smartplayer .smartplay-span {font-family: Arial,Helvetica,sans-serif;font-size: 24px;font-weight: 700;display: block;text-align: center;color: ").concat(t.smartplay_options.foreground_color||"rgb(255, 255, 255)",';white-space: normal;width: 100%;line-height: 1.1em;padding: 0.5em 0;-webkit-box-sizing: border-box;box-sizing: border-box;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 36%;height: auto;}@media (max-width: 680px) {#smartplayer#smartplayer#smartplayer .smartplay-span {font-size: 20px;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 30%;}}@media (max-width: 380px) {#smartplayer#smartplayer#smartplayer .smartplay-span {font-size: 16px;line-height: 1em;}#smartplayer#smartplayer#smartplayer .smartplay-wrapper svg {width: 25%;}}</style><div class="smartplay-wrapper"><span class="smartplay-span">').concat(t.smartplay_options.top_text||"Seu vídeo já começou",'</span><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="46.75px" height="32.563px" viewBox="7.999 9.062 46.75 32.563" enable-background="new 7.999 9.062 46.75 32.563" xml:space="preserve"><style>@-webkit-keyframes BLINK {0% { opacity: 0; }33% { opacity: 1; }66% { opacity: 1; }100% { opacity: 0; }}@keyframes BLINK {0% { opacity: 0; }33% { opacity: 1; }66% { opacity: 1; }100% { opacity: 0; }}#smartplayer#smartplayer#smartplayer .blink_1 {-webkit-animation: BLINK 2s infinite;animation: BLINK 2s infinite;opacity: 0;}#smartplayer#smartplayer#smartplayer .blink_2 {-webkit-animation: BLINK 2s infinite .3s;animation: BLINK 2s infinite .3s;opacity: 0;}#smartplayer#smartplayer#smartplayer .blink_3 {-webkit-animation: BLINK 2s infinite .6s;animation: BLINK 2s infinite .6s;opacity: 0;}#smartplayer#smartplayer#smartplayer .smartplay-svg-color {fill: ').concat(t.smartplay_options.foreground_color||"#FFFFFF",' !important;}#smartplayer#smartplayer#smartplayer .adjustable {border: 4px solid red;}</style><g class="adjustable fg"><path class="smartplay-svg-color" d="M53.249,39.616c-0.186,0-0.371-0.051-0.537-0.157l-43.5-27.75c-0.466-0.297-0.603-0.916-0.306-1.381c0.298-0.466,0.917-0.601,1.381-0.306l43.5,27.75c0.467,0.297,0.604,0.916,0.307,1.381C53.901,39.453,53.579,39.616,53.249,39.616z"></path><path class="blink_3 smartplay-svg-color" d="M48.896,33.467l1.699,1.085c3.497-7.791,2.073-17.271-4.313-23.659c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414C50.581,18.019,51.913,26.463,48.896,33.467z"></path><path class="blink_3 smartplay-svg-color" d="M46.926,36.956c-0.612,0.863-1.286,1.695-2.059,2.469c-0.392,0.391-0.392,1.023,0,1.414c0.194,0.195,0.45,0.293,0.707,0.293c0.256,0,0.512-0.098,0.706-0.293c0.878-0.878,1.642-1.824,2.333-2.807L46.926,36.956z"></path><path class="blink_2 smartplay-svg-color" d="M42.543,29.415l1.777,1.135c1.545-5.315,0.229-11.293-3.953-15.476c-0.392-0.391-1.023-0.391-1.414,0c-0.392,0.391-0.392,1.023,0,1.414C42.454,19.987,43.639,24.925,42.543,29.415z"></path><path class="blink_2 smartplay-svg-color" d="M41,33.174c-0.563,0.94-1.235,1.837-2.047,2.646c-0.391,0.392-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.916-0.914,1.676-1.924,2.317-2.984L41,33.174z"></path><path class="blink_1 smartplay-svg-color" d="M35.771,25.094l2.003,1.277c0.012-0.203,0.029-0.404,0.029-0.609c0-3.079-1.2-5.974-3.381-8.153c-0.391-0.391-1.022-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414C34.652,20.666,35.613,22.802,35.771,25.094z"></path><path class="blink_1 smartplay-svg-color" d="M35.084,29.401c-0.474,1.145-1.172,2.197-2.076,3.1c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.707-0.293c1.008-1.006,1.795-2.17,2.361-3.43L35.084,29.401z"></path><polygon class="smartplay-svg-color" points="28.124,20.215 28.124,14.991 24.635,17.99  "></polygon><path class="smartplay-svg-color" d="M20.921,20.366h-6.423c-0.553,0-1,0.508-1,1.135v8.229c0,0.627,0.447,1.135,1,1.135h7.375l6.25,5.875V24.96L20.921,20.366z"></path></g></svg><span class="smartplay-span">').concat(t.smartplay_options.bottom_text||"Clique para ouvir","</span></div>")),t.callAction.forEach((function(t){t.id=t.id||O.uniqID()})),t}(fr(fr({preload:"webtorrent"===e.video.type?"none":"metadata",device_type:e.video.height>=e.video.width?"mobile":"desktop"},e),{},{autoplay:!(!r&&!a)&&e.autoplay})),this.container=this.options.container,this.events=new Wt,"mobile"===this.options.device_type&&this.mountMobileContainer(),vr++,gr.instances.push(this),this.analytics=new p(this),this.startSpeedCodeDetection(),this.mountHeadlines(),this.mountAutoplayV2()}return function(t,e,r){e&&yr(t.prototype,e),r&&yr(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"startSpeedCodeDetection",value:function(){try{this.speedCodeDetection=new He(this)}catch(t){console.error(t)}}},{key:"mountAutoplayV2",value:function(){new Xe(this).mount()}},{key:"mobileContainerResize",value:function(){this.mobileContainer&&(this.mobileContainer.style.maxWidth=window.innerWidth<=450?"100%":"400px")}},{key:"mountMobileContainer",value:function(){var t=this;try{if(this.container.parentElement.classList.contains("smartplayer-mobile-container"))return;var e=document.createElement("div");e.classList.add("smartplayer-mobile-container"),e.style.margin="0 auto",e.style.width="100%",this.container.parentElement.insertBefore(e,this.container),e.appendChild(this.container),this.mobileContainer=e,this.mobileContainerResize(),window.addEventListener("resize",(function(){return t.mobileContainerResize()}))}catch(t){console.error(t)}}},{key:"mount",value:function(){var t=this;this.events.trigger("premount",this),this.mounted=!0,this.videoMounted=!1,this.container.classList.add("smartplay","smartplayer-initial"),this.options.video.quality&&(this.qualityIndex=this.options.video.defaultQuality,this.quality=this.options.video.quality[this.options.video.defaultQuality]),this.isSafari=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS"),this.options.live?this.container.classList.add("smartplayer-live"):this.container.classList.remove("smartplayer-live"),O.isMobile&&this.container.classList.add("smartplayer-mobile"),this.arrow=this.container.offsetWidth<=500,this.arrow&&this.container.classList.add("smartplayer-arrow"),this.tran=new me(this.options.lang).tran,this.resume=new Gt(this),this.template=new sr({container:this.container,options:this.options,index:vr,tran:this.tran}),this.inResume||"smartplay"!==this.options.autoplay||(this.container.style.opacity=0),this.video=document.createElement("video"),this.video.classList.add("smartplayer-video"),this.video.classList.add("smartplayer-video-current"),this.video.muted=this.options.volume<=0,this.video.preload=this.options.preload,this.video.playsInline=!0,this.video.poster=this.options.video.pic,this.actionAfterFinish=new d(this),this.autoScroll=new m(this),this.bar=new v(this.template),this.options.fake_bar&&(this.fakeBar=new Xt(this)),this.bezel=new b(this.template.bezel),this.fullScreen=new Jt(this),this.controller=new Ut(this),this.imageController=new ve(this),this.setting=new Se(this),this.speedControl=new Je(this),this.plugins={},document.addEventListener("click",(function(){t.focus=!1}),!0),this.container.addEventListener("click",(function(){t.focus=!0}),!0),this.paused=!0,this.timer=new ur(this),this.hotkey=new pe(this),this.contextmenu=new j(this),this.startTurbo(),this.videoMounted||this.mountVideo(),this.infoPanel=new be(this),this.callaction=new N(this),this.conversionTrack=new Yt(this),this.pixel=new xe(this),this.thumb=new lr(this),this.network=new ke(this),this.smartElements=new Ne(this),this.resume.start(),this.inResume||("smartplay"===this.options.autoplay?this.smartplay=new ze(this):this.options.autoplay?this.play():this.controller.hide()),this.ignoreMediaNotifications(),this.events.trigger("mounted",this)}},{key:"startTurbo",value:function(){try{this.options.turbo&&(this.turbo=new hr(this),this.turbo.setSpeed(),this.turbo.hermesV2())}catch(t){console.error(t)}}},{key:"mountHeadlines",value:function(){try{ee.shouldLoadHeadline(this.options)&&(this.headlines=new ee(this))}catch(t){console.error(t)}}},{key:"ignoreMediaNotifications",value:function(){navigator.mediaSession&&"function"==typeof navigator.mediaSession.setActionHandler&&(navigator.mediaSession.setActionHandler("play",(function(){})),navigator.mediaSession.setActionHandler("pause",(function(){})),navigator.mediaSession.setActionHandler("stop",(function(){})),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null),navigator.mediaSession.setActionHandler("seekto",(function(){})),navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null))}},{key:"seek",value:function(t){t=Math.max(t,0),this.video.duration&&(t=Math.min(t,this.video.duration)),this.video.currentTime=t,this.bar.set("played",t/this.video.duration,"width"),this.template.ptime&&(this.template.ptime.innerHTML=O.secondToTime(t)),this.options.fake_bar&&this.fakeBar.set(t,this.video.duration)}},{key:"play",value:function(t){var e=this;if(this.paused=!1,this.wasPlayed=!0,!this.videoMounted)return this.mountVideo(this.play.bind(this));(this.container.classList.remove("smartplayer-initial"),this.template.bigplay&&this.template.bigplay.classList.add("smartplayer-hidden"),this.video.paused&&!O.isMobile&&this.bezel.switch(Mt.play),this.template.playButton&&(this.template.playButton.innerHTML=Mt.pause),this.template.mobilePlayButton&&(this.template.mobilePlayButton.innerHTML=Mt.pause),t)||o.a.resolve(this.video.play()).catch((function(){e.pause()})).then((function(){e.video.play()}));if(this.timer.enable("loading"),this.container.classList.remove("smartplayer-paused"),this.container.classList.add("smartplayer-playing"),this.options.mutex&&gr.instances.length>1)for(var r=0;r<gr.instances.length;r++)this!==gr.instances[r]&&gr.instances[r].pause()}},{key:"pause",value:function(t){(this.options.displays.play_pause||this.options.displays.big_play)&&this.videoMounted&&(this.paused=!0,this.container.classList.remove("smartplayer-loading"),this.template.bigplay&&this.template.bigplay.classList.remove("smartplayer-hidden"),this.video.paused||O.isMobile||this.bezel.switch(Mt.pause),this.template.playButton&&(this.template.playButton.innerHTML=Mt.play),this.template.mobilePlayButton&&(this.template.mobilePlayButton.innerHTML=Mt.play),t||this.video.pause(),this.timer.disable("loading"),this.container.classList.remove("smartplayer-playing"),this.container.classList.add("smartplayer-paused"))}},{key:"switchVolumeIcon",value:function(){this.template.volumeIcon&&(this.volume()>=.95?this.template.volumeIcon.innerHTML=Mt.volumeUp:this.volume()>0?this.template.volumeIcon.innerHTML=Mt.volumeDown:this.template.volumeIcon.innerHTML=Mt.volumeOff)}},{key:"volume",value:function(t,e,r){if(t=parseFloat(t),!isNaN(t)){t=Math.max(t,0),t=Math.min(t,1),this.bar.set("volume",t,"width");var a="".concat((100*t).toFixed(0),"%");this.template.volumeBarWrapWrap&&(this.template.volumeBarWrapWrap.dataset.balloon=a),r||this.notice("".concat(this.tran("Volume")," ").concat((100*t).toFixed(0),"%")),this.video.volume=t,this.video.muted&&(this.video.muted=!1),this.switchVolumeIcon()}return this.video.volume}},{key:"toggle",value:function(){!this.videoMounted||this.video.paused?this.play():this.pause()}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"switchVideo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.initMSE(this.video,"auto",t)}},{key:"initMSE",value:function(t,e){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.type=e,this.options.video.customType&&this.options.video.customType[e])"[object Function]"===Object.prototype.toString.call(this.options.video.customType[e])?this.options.video.customType[e](this.video,this):console.error("Illegal customType: ".concat(e));else switch("auto"===this.type&&(/m3u8(#|\?|$)/i.exec(t.src)||/m3u8(#|\?|$)/i.exec(a)?this.type="hls":this.type="normal"),this.type){case"hls":if(this.options.isKwaiPreview){var n=function e(){new le(t,r,r.options.pluginOptions.hls,a),r.events.off("play",e)};this.events.on("play",n)}else new le(t,this,this.options.pluginOptions.hls,a);break;case"dash":if(window.dashjs){var i=window.dashjs.MediaPlayer().create().initialize(t,t.src,!1),s=this.options.pluginOptions.dash;i.updateSettings(s),this.events.on("destroy",(function(){window.dashjs.MediaPlayer().reset(),delete r.plugins.dash}))}else this.notice("Error: Can't find dashjs.");break;default:t.src=this.options.video.url}}},{key:"initVideo",value:function(t,e){var r=this;this.initMSE(t,e),this.on("durationchange",(function(){r.turbo&&r.turbo.chosenSpeed>0&&r.speed(r.turbo.chosenSpeed),r.template.dtime&&1!==t.duration&&t.duration!==1/0&&(r.template.dtime.innerHTML=O.secondToTime(t.duration))})),this.on("progress",(function(){var e=t.buffered.length?t.buffered.end(t.buffered.length-1)/t.duration:0;r.bar.set("loaded",e,"width")})),this.on("error",(function(){r.video.error&&r.tran&&r.notice&&"webtorrent"!==r.type&&r.notice(r.tran("Video load failed"),-1)})),this.on("ended",(function(){r.bar.set("played",1,"width"),r.setting.loop?(r.seek(0),r.play()):r.pause()})),this.on("play",(function(){r.paused&&r.play(!0)})),this.on("pause",(function(){r.paused||r.pause(!0)})),this.on("timeupdate",(function(){r.bar.set("played",r.video.currentTime/r.video.duration,"width");var t=O.secondToTime(r.video.currentTime);r.options.fake_bar&&r.fakeBar.set(r.video.currentTime,r.video.duration),r.template.ptime&&r.template.ptime.innerHTML!==t&&(r.template.ptime.innerHTML=t)}));for(var a=function(e){t.addEventListener(r.events.videoEvents[e],(function(){r.events.trigger(r.events.videoEvents[e])}))},n=0;n<this.events.videoEvents.length;n++)a(n);this.options.subtitle_active&&this.options.subtitle&&this.template.subtitle&&(this.subtitle=new $e(this))}},{key:"mountVideo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.template.videoWrap.insertBefore(this.video,this.template.videoWrap.getElementsByTagName("div")[0]),this.initVideo(this.video,this.quality&&this.quality.type||this.options.video.type),this.volume(this.options.volume),this.videoMounted=!0,this.on("loadeddata",(function(){var e=t.video.videoHeight/t.video.videoWidth*100;e&&(t.container.style.padding="".concat(e,"% 0 0")),t.template.container.style.opacity=1})),this.on("canplay",(function(){"function"==typeof e&&e(),t.removePreloadElement(),e=null})),setTimeout((function(){t.container.style.opacity=1}),1500)}},{key:"removePreloadElement",value:function(){var t=document.getElementById("thumb_".concat(this.options.id));t&&this.container.removeChild(t);var e=document.getElementById("backdrop_".concat(this.options.id));e&&this.container.removeChild(e)}},{key:"switchQuality",value:function(t){var e=this;if(t="string"==typeof t?parseInt(t):t,this.qualityIndex!==t&&!this.switchingQuality){this.qualityIndex=t,this.switchingQuality=!0,this.quality=this.options.video.quality[t],this.template.qualityButton&&(this.template.qualityButton.innerHTML=this.quality.name);var r=this.video.paused;this.video.pause();var a=c()({current:!1,pic:null,autoplay:this.options.autoplay,screenshot:this.options.screenshot,preload:"auto",url:this.quality.url,subtitle:this.options.subtitle}),n=(new DOMParser).parseFromString(a,"text/html").body.firstChild;this.template.videoWrap.insertBefore(n,this.template.videoWrap.getElementsByTagName("div")[0]),this.prevVideo=this.video,this.video=n,this.initVideo(this.video,this.quality.type||this.options.video.type),this.seek(this.prevVideo.currentTime),this.notice("".concat(this.tran("Switching to")," ").concat(this.quality.name," ").concat(this.tran("quality")),-1),this.events.trigger("quality_start",this.quality),this.on("canplay",(function(){if(e.prevVideo){if(e.video.currentTime!==e.prevVideo.currentTime)return void e.seek(e.prevVideo.currentTime);e.template.videoWrap.removeChild(e.prevVideo),e.video.classList.add("smartplayer-video-current"),r||e.video.play(),e.prevVideo=null,e.notice("".concat(e.tran("Switched to")," ").concat(e.quality.name," ").concat(e.tran("quality"))),e.switchingQuality=!1,e.events.trigger("quality_end")}}))}}},{key:"notice",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice&&(this.template.notice.innerHTML=t,this.template.notice.style.opacity=a,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("notice_show",t),r>0&&(this.noticeTime=setTimeout((function(){e.template.notice.style.opacity=0,e.events.trigger("notice_hide")}),r)))}},{key:"resize",value:function(){this.controller.thumbnails&&this.controller.thumbnails.resize(160,this.video.videoHeight/this.video.videoWidth*160,this.template.barWrap.offsetWidth),this.events.trigger("resize")}},{key:"speed",value:function(t){this.video.playbackRate=t}},{key:"destroy",value:function(){this.mounted&&(this.pause(),this.controller.destroy(),this.timer.destroy(),this.container.innerHTML="",this.events.trigger("destroy"),this.video&&(this.video.src="")),gr.instances.splice(gr.instances.indexOf(this),1)}}],[{key:"version",get:function(){return"1.35.1"}},{key:"instances",get:function(){return gr}}]),t}(),wr=r(3),kr=r.n(wr);function Tr(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var xr=r(52),Er=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.options.container.id="smartplayer",this.axiosInstance=xr.create({timeout:2e3}),this.tran=(new me).tran,this.domain=window.location.host,window.location!==window.parent.location)try{var r=document.referrer.match(/[http|https]:\/\/(.+?)(\/|&|$)/);this.domain=r?r[1]:window.parent.location.host}catch(t){console.log("Can't get domain from parent",t)}this.options.preview?this.m3u8_path="https://".concat(e.cdn,"/").concat(e.accountId,"/").concat(e.videoId,"/main.m3u8"):this.m3u8_path=e.video.url}return function(t,e,r){e&&Tr(t.prototype,e),r&&Tr(t,r),Object.defineProperty(t,"prototype",{writable:!1})}(t,[{key:"check",value:function(t){var e=this;return this.axiosInstance.post("https://api.vturb.com.br/vturb/check",{m3u8_path:this.m3u8_path,player_id:this.options.id,domain:this.domain}).then((function(){return!0})).catch((function(t){switch((t.response||{}).status){case 401:setTimeout((function(){e.options.container.innerHTML=kr()({icons:Mt,message:e.tran("license_error_401")})}),50);break;case 403:setTimeout((function(){e.options.container.innerHTML=kr()({icons:Mt,message:e.tran("license_error_403")})}),50);break;case 406:setTimeout((function(){e.options.container.innerHTML=kr()({icons:Mt,message:e.tran("license_error_406")})}),50);break;case 451:setTimeout((function(){e.options.container.innerHTML=kr()({icons:Mt,message:e.tran("license_error_451")})}),50);break;default:return!0}return!1})).then(t)}}]),t}();function Sr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function _r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sr(Object(r),!0).forEach((function(e){Lr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Lr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ar=function(t,e,r,a){Cr(),console.info("::VTURB:: v(".concat("1.35.1",")"));var n=_r(_r({id:"".concat(t).replace(/vid_|scr_/,"")},a||{}),{},{videoId:r,accountId:e,container:document.getElementById(t)},function(){try{if((!(window.location==window.parent.location)&&document.referrer?document.referrer:document.location.href).toLocaleLowerCase().includes("type=preload"))return{autoplay:!1,isKwaiPreview:!0}}catch(t){console.error(t)}return{}}());n.cdn=n.secure?"m3u8.vturb.net":n.cdn||"cdn.converteai.net",n.video=n.video||{},n.video.url=n.video.url||"https://".concat(n.cdn,"/").concat(function(t){if(t.secure){var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-+=.@$!*",r=Array.from({length:32},(function(){return e[Math.floor(Math.random()*e.length)]})).join("");return"t-".concat(r,"/")}return""}(n)).concat(e,"/").concat(r,"/main.m3u8"),n.video.type=n.video.type||"hls",n.video.pic=n.video.pic||"https://images.converteai.net/".concat(e,"/players/").concat(n.id,"/cover.jpg");var i=new br(n),s=new Er(n);i.mount(),s.check((function(t){t||i.destroy()}))},Cr=function(){var t,e=null;window.location.search.slice(1).split("&").forEach((function(t){/^inspect=/.test(t)&&(e=t.split("=")[1])})),e&&((t=document.createElement("script")).src="https://remotejs.com/agent/agent.js",t.setAttribute("data-consolejs-channel",e),document.head.appendChild(t))};window.smrtvds&&((window.smrtvds.queue||[]).forEach((function(t){return Ar.apply(window.smrtvds,t)})),window.smrtvds.callMethod=Ar);e.default=br.instances},function(t,e,r){"use strict";var a;r.r(e),r.d(e,"v1",(function(){return y})),r.d(e,"v3",(function(){return _})),r.d(e,"v4",(function(){return A})),r.d(e,"v5",(function(){return I})),r.d(e,"NIL",(function(){return D})),r.d(e,"version",(function(){return O})),r.d(e,"validate",(function(){return o})),r.d(e,"stringify",(function(){return p})),r.d(e,"parse",(function(){return v}));var n=new Uint8Array(16);function i(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(n)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(t){return"string"==typeof t&&s.test(t)},l=[],c=0;c<256;++c)l.push((c+256).toString(16).slice(1));function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l[t[e+0]]+l[t[e+1]]+l[t[e+2]]+l[t[e+3]]+"-"+l[t[e+4]]+l[t[e+5]]+"-"+l[t[e+6]]+l[t[e+7]]+"-"+l[t[e+8]]+l[t[e+9]]+"-"+l[t[e+10]]+l[t[e+11]]+l[t[e+12]]+l[t[e+13]]+l[t[e+14]]+l[t[e+15]]}var d,h,p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=u(t,e);if(!o(r))throw TypeError("Stringified UUID is invalid");return r},f=0,m=0;var y=function(t,e,r){var a=e&&r||0,n=e||new Array(16),s=(t=t||{}).node||d,o=void 0!==t.clockseq?t.clockseq:h;if(null==s||null==o){var l=t.random||(t.rng||i)();null==s&&(s=d=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==o&&(o=h=16383&(l[6]<<8|l[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),p=void 0!==t.nsecs?t.nsecs:m+1,y=c-f+(p-m)/1e4;if(y<0&&void 0===t.clockseq&&(o=o+1&16383),(y<0||c>f)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,m=p,h=o;var v=(1e4*(268435455&(c+=122192928e5))+p)%4294967296;n[a++]=v>>>24&255,n[a++]=v>>>16&255,n[a++]=v>>>8&255,n[a++]=255&v;var g=c/4294967296*1e4&268435455;n[a++]=g>>>8&255,n[a++]=255&g,n[a++]=g>>>24&15|16,n[a++]=g>>>16&255,n[a++]=o>>>8|128,n[a++]=255&o;for(var b=0;b<6;++b)n[a+b]=s[b];return e||u(n)};var v=function(t){if(!o(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=255&e,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=255&e,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=255&e,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=255&e,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=255&e,r};function g(t,e,r){function a(t,a,n,i){var s;if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}(t)),"string"==typeof a&&(a=v(a)),16!==(null===(s=a)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(a),o.set(t,a.length),(o=r(o))[6]=15&o[6]|e,o[8]=63&o[8]|128,n){i=i||0;for(var l=0;l<16;++l)n[i+l]=o[l];return n}return u(o)}try{a.name=t}catch(t){}return a.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",a}function b(t){return 14+(t+64>>>9<<4)+1}function w(t,e){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}function k(t,e,r,a,n,i){return w((s=w(w(e,t),w(a,i)))<<(o=n)|s>>>32-o,r);var s,o}function T(t,e,r,a,n,i,s){return k(e&r|~e&a,t,e,n,i,s)}function x(t,e,r,a,n,i,s){return k(e&a|r&~a,t,e,n,i,s)}function E(t,e,r,a,n,i,s){return k(e^r^a,t,e,n,i,s)}function S(t,e,r,a,n,i,s){return k(r^(e|~a),t,e,n,i,s)}var _=g("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return function(t){for(var e=[],r=32*t.length,a=0;a<r;a+=8){var n=t[a>>5]>>>a%32&255,i=parseInt("0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n),16);e.push(i)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[b(e)-1]=e;for(var r=1732584193,a=-271733879,n=-1732584194,i=271733878,s=0;s<t.length;s+=16){var o=r,l=a,c=n,u=i;r=T(r,a,n,i,t[s],7,-680876936),i=T(i,r,a,n,t[s+1],12,-389564586),n=T(n,i,r,a,t[s+2],17,606105819),a=T(a,n,i,r,t[s+3],22,-1044525330),r=T(r,a,n,i,t[s+4],7,-176418897),i=T(i,r,a,n,t[s+5],12,1200080426),n=T(n,i,r,a,t[s+6],17,-1473231341),a=T(a,n,i,r,t[s+7],22,-45705983),r=T(r,a,n,i,t[s+8],7,1770035416),i=T(i,r,a,n,t[s+9],12,-1958414417),n=T(n,i,r,a,t[s+10],17,-42063),a=T(a,n,i,r,t[s+11],22,-1990404162),r=T(r,a,n,i,t[s+12],7,1804603682),i=T(i,r,a,n,t[s+13],12,-40341101),n=T(n,i,r,a,t[s+14],17,-1502002290),a=T(a,n,i,r,t[s+15],22,1236535329),r=x(r,a,n,i,t[s+1],5,-165796510),i=x(i,r,a,n,t[s+6],9,-1069501632),n=x(n,i,r,a,t[s+11],14,643717713),a=x(a,n,i,r,t[s],20,-373897302),r=x(r,a,n,i,t[s+5],5,-701558691),i=x(i,r,a,n,t[s+10],9,38016083),n=x(n,i,r,a,t[s+15],14,-660478335),a=x(a,n,i,r,t[s+4],20,-405537848),r=x(r,a,n,i,t[s+9],5,568446438),i=x(i,r,a,n,t[s+14],9,-1019803690),n=x(n,i,r,a,t[s+3],14,-187363961),a=x(a,n,i,r,t[s+8],20,1163531501),r=x(r,a,n,i,t[s+13],5,-1444681467),i=x(i,r,a,n,t[s+2],9,-51403784),n=x(n,i,r,a,t[s+7],14,1735328473),a=x(a,n,i,r,t[s+12],20,-1926607734),r=E(r,a,n,i,t[s+5],4,-378558),i=E(i,r,a,n,t[s+8],11,-2022574463),n=E(n,i,r,a,t[s+11],16,1839030562),a=E(a,n,i,r,t[s+14],23,-35309556),r=E(r,a,n,i,t[s+1],4,-1530992060),i=E(i,r,a,n,t[s+4],11,1272893353),n=E(n,i,r,a,t[s+7],16,-155497632),a=E(a,n,i,r,t[s+10],23,-1094730640),r=E(r,a,n,i,t[s+13],4,681279174),i=E(i,r,a,n,t[s],11,-358537222),n=E(n,i,r,a,t[s+3],16,-722521979),a=E(a,n,i,r,t[s+6],23,76029189),r=E(r,a,n,i,t[s+9],4,-640364487),i=E(i,r,a,n,t[s+12],11,-421815835),n=E(n,i,r,a,t[s+15],16,530742520),a=E(a,n,i,r,t[s+2],23,-995338651),r=S(r,a,n,i,t[s],6,-198630844),i=S(i,r,a,n,t[s+7],10,1126891415),n=S(n,i,r,a,t[s+14],15,-1416354905),a=S(a,n,i,r,t[s+5],21,-57434055),r=S(r,a,n,i,t[s+12],6,1700485571),i=S(i,r,a,n,t[s+3],10,-1894986606),n=S(n,i,r,a,t[s+10],15,-1051523),a=S(a,n,i,r,t[s+1],21,-2054922799),r=S(r,a,n,i,t[s+8],6,1873313359),i=S(i,r,a,n,t[s+15],10,-30611744),n=S(n,i,r,a,t[s+6],15,-1560198380),a=S(a,n,i,r,t[s+13],21,1309151649),r=S(r,a,n,i,t[s+4],6,-145523070),i=S(i,r,a,n,t[s+11],10,-1120210379),n=S(n,i,r,a,t[s+2],15,718787259),a=S(a,n,i,r,t[s+9],21,-343485551),r=w(r,o),a=w(a,l),n=w(n,c),i=w(i,u)}return[r,a,n,i]}(function(t){if(0===t.length)return[];for(var e=8*t.length,r=new Uint32Array(b(e)),a=0;a<e;a+=8)r[a>>5]|=(255&t[a/8])<<a%32;return r}(t),8*t.length))})),L={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var A=function(t,e,r){if(L.randomUUID&&!e&&!t)return L.randomUUID();var a=(t=t||{}).random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){r=r||0;for(var n=0;n<16;++n)e[r+n]=a[n];return e}return u(a)};function C(t,e,r,a){switch(t){case 0:return e&r^~e&a;case 1:return e^r^a;case 2:return e&r^e&a^r&a;case 3:return e^r^a}}function R(t,e){return t<<e|t>>>32-e}var I=g("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var a=unescape(encodeURIComponent(t));t=[];for(var n=0;n<a.length;++n)t.push(a.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,s=Math.ceil(i/16),o=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[64*l+4*u]<<24|t[64*l+4*u+1]<<16|t[64*l+4*u+2]<<8|t[64*l+4*u+3];o[l]=c}o[s-1][14]=8*(t.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(t.length-1)&4294967295;for(var d=0;d<s;++d){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=o[d][p];for(var f=16;f<80;++f)h[f]=R(h[f-3]^h[f-8]^h[f-14]^h[f-16],1);for(var m=r[0],y=r[1],v=r[2],g=r[3],b=r[4],w=0;w<80;++w){var k=Math.floor(w/20),T=R(m,5)+C(k,y,v,g)+b+e[k]+h[w]>>>0;b=g,g=v,v=R(y,30)>>>0,y=m,m=T}r[0]=r[0]+m>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+v>>>0,r[3]=r[3]+g>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),D="00000000-0000-0000-0000-000000000000";var O=function(t){if(!o(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}}]).default}));